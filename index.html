<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pukar Bhandari">
<meta name="dcterms.date" content="2025-09-17">

<title>Auto Operating Costs Calculation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-0b716d6fe31096b8dc5b1cb48462c79f.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="index_files/libs/bootstrap/bootstrap-dark-7c823468029c3b379f9b90e418026680.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="index_files/libs/bootstrap/bootstrap-0b716d6fe31096b8dc5b1cb48462c79f.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Auto Operating Costs Calculation</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
            <p class="subtitle lead">Estimating Auto Operating Costs for Travel Demand Model</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Pukar Bhandari <a href="mailto:pukar.bhandari@wfrc.utah.gov" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://wfrc.utah.gov/">
              Wasatch Front Regional Council
              </a>
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 17, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#environment-setup" id="toc-environment-setup" class="nav-link active" data-scroll-target="#environment-setup"><span class="header-section-number">1</span> Environment Setup</a>
  <ul class="collapse">
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries">Load Libraries</a></li>
  <li><a href="#set-base-year-for-calculations" id="toc-set-base-year-for-calculations" class="nav-link" data-scroll-target="#set-base-year-for-calculations">Set Base Year for Calculations</a></li>
  </ul></li>
  <li><a href="#read-raw-data" id="toc-read-raw-data" class="nav-link" data-scroll-target="#read-raw-data"><span class="header-section-number">2</span> Read Raw Data</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">3-11</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">3-12</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2">3-25</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3">4-12</a></li>
  <li><a href="#fuel-economy---combinedvehtype" id="toc-fuel-economy---combinedvehtype" class="nav-link" data-scroll-target="#fuel-economy---combinedvehtype">Fuel Economy - CombinedVehType</a></li>
  <li><a href="#fuel-economy---lightduty" id="toc-fuel-economy---lightduty" class="nav-link" data-scroll-target="#fuel-economy---lightduty">Fuel Economy - LightDuty</a></li>
  <li><a href="#personal-expenditure" id="toc-personal-expenditure" class="nav-link" data-scroll-target="#personal-expenditure">Personal Expenditure</a></li>
  <li><a href="#personal-consumption" id="toc-personal-consumption" class="nav-link" data-scroll-target="#personal-consumption">Personal Consumption</a></li>
  <li><a href="#consumer-price-index" id="toc-consumer-price-index" class="nav-link" data-scroll-target="#consumer-price-index">Consumer Price Index</a></li>
  <li><a href="#retail-diesel-prices" id="toc-retail-diesel-prices" class="nav-link" data-scroll-target="#retail-diesel-prices">Retail Diesel Prices</a></li>
  <li><a href="#retail-gas-prices" id="toc-retail-gas-prices" class="nav-link" data-scroll-target="#retail-gas-prices">Retail Gas Prices</a></li>
  <li><a href="#average-cost" id="toc-average-cost" class="nav-link" data-scroll-target="#average-cost">Average Cost</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4">4-11</a></li>
  <li><a href="#fuel-economy---medium" id="toc-fuel-economy---medium" class="nav-link" data-scroll-target="#fuel-economy---medium">Fuel Economy - Medium</a></li>
  <li><a href="#fuel-economy---heavy" id="toc-fuel-economy---heavy" class="nav-link" data-scroll-target="#fuel-economy---heavy">Fuel Economy - Heavy</a></li>
  <li><a href="#fuel-economy-by-size-class" id="toc-fuel-economy-by-size-class" class="nav-link" data-scroll-target="#fuel-economy-by-size-class">Fuel Economy by Size Class</a></li>
  <li><a href="#repair-and-maintenance-cost---heavy" id="toc-repair-and-maintenance-cost---heavy" class="nav-link" data-scroll-target="#repair-and-maintenance-cost---heavy">Repair and Maintenance Cost - Heavy</a></li>
  <li><a href="#driving-costs" id="toc-driving-costs" class="nav-link" data-scroll-target="#driving-costs">Driving Costs</a></li>
  </ul></li>
  <li><a href="#intermediate-cost-calculations" id="toc-intermediate-cost-calculations" class="nav-link" data-scroll-target="#intermediate-cost-calculations"><span class="header-section-number">3</span> Intermediate Cost Calculations</a>
  <ul class="collapse">
  <li><a href="#transportation-expenditures" id="toc-transportation-expenditures" class="nav-link" data-scroll-target="#transportation-expenditures">Transportation Expenditures</a></li>
  <li><a href="#auto-cost---variable-fixed" id="toc-auto-cost---variable-fixed" class="nav-link" data-scroll-target="#auto-cost---variable-fixed">Auto Cost - Variable-Fixed</a></li>
  <li><a href="#auto-cost" id="toc-auto-cost" class="nav-link" data-scroll-target="#auto-cost">Auto Cost</a></li>
  <li><a href="#vehicle-miles---trucks" id="toc-vehicle-miles---trucks" class="nav-link" data-scroll-target="#vehicle-miles---trucks">Vehicle Miles - Trucks</a></li>
  <li><a href="#fuel-economy" id="toc-fuel-economy" class="nav-link" data-scroll-target="#fuel-economy">Fuel Economy</a></li>
  <li><a href="#fuel-costs" id="toc-fuel-costs" class="nav-link" data-scroll-target="#fuel-costs">Fuel Costs</a></li>
  </ul></li>
  <li><a href="#auto-operating-costs" id="toc-auto-operating-costs" class="nav-link" data-scroll-target="#auto-operating-costs"><span class="header-section-number">4</span> Auto Operating Costs</a></li>
  <li><a href="#export" id="toc-export" class="nav-link" data-scroll-target="#export"><span class="header-section-number">5</span> Export</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">






<p>This document updates the <code>0 - Auto Operating Cost - 2022-01-11.qmd</code> to the new base year <code>2023</code>.</p>
<section id="environment-setup" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="environment-setup"><span class="header-section-number">1</span> Environment Setup</h2>
<section id="load-libraries" class="level3">
<h3 class="anchored" data-anchor-id="load-libraries">Load Libraries</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>conda install numpy pandas geopandas matplotlib seaborn scipy openpyxl python<span class="op">-</span>dotenv</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pdfplumber</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="ea4d9c90" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For Analysis</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># For Visualization</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.ticker <span class="im">import</span> FuncFormatter</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.interpolate <span class="im">import</span> make_interp_spline</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># misc</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdfplumber</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="set-base-year-for-calculations" class="level3">
<h3 class="anchored" data-anchor-id="set-base-year-for-calculations">Set Base Year for Calculations</h3>
<div id="f5790492" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>BASE_YEAR <span class="op">=</span> <span class="dv">2023</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">6</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>This analysis calculates auto operating costs for different vehicle classes using a base year of 2023. Operating costs represent the variable expenses incurred per mile of vehicle travel, primarily fuel and maintenance. These costs are critical inputs for travel demand models, which use them to predict how people make transportation choices based on the relative costs of driving.</p>
<p>The methodology combines data from multiple federal agencies. The Bureau of Transportation Statistics (BTS) provides historical data on fuel prices, vehicle expenditures, fleet characteristics, and average costs of vehicle ownership. The Energy Information Administration (EIA) supplies detailed regional fuel price data specific to the Rocky Mountain area, which includes Utah and neighboring states. The Bureau of Labor Statistics (BLS) provides the Consumer Price Index, allowing us to adjust historical costs for inflation. The American Automobile Association (AAA) publishes annual driving cost surveys that break down expenses into variable and fixed components. Finally, the Oak Ridge National Laboratory maintains the Transportation Energy Data Book with detailed fuel economy statistics by vehicle size class.</p>
<p>By synthesizing these diverse data sources, we can identify long-term trends, compare actual costs against historical patterns, and produce defensible estimates for current-year operating costs across four vehicle classes: automobiles (passenger cars), light-duty trucks (pickups and SUVs), medium-duty trucks (single-unit delivery trucks), and heavy-duty trucks (tractor-trailers).</p>
</section>
</section>
<section id="read-raw-data" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="read-raw-data"><span class="header-section-number">2</span> Read Raw Data</h2>
<p>The data collection process is designed for reproducibility and transparency. Each dataset is automatically downloaded from its authoritative source and cached locally in the <code>data/</code> directory. The code checks whether files already exist before attempting downloads, which speeds up subsequent runs and reduces load on source servers.</p>
<p>For each dataset, the code specifies the exact file location, sheet name (for Excel files), header row, columns to read, and number of rows to process. This explicit specification ensures that anyone running this analysis will extract identical data. Comments in the code indicate which columns may need updating as new data becomes available in future years.</p>
<p>Some datasets require special handling. The Consumer Price Index data is fetched via the BLS API, which requires a free API key stored in a <code>.env</code> file. The AAA driving costs data is extracted from a PDF using the <code>pdfplumber</code> library, which parses table structures from the formatted document. Column names containing year information are cleaned and standardized using regular expressions to ensure consistent formatting.</p>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section">3-11</h3>
<p>Table 3-11 provides historical fuel prices to end-users from 1970 through the most recent year available. This dataset includes separate price series for gasoline, diesel, and other fuel types across all states. While we primarily rely on EIA data for detailed regional pricing, this BTS table provides context for long-term national trends.</p>
<p>Table 3-11: Sales Price of Transportation Fuel to End-Users [Source: <a href="https://www.bts.gov/content/sales-price-transportation-fuel-end-users-current-cents-gallon">Bureau of Transportation Statistics</a>]</p>
<div id="f3d29837" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>filepath_3_11 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_11_032824.xlsx"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_11.exists():</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_11.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2024-03/table_03_11_032824.xlsx"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_11.write_bytes(response.content)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>df_3_11 <span class="op">=</span> pd.read_excel(</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_11,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-11"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AK"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">10</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>df_3_11</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1">3-12</h3>
<p>Table 3-12 tracks how gasoline prices have changed relative to other consumer goods and services. This relative price index reveals whether fuel costs are rising faster or slower than general inflation. When gasoline prices rise faster than overall inflation, transportation becomes relatively more expensive, potentially shifting travel behavior toward more efficient modes or shorter trips.</p>
<p>Table 3-12: Price Trends of Gasoline v. Other Consumer Goods and Services [Source: <a href="https://www.bts.gov/content/price-trends-gasoline-v-other-consumer-goods-and-services">Bureau of Transportation Statistics</a>]</p>
<div id="24692dce" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>filepath_3_12 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_12_032824_1.xlsx"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_12.exists():</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_12.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2024-03/table_03_12_032824_1.xlsx"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_12.write_bytes(response.content)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>df_3_12 <span class="op">=</span> pd.read_excel(</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_12,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-12"</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">15</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>df_3_12</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2">3-25</h3>
<p>Table 3-25 shows average wages in transportation industries, which provides economic context for understanding how transportation costs relate to household incomes. While not directly used in operating cost calculations, this data helps validate that our cost estimates are reasonable relative to what workers in the transportation sector earn.</p>
<p>Table 3-25: Average Wage and Salary Accruals per Full-Time Equivalent Employee by Transportation Industry [Source: <a href="https://www.bts.gov/content/average-wage-and-salary-accruals-full-time-equivalent-employee-transportation-industry-naics">Bureau of Transportation Statistics</a>]</p>
<div id="0b75144b" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>filepath_3_25 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_25_102122.xlsx"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_25.exists():</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_25.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2022-10/table_03_25_102122.xlsx"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_25.write_bytes(response.content)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>df_3_25 <span class="op">=</span> pd.read_excel(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_25,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-25"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:Y"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">10</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>df_3_25</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3">4-12</h3>
<p>Table 4-12 details fuel consumption and vehicle miles traveled for light-duty vehicles with long wheelbasesâ€”primarily SUVs, vans, and pickup trucks. This category represents a significant and growing share of the passenger vehicle fleet. The table reports both fuel consumed (in millions of gallons) and miles traveled (in billions), which together yield fuel economy in miles per gallon.</p>
<p>Table 4-12: Light Duty Vehicle, Long Wheel Base Fuel Consumption and Travel [Source: <a href="https://www.bts.gov/content/other-2-axle-4-tire-vehicle-fuel-consumption-and-travel-0">Bureau of Transportation Statistics</a>]</p>
<div id="e191063a" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>filepath_4_12 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_12M_032725.xlsx"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_12.exists():</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_12.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_12M_032725.xlsx"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    filepath_4_12.write_bytes(response.content)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>df_4_12 <span class="op">=</span> pd.read_excel(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  filepath_4_12,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-12M"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>df_4_12</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="fuel-economy---combinedvehtype" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy---combinedvehtype">Fuel Economy - CombinedVehType</h3>
<p>Table 4-9 aggregates fuel consumption and travel across all motor vehicle types. This provides a fleet-wide perspective on average fuel economy and helps ensure that our vehicle-class-specific estimates align with national totals. The combined data includes passenger cars, light trucks, buses, and heavy trucks.</p>
<p>Table 4-9: Motor Vehicle Fuel Consumption and Travel [Source: <a href="https://www.bts.gov/content/motor-vehicle-fuel-consumption-and-travel">Bureau of Transportation Statistics</a>]</p>
<div id="a0f89319" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>filepath_4_9 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_09_032825.xlsx"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_9.exists():</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_9.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_09_032825.xlsx"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    filepath_4_9.write_bytes(response.content)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>df_FE_CombinedVehType <span class="op">=</span> pd.read_excel(</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  filepath_4_9,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-9"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AO"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>df_FE_CombinedVehType</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="fuel-economy---lightduty" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy---lightduty">Fuel Economy - LightDuty</h3>
<p>Table 4-23 focuses specifically on light-duty vehicles (passenger cars and light trucks under 8,500 pounds). This is the most detailed fuel economy dataset for the vehicles that comprise the majority of personal travel. The table separates passenger cars from light trucks and tracks how fuel economy has improved over time due to Corporate Average Fuel Economy (CAFE) standards and technological improvements in engines, transmissions, and vehicle design.</p>
<p>Table 4-23: Average Fuel Efficiency of U.S. Light Duty Vehicles [Source: <a href="https://www.bts.gov/content/average-fuel-efficiency-us-light-duty-vehicles">Bureau of Transportation Statistics</a>]</p>
<div id="42e055fb" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>filepath_4_23 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_23_042425.xlsx"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_23.exists():</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_23.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-04/table_04_23_042425.xlsx"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">=</span>{<span class="st">"User-Agent"</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'</span>}</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    filepath_4_23.write_bytes(response.content)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty <span class="op">=</span> pd.read_excel(</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  filepath_4_23,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-23"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AK"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">12</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">1980</th>
<th data-quarto-table-cell-role="th">1985</th>
<th data-quarto-table-cell-role="th">1990</th>
<th data-quarto-table-cell-role="th">1991</th>
<th data-quarto-table-cell-role="th">1992</th>
<th data-quarto-table-cell-role="th">1993</th>
<th data-quarto-table-cell-role="th">1994</th>
<th data-quarto-table-cell-role="th">1995</th>
<th data-quarto-table-cell-role="th">1996</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2014</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Average U.S. light duty vehicle fuel efficienc...</td>
<td>14.9</td>
<td>16.500000</td>
<td>18.800000</td>
<td>19.500000</td>
<td>19.500000</td>
<td>19.200000</td>
<td>19.391913</td>
<td>19.602243</td>
<td>19.691458</td>
<td>...</td>
<td>21.402991</td>
<td>21.979313</td>
<td>22.038465</td>
<td>22.274363</td>
<td>22.497301</td>
<td>22.243634</td>
<td>22.980009</td>
<td>22.366546</td>
<td>22.767227</td>
<td>22.584552</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Light duty vehicle, short wheel basea,b</td>
<td>15.983485</td>
<td>17.515866</td>
<td>20.324466</td>
<td>21.199052</td>
<td>21.045126</td>
<td>20.590441</td>
<td>22.237518</td>
<td>21.128875</td>
<td>21.319621</td>
<td>...</td>
<td>23.203282</td>
<td>23.856606</td>
<td>23.956898</td>
<td>24.214896</td>
<td>24.377132</td>
<td>24.129357</td>
<td>25.281499</td>
<td>24.428229</td>
<td>24.846588</td>
<td>24.658813</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Light duty vehicle, long wheel basea</td>
<td>12.226114</td>
<td>14.287840</td>
<td>16.134621</td>
<td>16.992323</td>
<td>17.270285</td>
<td>17.403241</td>
<td>15.066998</td>
<td>17.323486</td>
<td>17.311470</td>
<td>...</td>
<td>17.097833</td>
<td>17.340800</td>
<td>17.397560</td>
<td>17.524273</td>
<td>17.867885</td>
<td>17.611064</td>
<td>18.010017</td>
<td>17.797627</td>
<td>18.051541</td>
<td>17.936341</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>New vehicle fuel efficiency (mpg)c (model year)</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Light-duty vehicle</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>Passenger car</td>
<td>24.3</td>
<td>27.600000</td>
<td>28.000000</td>
<td>28.400000</td>
<td>27.900000</td>
<td>28.400000</td>
<td>28.300000</td>
<td>28.600000</td>
<td>28.500000</td>
<td>...</td>
<td>36.537392</td>
<td>37.243195</td>
<td>37.658306</td>
<td>39.445839</td>
<td>40.775846</td>
<td>40.796910</td>
<td>42.286674</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>Domestic</td>
<td>22.6</td>
<td>26.300000</td>
<td>26.900000</td>
<td>27.300000</td>
<td>27.000000</td>
<td>27.800000</td>
<td>27.500000</td>
<td>27.700000</td>
<td>28.100000</td>
<td>...</td>
<td>36.300000</td>
<td>37.200000</td>
<td>37.300000</td>
<td>39.300000</td>
<td>41.900000</td>
<td>41.200000</td>
<td>43.400000</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>Imported</td>
<td>29.6</td>
<td>31.500000</td>
<td>29.900000</td>
<td>30.100000</td>
<td>29.200000</td>
<td>29.600000</td>
<td>29.700000</td>
<td>30.300000</td>
<td>29.600000</td>
<td>...</td>
<td>36.900000</td>
<td>37.300000</td>
<td>38.100000</td>
<td>39.600000</td>
<td>39.800000</td>
<td>40.400000</td>
<td>41.200000</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>Light truck (&lt;8,500 lbs GVWR)d</td>
<td>18.5</td>
<td>20.700000</td>
<td>20.800000</td>
<td>21.300000</td>
<td>20.800000</td>
<td>21.000000</td>
<td>20.800000</td>
<td>20.500000</td>
<td>20.800000</td>
<td>...</td>
<td>26.500000</td>
<td>27.300000</td>
<td>27.400000</td>
<td>28.700000</td>
<td>29.500000</td>
<td>29.600000</td>
<td>30.400000</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>CAFE standards (mpg)c (model year)</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>Passenger car</td>
<td>20</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>27.500000</td>
<td>...</td>
<td>34.237392</td>
<td>35.459170</td>
<td>36.903095</td>
<td>38.986130</td>
<td>40.228249</td>
<td>41.703090</td>
<td>43.307269</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>Light trucke</td>
<td>U</td>
<td>19.500000</td>
<td>20.000000</td>
<td>20.200000</td>
<td>20.200000</td>
<td>20.400000</td>
<td>20.500000</td>
<td>20.600000</td>
<td>20.700000</td>
<td>...</td>
<td>26.300000</td>
<td>27.600000</td>
<td>28.800000</td>
<td>29.400000</td>
<td>30.000000</td>
<td>30.400000</td>
<td>31.000000</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
</tbody>
</table>

<p>12 rows Ã— 37 columns</p>
</div>
</div>
</div>
</section>
<section id="personal-expenditure" class="level3">
<h3 class="anchored" data-anchor-id="personal-expenditure">Personal Expenditure</h3>
<p>Table 3-15 shows total personal consumption expenditures across all categories: housing, healthcare, food, transportation, and others. Transportation typically represents 15-20% of household budgets. By tracking transportationâ€™s share over time, we can assess whether our operating cost estimates produce results consistent with observed household spending patterns. The column names are cleaned to extract just the year, removing formatting artifacts like â€œ(R)â€ revision markers.</p>
<p>Table 3-15: Personal Expenditures by Category (Millions of current dollars) [Source: <a href="https://www.bts.gov/content/personal-expenditures-category-millions-current-dollars">Bureau of Transportation Statistics</a>]</p>
<div id="52d78206" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>filepath_3_15 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_15_022525.xlsx"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_15.exists():</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_15.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-02/table_03_15_022525.xlsx"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_15.write_bytes(response.content)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure <span class="op">=</span> pd.read_excel(</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_15,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-15"</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AP"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">17</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract years from column names, handling formats like "(R) 2019"</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure.columns <span class="op">=</span> [</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span>(<span class="bu">int</span>(match.group())) <span class="cf">if</span> (match <span class="op">:=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="vs">19</span><span class="cf">|</span><span class="vs">20</span><span class="kw">)</span><span class="dv">\d</span><span class="op">{2}</span><span class="dv">\b</span><span class="vs">'</span>, <span class="bu">str</span>(col))) <span class="cf">else</span> col</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df_PersonalExpenditure.columns</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="personal-consumption" class="level3">
<h3 class="anchored" data-anchor-id="personal-consumption">Personal Consumption</h3>
<p>Table 3-16 breaks down transportation expenditures into subcategories: vehicle purchases, gasoline and oil, maintenance and repairs, insurance, and public transportation. This detailed breakdown allows us to isolate the specific cost components weâ€™re estimating and compare our calculations against actual household expenditure data reported in national accounts.</p>
<p>Table 3-16: Personal Consumption Expenditures on Transportation by Subcategory (Millions of current dollars) [Source: <a href="https://www.bts.gov/content/personal-consumption-expenditures-transportation-subcategory-millions-current-dollars">Bureau of Transportation Statistics</a>]</p>
<div id="f4d9cdfa" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>filepath_3_16 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_16_022525.xlsx"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_16.exists():</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_16.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-02/table_03_16_022525.xlsx"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_16.write_bytes(response.content)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>df_PersonalConsumption <span class="op">=</span> pd.read_excel(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_16,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-16"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AP"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">17</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>df_PersonalConsumption</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="consumer-price-index" class="level3">
<h3 class="anchored" data-anchor-id="consumer-price-index">Consumer Price Index</h3>
<p>The Consumer Price Index (CPI-U) measures the average change in prices paid by urban consumers for a basket of goods and services. The BLS API provides monthly CPI values from 1913 to the present. We calculate annual averages and year-over-year percent changes to track inflation. The CPI serves multiple purposes in this analysis: adjusting historical costs to constant dollars, comparing how auto costs change relative to general inflation, and normalizing costs across different time periods. The API requires a free registration key, which should be stored in a <code>.env</code> file to keep it secure and separate from the code.</p>
<p>Data Source: Consumer Price Index for All Urban Consumers (CPI-U) [Source: <a href="https://data.bls.gov/pdq/SurveyOutputServlet">Bureau of Labor Statistics</a>]</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Get your BLS Public API key from <a href="https://data.bls.gov/registrationEngine/">here</a>.</p>
<p>Create a <code>.env</code> file in the root directory and add your BLS API key: <code>BLS_PUBLIC_API=your-key-here</code> This enables fetching Consumer Price Index data from the BLS API.</p>
</div>
</div>
<div id="dd2a00fb" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>True</code></pre>
</div>
</div>
<div id="aed65102" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>filepath_cpi <span class="op">=</span> Path(<span class="st">"data/bls/cpi_1913_present.xlsx"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_cpi.exists():</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    filepath_cpi.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    api_url <span class="op">=</span> <span class="st">"https://api.bls.gov/publicAPI/v2/timeseries/data/"</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    current_year <span class="op">=</span> pd.Timestamp.now().year</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    all_data <span class="op">=</span> []</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> start_year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1913</span>, current_year <span class="op">+</span> <span class="dv">1</span>, <span class="dv">20</span>):</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">min</span>(start_year <span class="op">+</span> <span class="dv">19</span>, current_year)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        payload <span class="op">=</span> {</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"seriesid"</span>: [<span class="st">"CUUR0000SA0"</span>],</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"startyear"</span>: <span class="bu">str</span>(start_year),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"endyear"</span>: <span class="bu">str</span>(end_year),</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"catalog"</span>: <span class="va">False</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"calculations"</span>: <span class="va">False</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"annualaverage"</span>: <span class="va">False</span>,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"registrationkey"</span>: os.getenv(<span class="st">'BLS_PUBLIC_API'</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.post(api_url, json<span class="op">=</span>payload, headers<span class="op">=</span>{<span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>})</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> response.json()[<span class="st">'Results'</span>][<span class="st">'series'</span>][<span class="dv">0</span>][<span class="st">'data'</span>]:</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> item[<span class="st">'period'</span>].startswith(<span class="st">'M'</span>) <span class="kw">and</span> item[<span class="st">'period'</span>] <span class="op">!=</span> <span class="st">'M13'</span>:</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>                all_data.append({</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'year'</span>: <span class="bu">int</span>(item[<span class="st">'year'</span>]),</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'period'</span>: item[<span class="st">'period'</span>],</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'value'</span>: <span class="bu">float</span>(item[<span class="st">'value'</span>])</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>                })</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    df_pivot <span class="op">=</span> pd.DataFrame(all_data).pivot(index<span class="op">=</span><span class="st">'year'</span>, columns<span class="op">=</span><span class="st">'period'</span>, values<span class="op">=</span><span class="st">'value'</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    df_pivot <span class="op">=</span> df_pivot[[<span class="ss">f'M</span><span class="sc">{</span>i<span class="sc">:02d}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>)]].sort_index()</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pd.ExcelWriter(filepath_cpi, engine<span class="op">=</span><span class="st">'openpyxl'</span>) <span class="im">as</span> writer:</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>        df_pivot.to_excel(writer, sheet_name<span class="op">=</span><span class="st">'BLS Data Series'</span>)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>df_CPI <span class="op">=</span> pd.read_excel(</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>  filepath_cpi, <span class="co"># File path</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"BLS Data Series"</span>,</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:M"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate annual average</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'annualaverage'</span>] <span class="op">=</span> df_CPI[[<span class="ss">f'M</span><span class="sc">{</span>i<span class="sc">:02d}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>)]].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 12-month percent change for December</span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'pct_change_Dec'</span>] <span class="op">=</span> df_CPI[<span class="st">'M12'</span>].pct_change(periods<span class="op">=</span><span class="dv">1</span>, fill_method<span class="op">=</span><span class="va">None</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 12-month percent change for annual average</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'pct_change_Avg'</span>] <span class="op">=</span> df_CPI[<span class="st">'annualaverage'</span>].pct_change(periods<span class="op">=</span><span class="dv">1</span>, fill_method<span class="op">=</span><span class="va">None</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a>df_CPI</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">M01</th>
<th data-quarto-table-cell-role="th">M02</th>
<th data-quarto-table-cell-role="th">M03</th>
<th data-quarto-table-cell-role="th">M04</th>
<th data-quarto-table-cell-role="th">M05</th>
<th data-quarto-table-cell-role="th">M06</th>
<th data-quarto-table-cell-role="th">M07</th>
<th data-quarto-table-cell-role="th">M08</th>
<th data-quarto-table-cell-role="th">M09</th>
<th data-quarto-table-cell-role="th">M10</th>
<th data-quarto-table-cell-role="th">M11</th>
<th data-quarto-table-cell-role="th">M12</th>
<th data-quarto-table-cell-role="th">annualaverage</th>
<th data-quarto-table-cell-role="th">pct_change_Dec</th>
<th data-quarto-table-cell-role="th">pct_change_Avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1913</td>
<td>9.800</td>
<td>9.800</td>
<td>9.800</td>
<td>9.800</td>
<td>9.700</td>
<td>9.800</td>
<td>9.900</td>
<td>9.900</td>
<td>10.000</td>
<td>10.000</td>
<td>10.100</td>
<td>10.000</td>
<td>9.883333</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1914</td>
<td>10.000</td>
<td>9.900</td>
<td>9.900</td>
<td>9.800</td>
<td>9.900</td>
<td>9.900</td>
<td>10.000</td>
<td>10.200</td>
<td>10.200</td>
<td>10.100</td>
<td>10.200</td>
<td>10.100</td>
<td>10.016667</td>
<td>1.000000</td>
<td>1.349073</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1915</td>
<td>10.100</td>
<td>10.000</td>
<td>9.900</td>
<td>10.000</td>
<td>10.100</td>
<td>10.100</td>
<td>10.100</td>
<td>10.100</td>
<td>10.100</td>
<td>10.200</td>
<td>10.300</td>
<td>10.300</td>
<td>10.108333</td>
<td>1.980198</td>
<td>0.915141</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1916</td>
<td>10.400</td>
<td>10.400</td>
<td>10.500</td>
<td>10.600</td>
<td>10.700</td>
<td>10.800</td>
<td>10.800</td>
<td>10.900</td>
<td>11.100</td>
<td>11.300</td>
<td>11.500</td>
<td>11.600</td>
<td>10.883333</td>
<td>12.621359</td>
<td>7.666941</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1917</td>
<td>11.700</td>
<td>12.000</td>
<td>12.000</td>
<td>12.600</td>
<td>12.800</td>
<td>13.000</td>
<td>12.800</td>
<td>13.000</td>
<td>13.300</td>
<td>13.500</td>
<td>13.500</td>
<td>13.700</td>
<td>12.825000</td>
<td>18.103448</td>
<td>17.840735</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">108</th>
<td>2021</td>
<td>261.582</td>
<td>263.014</td>
<td>264.877</td>
<td>267.054</td>
<td>269.195</td>
<td>271.696</td>
<td>273.003</td>
<td>273.567</td>
<td>274.310</td>
<td>276.589</td>
<td>277.948</td>
<td>278.802</td>
<td>270.969750</td>
<td>7.036403</td>
<td>4.697859</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">109</th>
<td>2022</td>
<td>281.148</td>
<td>283.716</td>
<td>287.504</td>
<td>289.109</td>
<td>292.296</td>
<td>296.311</td>
<td>296.276</td>
<td>296.171</td>
<td>296.808</td>
<td>298.012</td>
<td>297.711</td>
<td>296.797</td>
<td>292.654917</td>
<td>6.454401</td>
<td>8.002800</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">110</th>
<td>2023</td>
<td>299.170</td>
<td>300.840</td>
<td>301.836</td>
<td>303.363</td>
<td>304.127</td>
<td>305.109</td>
<td>305.691</td>
<td>307.026</td>
<td>307.789</td>
<td>307.671</td>
<td>307.051</td>
<td>306.746</td>
<td>304.701583</td>
<td>3.352123</td>
<td>4.116338</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">111</th>
<td>2024</td>
<td>308.417</td>
<td>310.326</td>
<td>312.332</td>
<td>313.548</td>
<td>314.069</td>
<td>314.175</td>
<td>314.540</td>
<td>314.796</td>
<td>315.301</td>
<td>315.664</td>
<td>315.493</td>
<td>315.605</td>
<td>313.688833</td>
<td>2.888057</td>
<td>2.949525</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">112</th>
<td>2025</td>
<td>317.671</td>
<td>319.082</td>
<td>319.799</td>
<td>320.795</td>
<td>321.465</td>
<td>322.561</td>
<td>323.048</td>
<td>323.976</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>321.049625</td>
<td>NaN</td>
<td>2.346527</td>
</tr>
</tbody>
</table>

<p>113 rows Ã— 16 columns</p>
</div>
</div>
</div>
</section>
<section id="retail-diesel-prices" class="level3">
<h3 class="anchored" data-anchor-id="retail-diesel-prices">Retail Diesel Prices</h3>
<p>The EIA publishes weekly retail diesel prices by region. Diesel fuel powers medium-duty and heavy-duty trucks, so accurate diesel pricing is essential for calculating operating costs for freight vehicles. The Rocky Mountain region pricing reflects conditions in Utah, Colorado, Wyoming, Montana, and Idaho. Diesel prices typically run 10-20% higher than gasoline due to higher refining costs and federal excise tax rates, though the spread varies with crude oil prices and refinery economics.</p>
<p>Retail Prices for Diesel (On-Highway) - All Types [Source: <a href="http://www.eia.gov/dnav/pet/pet_pri_gnd_a_epd2d_pte_dpgal_w.htm">Energy Information Administration</a>]</p>
<div id="34d42121" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>filepath_retaildiesel <span class="op">=</span> Path(<span class="st">"data/eia/PET_PRI_GND_A_EPD2D_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_retaildiesel.exists():</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    filepath_retaildiesel.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.eia.gov/dnav/pet/xls/PET_PRI_GND_A_EPD2D_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    filepath_retaildiesel.write_bytes(response.content)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>df_RetailDieselPrices <span class="op">=</span> pd.read_excel(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  filepath_retaildiesel, <span class="co"># File path</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"Data 2"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:J"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>df_RetailDieselPrices</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Weekly East Coast No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly New England (PADD 1A) No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Central Atlantic (PADD 1B) No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Lower Atlantic (PADD 1C) No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Midwest No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Gulf Coast No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Rocky Mountain No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly West Coast No 2 Diesel Retail Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly West Coast (PADD 5) Except California No 2 Diesel Retail Prices (Dollars per Gallon)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1994-03-21</td>
<td>1.119</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.087</td>
<td>1.065</td>
<td>1.105</td>
<td>1.209</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1994-03-28</td>
<td>1.115</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.089</td>
<td>1.064</td>
<td>1.100</td>
<td>1.220</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1994-04-04</td>
<td>1.122</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.087</td>
<td>1.069</td>
<td>1.103</td>
<td>1.219</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1994-04-11</td>
<td>1.119</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.090</td>
<td>1.066</td>
<td>1.111</td>
<td>1.209</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1994-04-18</td>
<td>1.115</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.086</td>
<td>1.058</td>
<td>1.118</td>
<td>1.213</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1641</th>
<td>2025-09-01</td>
<td>3.750</td>
<td>3.948</td>
<td>3.912</td>
<td>3.669</td>
<td>3.722</td>
<td>3.367</td>
<td>3.753</td>
<td>4.484</td>
<td>4.112</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1642</th>
<td>2025-09-08</td>
<td>3.772</td>
<td>3.955</td>
<td>3.937</td>
<td>3.693</td>
<td>3.754</td>
<td>3.404</td>
<td>3.754</td>
<td>4.533</td>
<td>4.163</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1643</th>
<td>2025-09-15</td>
<td>3.748</td>
<td>3.961</td>
<td>3.920</td>
<td>3.663</td>
<td>3.710</td>
<td>3.389</td>
<td>3.722</td>
<td>4.523</td>
<td>4.134</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1644</th>
<td>2025-09-22</td>
<td>3.745</td>
<td>3.962</td>
<td>3.908</td>
<td>3.664</td>
<td>3.731</td>
<td>3.400</td>
<td>3.747</td>
<td>4.524</td>
<td>4.123</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1645</th>
<td>2025-09-29</td>
<td>3.750</td>
<td>3.962</td>
<td>3.902</td>
<td>3.673</td>
<td>3.731</td>
<td>3.413</td>
<td>3.732</td>
<td>4.532</td>
<td>4.143</td>
</tr>
</tbody>
</table>

<p>1646 rows Ã— 10 columns</p>
</div>
</div>
</div>
</section>
<section id="retail-gas-prices" class="level3">
<h3 class="anchored" data-anchor-id="retail-gas-prices">Retail Gas Prices</h3>
<p>Similar to diesel prices, the EIA provides weekly retail gasoline prices for all grades (regular, midgrade, premium) by region. Most light-duty vehicles use regular gasoline, though some require premium. The â€œall gradesâ€ series provides a weighted average that reflects actual consumer purchasing patterns. Weekly data captures seasonal price fluctuationsâ€”prices typically rise in summer due to higher driving demand and the switch to more expensive summer-blend fuel formulations required for air quality.</p>
<p>Retail Prices for Gasoline, All Grades [Source: <a href="https://www.eia.gov/dnav/pet/pet_pri_gnd_a_epm0_pte_dpgal_w.htm">Energy Information Administration</a>]</p>
<div id="86aaf046" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>filepath_retailgas <span class="op">=</span> Path(<span class="st">"data/eia/PET_PRI_GND_A_EPM0_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_retailgas.exists():</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    filepath_retailgas.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.eia.gov/dnav/pet/xls/PET_PRI_GND_A_EPM0_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    filepath_retailgas.write_bytes(response.content)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>df_RetailGasPrices <span class="op">=</span> pd.read_excel(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  filepath_retailgas, <span class="co"># File path</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"Data 2"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:J"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>df_RetailGasPrices</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Weekly East Coast All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly New England (PADD 1A) All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Central Atlantic (PADD 1B) All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Lower Atlantic (PADD 1C) All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Midwest All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Gulf Coast All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly Rocky Mountain All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly West Coast All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
<th data-quarto-table-cell-role="th">Weekly West Coast (PADD 5) Except California All Grades All Formulations Retail Gasoline Prices (Dollars per Gallon)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1993-04-05</td>
<td>1.040</td>
<td>1.068</td>
<td>1.068</td>
<td>1.023</td>
<td>1.061</td>
<td>1.064</td>
<td>1.093</td>
<td>1.152</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1993-04-12</td>
<td>1.047</td>
<td>1.073</td>
<td>1.072</td>
<td>1.032</td>
<td>1.077</td>
<td>1.071</td>
<td>1.118</td>
<td>1.154</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1993-04-19</td>
<td>1.054</td>
<td>1.074</td>
<td>1.077</td>
<td>1.040</td>
<td>1.067</td>
<td>1.081</td>
<td>1.120</td>
<td>1.155</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1993-04-26</td>
<td>1.059</td>
<td>1.076</td>
<td>1.080</td>
<td>1.046</td>
<td>1.078</td>
<td>1.081</td>
<td>1.169</td>
<td>1.157</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1993-05-03</td>
<td>1.062</td>
<td>1.080</td>
<td>1.084</td>
<td>1.050</td>
<td>1.073</td>
<td>1.084</td>
<td>1.161</td>
<td>1.161</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1691</th>
<td>2025-09-01</td>
<td>3.126</td>
<td>3.204</td>
<td>3.266</td>
<td>3.017</td>
<td>3.174</td>
<td>2.863</td>
<td>3.308</td>
<td>4.277</td>
<td>3.983</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1692</th>
<td>2025-09-08</td>
<td>3.175</td>
<td>3.243</td>
<td>3.340</td>
<td>3.054</td>
<td>3.140</td>
<td>2.830</td>
<td>3.369</td>
<td>4.322</td>
<td>4.051</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1693</th>
<td>2025-09-15</td>
<td>3.131</td>
<td>3.229</td>
<td>3.303</td>
<td>2.996</td>
<td>3.065</td>
<td>2.873</td>
<td>3.305</td>
<td>4.395</td>
<td>4.166</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1694</th>
<td>2025-09-22</td>
<td>3.143</td>
<td>3.207</td>
<td>3.301</td>
<td>3.027</td>
<td>3.093</td>
<td>2.814</td>
<td>3.313</td>
<td>4.394</td>
<td>4.162</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1695</th>
<td>2025-09-29</td>
<td>3.097</td>
<td>3.169</td>
<td>3.262</td>
<td>2.973</td>
<td>3.013</td>
<td>2.770</td>
<td>3.239</td>
<td>4.363</td>
<td>4.118</td>
</tr>
</tbody>
</table>

<p>1696 rows Ã— 10 columns</p>
</div>
</div>
</div>
</section>
<section id="average-cost" class="level3">
<h3 class="anchored" data-anchor-id="average-cost">Average Cost</h3>
<p>Table 3-17 reports the average cost of owning and operating an automobile assuming 15,000 miles of annual driving. AAA compiles this data annually through surveys and manufacturer specifications. The costs are broken into variable expenses (fuel, maintenance, tires) that increase with miles driven, and fixed expenses (insurance, license/registration/taxes, depreciation, finance charges) that remain relatively constant regardless of mileage. This decomposition is critical because travel demand models respond primarily to variable costsâ€”travelers notice the cost of each additional mile driven, but fixed costs are sunk regardless of how much they drive.</p>
<p>Table 3-17: Average Cost of Owning and Operating an Automobilea (Assuming 15,000 Vehicle-Miles per Year) [Source: <a href="https://www.bts.gov/content/average-cost-owning-and-operating-automobilea-assuming-15000-vehicle-miles-year">Bureau of Transportation Statistics</a>]</p>
<div id="445637af" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>filepath_3_17 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_17_032725.xlsx"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_17.exists():</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    filepath_3_17.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_03_17_032725.xlsx"</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    filepath_3_17.write_bytes(response.content)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>df_AverageCost <span class="op">=</span> pd.read_excel(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  filepath_3_17,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-17"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">8</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>df_AverageCost.columns <span class="op">=</span> [</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span>(<span class="bu">int</span>(match.group())) <span class="cf">if</span> (match <span class="op">:=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="vs">19</span><span class="cf">|</span><span class="vs">20</span><span class="kw">)</span><span class="dv">\d</span><span class="op">{2}</span><span class="dv">\b</span><span class="vs">'</span>, <span class="bu">str</span>(col))) <span class="cf">else</span> col</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df_AverageCost.columns</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>df_AverageCost</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">1975</th>
<th data-quarto-table-cell-role="th">1980</th>
<th data-quarto-table-cell-role="th">1985</th>
<th data-quarto-table-cell-role="th">1990</th>
<th data-quarto-table-cell-role="th">1991</th>
<th data-quarto-table-cell-role="th">1992</th>
<th data-quarto-table-cell-role="th">1993</th>
<th data-quarto-table-cell-role="th">1994</th>
<th data-quarto-table-cell-role="th">1995</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
<th data-quarto-table-cell-role="th">2024</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Average total cost per mile (current cents)</td>
<td>14.360000</td>
<td>21.173333</td>
<td>23.226667</td>
<td>33.026667</td>
<td>37.340000</td>
<td>38.826667</td>
<td>38.693333</td>
<td>39.440000</td>
<td>41.233333</td>
<td>...</td>
<td>57.986667</td>
<td>57.053333</td>
<td>56.453333</td>
<td>58.993333</td>
<td>61.88</td>
<td>63.74</td>
<td>64.44</td>
<td>71.526667</td>
<td>81.213333</td>
<td>81.973333</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Gasb</td>
<td>4.800000</td>
<td>5.900000</td>
<td>5.570000</td>
<td>5.400000</td>
<td>6.600000</td>
<td>5.900000</td>
<td>5.900000</td>
<td>5.600000</td>
<td>5.800000</td>
<td>...</td>
<td>11.210000</td>
<td>8.450000</td>
<td>10.26</td>
<td>11.05</td>
<td>11.6</td>
<td>10.66</td>
<td>10.72</td>
<td>17.99</td>
<td>15.93</td>
<td>14.9</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Gas as a percent of total costb</td>
<td>33.426184</td>
<td>27.865239</td>
<td>23.981056</td>
<td>16.350424</td>
<td>17.675415</td>
<td>15.195742</td>
<td>15.248105</td>
<td>14.198783</td>
<td>14.066289</td>
<td>...</td>
<td>19.332030</td>
<td>14.810703</td>
<td>18.174303</td>
<td>18.73093</td>
<td>18.74596</td>
<td>16.724192</td>
<td>16.63563</td>
<td>25.151459</td>
<td>19.615006</td>
<td>18.176643</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Maintenancec</td>
<td>0.970000</td>
<td>1.120000</td>
<td>1.200000</td>
<td>2.100000</td>
<td>2.200000</td>
<td>2.200000</td>
<td>2.400000</td>
<td>2.500000</td>
<td>2.600000</td>
<td>...</td>
<td>5.110000</td>
<td>5.280000</td>
<td>7.91</td>
<td>8.21</td>
<td>8.94</td>
<td>9.12</td>
<td>9.55</td>
<td>9.68</td>
<td>9.83</td>
<td>10.13</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Tires</td>
<td>0.660000</td>
<td>0.640000</td>
<td>0.650000</td>
<td>0.900000</td>
<td>0.900000</td>
<td>0.900000</td>
<td>0.900000</td>
<td>1.000000</td>
<td>1.200000</td>
<td>...</td>
<td>0.980000</td>
<td>1.000000</td>
<td>U</td>
<td>U</td>
<td>U</td>
<td>U</td>
<td>U</td>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>Average total cost per 15,000 miles (current d...</td>
<td>2154.000000</td>
<td>3176.000000</td>
<td>3484.000000</td>
<td>4954.000000</td>
<td>5601.000000</td>
<td>5824.000000</td>
<td>5804.000000</td>
<td>5916.000000</td>
<td>6185.000000</td>
<td>...</td>
<td>8698.000000</td>
<td>8558.000000</td>
<td>8468</td>
<td>8849</td>
<td>9282</td>
<td>9561</td>
<td>9666</td>
<td>10729</td>
<td>12182</td>
<td>12296</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>Variable costd</td>
<td>968.000000</td>
<td>1143.000000</td>
<td>1113.000000</td>
<td>1260.000000</td>
<td>1455.000000</td>
<td>1350.000000</td>
<td>1380.000000</td>
<td>1365.000000</td>
<td>1440.000000</td>
<td>...</td>
<td>2596.000000</td>
<td>2208.000000</td>
<td>2726</td>
<td>2889</td>
<td>3081</td>
<td>2968</td>
<td>3042</td>
<td>4151</td>
<td>3864</td>
<td>3755</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>Fixed coste</td>
<td>1186.000000</td>
<td>2033.000000</td>
<td>2371.000000</td>
<td>3694.000000</td>
<td>4146.000000</td>
<td>4474.000000</td>
<td>4424.000000</td>
<td>4551.000000</td>
<td>4745.000000</td>
<td>...</td>
<td>6102.000000</td>
<td>6350.000000</td>
<td>5742</td>
<td>5960</td>
<td>6201</td>
<td>6593</td>
<td>6624</td>
<td>6578</td>
<td>8318</td>
<td>8541</td>
</tr>
</tbody>
</table>

<p>8 rows Ã— 39 columns</p>
</div>
</div>
</div>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4">4-11</h3>
<p>Table 4-11 covers light-duty vehicles with short wheelbases (primarily passenger cars) and motorcycles. These smaller, more fuel-efficient vehicles represent an important segment of the fleet. The table structure matches 4-12, reporting fuel consumption and vehicle miles traveled over time. Combined with Table 4-12, this provides comprehensive coverage of the light-duty vehicle fleet.</p>
<p>Table 4-11: Light Duty Vehicle, Short Wheel Base and Motorcycle Fuel Consumption and Travel [Source: <a href="https://www.bts.gov/content/light-duty-vehicle-short-wheel-base-and-motorcycle-fuel-consumption-and-travel">Bureau of Transportation Statistics</a>]</p>
<div id="2aeccb69" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>filepath_4_11 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_11_032825.xlsx"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_11.exists():</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_11.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_11_032825.xlsx"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    filepath_4_11.write_bytes(response.content)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>df_4_11 <span class="op">=</span> pd.read_excel(</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  filepath_4_11,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-11"</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AO"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">18</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>df_4_11</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="fuel-economy---medium" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy---medium">Fuel Economy - Medium</h3>
<p>Table 4-13 addresses single-unit trucks with two axles and six or more tiresâ€”typically box trucks, delivery vehicles, utility trucks, and small dump trucks. These medium-duty trucks bridge the gap between light-duty pickups and heavy combination trucks. They generally achieve 6-8 miles per gallon, reflecting their larger engines, heavier construction, and cargo loads. Medium-duty trucks serve crucial roles in local freight delivery, construction, and utilities.</p>
<p>Table 4-13: Single-Unit 2-Axle 6-Tire or More Truck Fuel Consumption and Travel [Source: <a href="https://www.bts.gov/content/single-unit-2-axle-6-tire-or-more-truck-fuel-consumption-and-travel">Bureau of Transportation Statistics</a>]</p>
<div id="df22536c" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>filepath_4_13 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_13_032725.xlsx"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_13.exists():</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_13.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_13_032725.xlsx"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    filepath_4_13.write_bytes(response.content)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>df_FE_Medium <span class="op">=</span> pd.read_excel(</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  filepath_4_13,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-13"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>df_FE_Medium</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">1970</th>
<th data-quarto-table-cell-role="th">1975</th>
<th data-quarto-table-cell-role="th">1980</th>
<th data-quarto-table-cell-role="th">1985</th>
<th data-quarto-table-cell-role="th">1990</th>
<th data-quarto-table-cell-role="th">1991</th>
<th data-quarto-table-cell-role="th">1992</th>
<th data-quarto-table-cell-role="th">1993</th>
<th data-quarto-table-cell-role="th">1994</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2014</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Number registered (thousands)</td>
<td>3681.405000</td>
<td>4231.622000</td>
<td>4373.784000</td>
<td>4593.071446</td>
<td>4486.981096</td>
<td>4480.815015</td>
<td>4369.842228</td>
<td>4407.850444</td>
<td>4906.384535</td>
<td>...</td>
<td>8328.758599</td>
<td>8456.302000</td>
<td>8746.518000</td>
<td>9336.998000</td>
<td>10327.899000</td>
<td>10160.433000</td>
<td>9908.409000</td>
<td>10713.550000</td>
<td>11083.997000</td>
<td>11567.428000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Vehicle-miles (millions)</td>
<td>27081.000000</td>
<td>34606.000000</td>
<td>39813.000000</td>
<td>45441.010136</td>
<td>51901.084690</td>
<td>52897.923062</td>
<td>53874.244546</td>
<td>56772.473176</td>
<td>61284.000000</td>
<td>...</td>
<td>109301.406197</td>
<td>109597.318450</td>
<td>113337.941633</td>
<td>116102.399109</td>
<td>120698.994215</td>
<td>124745.707181</td>
<td>117832.173934</td>
<td>131637.174902</td>
<td>136223.786866</td>
<td>134100.608119</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Fuel consumed (million gallons)</td>
<td>3968.375000</td>
<td>5420.485711</td>
<td>6922.767279</td>
<td>7399.378701</td>
<td>8356.675584</td>
<td>8172.381947</td>
<td>8236.926852</td>
<td>8488.204295</td>
<td>9031.771537</td>
<td>...</td>
<td>14893.865294</td>
<td>14850.509537</td>
<td>15338.478728</td>
<td>15599.855130</td>
<td>16080.121829</td>
<td>16656.910752</td>
<td>15576.749998</td>
<td>17169.259790</td>
<td>17180.849601</td>
<td>17162.839167</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Average miles traveled per vehicle (thousands)</td>
<td>7.356159</td>
<td>8.177952</td>
<td>9.102644</td>
<td>9.893382</td>
<td>11.567039</td>
<td>11.805424</td>
<td>12.328648</td>
<td>12.879855</td>
<td>12.490664</td>
<td>...</td>
<td>13.123373</td>
<td>12.960431</td>
<td>12.958064</td>
<td>12.434660</td>
<td>11.686694</td>
<td>12.277598</td>
<td>11.892139</td>
<td>12.286980</td>
<td>12.290132</td>
<td>11.592949</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Average miles traveled per gallon</td>
<td>6.824204</td>
<td>6.384299</td>
<td>5.751024</td>
<td>6.141193</td>
<td>6.210733</td>
<td>6.472767</td>
<td>6.540576</td>
<td>6.688396</td>
<td>6.785380</td>
<td>...</td>
<td>7.338686</td>
<td>7.380038</td>
<td>7.389125</td>
<td>7.442531</td>
<td>7.506099</td>
<td>7.489126</td>
<td>7.564619</td>
<td>7.667027</td>
<td>7.928816</td>
<td>7.813428</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>Average fuel consumed per vehicle (gallons)</td>
<td>1077.951217</td>
<td>1280.947521</td>
<td>1582.786731</td>
<td>1610.987068</td>
<td>1862.427187</td>
<td>1823.860597</td>
<td>1884.948340</td>
<td>1925.701519</td>
<td>1840.820154</td>
<td>...</td>
<td>1788.245525</td>
<td>1756.147018</td>
<td>1753.666857</td>
<td>1670.757039</td>
<td>1556.959632</td>
<td>1639.389852</td>
<td>1572.073781</td>
<td>1602.574291</td>
<td>1550.059027</td>
<td>1483.721288</td>
</tr>
</tbody>
</table>

<p>6 rows Ã— 39 columns</p>
</div>
</div>
</div>
</section>
<section id="fuel-economy---heavy" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy---heavy">Fuel Economy - Heavy</h3>
<p>Table 4-14 covers combination trucksâ€”tractor-trailers consisting of a powered unit (tractor) pulling one or more trailers. These are the largest vehicles on the highway and handle the majority of long-distance freight. Heavy-duty trucks typically achieve 5-7 miles per gallon, limited by aerodynamic drag, rolling resistance, and the weight of loaded trailers. Small improvements in heavy truck fuel economy yield significant fuel savings given the high annual mileage these vehicles accumulate (often 60,000-100,000 miles per year).</p>
<p>Table 4-14: Combination Truck Fuel Consumption and Travel [Source: <a href="https://www.bts.gov/content/combination-truck-fuel-consumption-and-travel">Bureau of Transportation Statistics</a>]</p>
<div id="9ce9e16d" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>filepath_4_14 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_14_032725.xlsx"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_14.exists():</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    filepath_4_14.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_14_032725.xlsx"</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    filepath_4_14.write_bytes(response.content)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy <span class="op">=</span> pd.read_excel(</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  filepath_4_14,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-14"</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AN"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">1965</th>
<th data-quarto-table-cell-role="th">1970</th>
<th data-quarto-table-cell-role="th">1975</th>
<th data-quarto-table-cell-role="th">1980</th>
<th data-quarto-table-cell-role="th">1985</th>
<th data-quarto-table-cell-role="th">1990</th>
<th data-quarto-table-cell-role="th">1991</th>
<th data-quarto-table-cell-role="th">1992</th>
<th data-quarto-table-cell-role="th">1993</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2014</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Number registered (thousands)</td>
<td>786.510352</td>
<td>905.082000</td>
<td>1130.747000</td>
<td>1416.869000</td>
<td>1403.266000</td>
<td>1708.894894</td>
<td>1691.330985</td>
<td>1675.362942</td>
<td>1680.305013</td>
<td>...</td>
<td>2577.197369</td>
<td>2746.882000</td>
<td>2752.043000</td>
<td>2892.218000</td>
<td>2906.011000</td>
<td>2925.210000</td>
<td>2990.962000</td>
<td>3142.854000</td>
<td>3249.824000</td>
<td>3324.112000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Vehicle-miles traveled (millions)</td>
<td>31665.008552</td>
<td>35134.000000</td>
<td>46724.000000</td>
<td>68678.000000</td>
<td>78062.829300</td>
<td>94341.074342</td>
<td>96644.537280</td>
<td>99509.826717</td>
<td>103115.689682</td>
<td>...</td>
<td>169830.178385</td>
<td>170246.278000</td>
<td>174556.978274</td>
<td>181490.181698</td>
<td>184165.121151</td>
<td>175304.701353</td>
<td>179816.800923</td>
<td>195389.157346</td>
<td>195048.639383</td>
<td>195757.795420</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Fuel consumed (million gallons)</td>
<td>6658.000000</td>
<td>7347.937000</td>
<td>9177.475579</td>
<td>13037.002826</td>
<td>14005.271116</td>
<td>16132.920179</td>
<td>16808.623869</td>
<td>17216.232996</td>
<td>17747.967243</td>
<td>...</td>
<td>29117.656112</td>
<td>28885.913526</td>
<td>29554.641135</td>
<td>30363.560805</td>
<td>30325.060257</td>
<td>28987.013626</td>
<td>29186.467609</td>
<td>30439.396787</td>
<td>28218.174604</td>
<td>29296.988806</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Average miles traveled per vehicle (thousands)</td>
<td>40.260129</td>
<td>38.818582</td>
<td>41.321357</td>
<td>48.471665</td>
<td>55.629388</td>
<td>55.205896</td>
<td>57.141114</td>
<td>59.395982</td>
<td>61.367245</td>
<td>...</td>
<td>65.897234</td>
<td>61.978009</td>
<td>63.428143</td>
<td>62.751211</td>
<td>63.373855</td>
<td>59.928929</td>
<td>60.120055</td>
<td>62.169340</td>
<td>60.018216</td>
<td>58.890253</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Average miles traveled per gallon</td>
<td>4.755934</td>
<td>4.781478</td>
<td>5.091160</td>
<td>5.267929</td>
<td>5.573818</td>
<td>5.847737</td>
<td>5.749700</td>
<td>5.780000</td>
<td>5.810000</td>
<td>...</td>
<td>5.832550</td>
<td>5.893747</td>
<td>5.906246</td>
<td>5.977236</td>
<td>6.073034</td>
<td>6.047698</td>
<td>6.160965</td>
<td>6.418956</td>
<td>6.912164</td>
<td>6.681840</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>Average fuel consumed per vehicle (gallons)</td>
<td>8465.241403</td>
<td>8118.531802</td>
<td>8116.294431</td>
<td>9201.276071</td>
<td>9980.482044</td>
<td>9440.557310</td>
<td>9938.104379</td>
<td>10276.121406</td>
<td>10562.348563</td>
<td>...</td>
<td>11298.186339</td>
<td>10515.891664</td>
<td>10739.164008</td>
<td>10498.365201</td>
<td>10435.287498</td>
<td>9909.378686</td>
<td>9758.220803</td>
<td>9685.272299</td>
<td>8682.985480</td>
<td>8813.478248</td>
</tr>
</tbody>
</table>

<p>6 rows Ã— 40 columns</p>
</div>
</div>
</div>
</section>
<section id="fuel-economy-by-size-class" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy-by-size-class">Fuel Economy by Size Class</h3>
<p>The Transportation Energy Data Book provides detailed truck fuel economy broken down by manufacturerâ€™s gross vehicle weight rating (GVWR) classes. The Vehicle Inventory and Use Survey (VIUS) collected this data in 1992, 1997, and 2002 before being discontinued. These surveys provide the most detailed look at fuel economy across the full truck size spectrum. The data shows clear relationships: fuel economy decreases as vehicle weight increases. This allows us to estimate fuel economy for truck classes not directly reported in the annual BTS tables. The document also includes historical retail fuel prices in both current and inflation-adjusted dollars, showing how fuel costs have changed in real terms over decades.</p>
<p>Table 5.6 Truck Harmonic Mean Fuel Economy by Size Class, 1992, 1997, and 2002 (miles per gallon) [Source: <a href="https://tedb.ornl.gov/wp-content/uploads/2022/03/TEDB_Ed_40.pdf">Oak Ridge National Laboratory</a>]</p>
<div id="02068d1b" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>filepath_tedb <span class="op">=</span> Path(<span class="st">"data/doe/TEDB_Ed_40.pdf"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_tedb.exists():</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    filepath_tedb.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://tedb.ornl.gov/wp-content/uploads/2022/03/TEDB_Ed_40.pdf"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    filepath_tedb.write_bytes(response.content)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Table 5.6 in Page 152</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_1 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Manufacturer's gross vehicle weight class"</span>: [</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1) 6,000 lb and less"</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2) 6,001â€“10,000 lb"</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3) 10,000â€“14,000 lb"</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4) 14,001â€“16,000 lb"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"5) 16,001â€“19,500 lb"</span>,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"6) 19,501â€“26,000 lb"</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"7) 26,001â€“33,000 lb"</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"8) 33,001 lb and over"</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Light truck subtotal (1â€“2)"</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Medium truck subtotal (3â€“6)"</span>,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Large truck subtotal (7â€“8)"</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1992 TIUS"</span>: [<span class="fl">17.2</span>, <span class="fl">13.0</span>, <span class="fl">8.8</span>, <span class="fl">8.8</span>, <span class="fl">7.4</span>, <span class="fl">6.9</span>, <span class="fl">6.5</span>, <span class="fl">5.5</span>, <span class="fl">15.7</span>, <span class="fl">7.3</span>, <span class="fl">5.6</span>],</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1997 VIUS"</span>: [<span class="fl">17.1</span>, <span class="fl">13.6</span>, <span class="fl">9.4</span>, <span class="fl">9.3</span>, <span class="fl">8.7</span>, <span class="fl">7.3</span>, <span class="fl">6.4</span>, <span class="fl">5.7</span>, <span class="fl">15.8</span>, <span class="fl">8.6</span>, <span class="fl">6.1</span>],</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2002 VIUS"</span>: [<span class="fl">17.6</span>, <span class="fl">14.3</span>, <span class="fl">10.5</span>, <span class="fl">8.5</span>, <span class="fl">7.9</span>, <span class="fl">7.0</span>, <span class="fl">6.4</span>, <span class="fl">5.7</span>, <span class="fl">16.2</span>, <span class="fl">8.0</span>, <span class="fl">5.8</span>]</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Manufacturer's gross vehicle weight class</th>
<th data-quarto-table-cell-role="th">1992 TIUS</th>
<th data-quarto-table-cell-role="th">1997 VIUS</th>
<th data-quarto-table-cell-role="th">2002 VIUS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1) 6,000 lb and less</td>
<td>17.2</td>
<td>17.1</td>
<td>17.6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2) 6,001â€“10,000 lb</td>
<td>13.0</td>
<td>13.6</td>
<td>14.3</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>3) 10,000â€“14,000 lb</td>
<td>8.8</td>
<td>9.4</td>
<td>10.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>4) 14,001â€“16,000 lb</td>
<td>8.8</td>
<td>9.3</td>
<td>8.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>5) 16,001â€“19,500 lb</td>
<td>7.4</td>
<td>8.7</td>
<td>7.9</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>6) 19,501â€“26,000 lb</td>
<td>6.9</td>
<td>7.3</td>
<td>7.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>7) 26,001â€“33,000 lb</td>
<td>6.5</td>
<td>6.4</td>
<td>6.4</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>8) 33,001 lb and over</td>
<td>5.5</td>
<td>5.7</td>
<td>5.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>Light truck subtotal (1â€“2)</td>
<td>15.7</td>
<td>15.8</td>
<td>16.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>Medium truck subtotal (3â€“6)</td>
<td>7.3</td>
<td>8.6</td>
<td>8.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>Large truck subtotal (7â€“8)</td>
<td>5.6</td>
<td>6.1</td>
<td>5.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Table 11.6: (Updated June 2022) Retail Prices for Motor Fuel, 1978â€“2021 (dollars per gallon, including tax)</p>
<div id="51736769" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Table 11.6 in Page 285</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: [</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1978</span>, <span class="dv">1980</span>, <span class="dv">1985</span>, <span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">1996</span>, <span class="dv">1997</span>, <span class="dv">1998</span>, <span class="dv">1999</span>, <span class="dv">2000</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2001</span>, <span class="dv">2002</span>, <span class="dv">2003</span>, <span class="dv">2004</span>, <span class="dv">2005</span>, <span class="dv">2006</span>, <span class="dv">2007</span>, <span class="dv">2008</span>, <span class="dv">2009</span>, <span class="dv">2010</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diesel_Current"</span>: [</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="fl">1.01</span>, <span class="fl">1.22</span>, <span class="fl">1.07</span>, <span class="fl">1.11</span>, <span class="fl">1.24</span>, <span class="fl">1.20</span>, <span class="fl">1.04</span>, <span class="fl">1.12</span>, <span class="fl">1.49</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.40</span>, <span class="fl">1.32</span>, <span class="fl">1.51</span>, <span class="fl">1.81</span>, <span class="fl">2.40</span>, <span class="fl">2.71</span>, <span class="fl">2.89</span>, <span class="fl">3.80</span>, <span class="fl">2.47</span>, <span class="fl">2.99</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.84</span>, <span class="fl">3.97</span>, <span class="fl">3.92</span>, <span class="fl">3.83</span>, <span class="fl">2.71</span>, <span class="fl">2.30</span>, <span class="fl">2.65</span>, <span class="fl">3.18</span>, <span class="fl">3.06</span>, <span class="fl">2.55</span>, <span class="fl">3.29</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diesel_Constant_2021"</span>: [</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="fl">3.32</span>, <span class="fl">3.07</span>, <span class="fl">2.22</span>, <span class="fl">1.97</span>, <span class="fl">2.13</span>, <span class="fl">2.02</span>, <span class="fl">1.74</span>, <span class="fl">1.82</span>, <span class="fl">2.35</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.14</span>, <span class="fl">1.99</span>, <span class="fl">2.22</span>, <span class="fl">2.60</span>, <span class="fl">3.33</span>, <span class="fl">3.64</span>, <span class="fl">3.77</span>, <span class="fl">4.79</span>, <span class="fl">3.12</span>, <span class="fl">3.72</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.63</span>, <span class="fl">4.68</span>, <span class="fl">4.56</span>, <span class="fl">4.38</span>, <span class="fl">3.09</span>, <span class="fl">2.60</span>, <span class="fl">2.93</span>, <span class="fl">3.43</span>, <span class="fl">3.24</span>, <span class="fl">2.67</span>, <span class="fl">3.29</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Regular_Current"</span>: [</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>        <span class="fl">0.67</span>, <span class="fl">1.25</span>, <span class="fl">1.20</span>, <span class="fl">1.16</span>, <span class="fl">1.15</span>, <span class="fl">1.23</span>, <span class="fl">1.23</span>, <span class="fl">1.06</span>, <span class="fl">1.17</span>, <span class="fl">1.51</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.46</span>, <span class="fl">1.36</span>, <span class="fl">1.59</span>, <span class="fl">1.88</span>, <span class="fl">2.30</span>, <span class="fl">2.59</span>, <span class="fl">2.80</span>, <span class="fl">3.27</span>, <span class="fl">2.35</span>, <span class="fl">2.79</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.53</span>, <span class="fl">3.64</span>, <span class="fl">3.53</span>, <span class="fl">3.37</span>, <span class="fl">2.45</span>, <span class="fl">2.14</span>, <span class="fl">2.41</span>, <span class="fl">2.74</span>, <span class="fl">2.64</span>, <span class="fl">2.17</span>, <span class="fl">3.05</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Regular_Constant_2021"</span>: [</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.78</span>, <span class="fl">4.09</span>, <span class="fl">3.03</span>, <span class="fl">2.41</span>, <span class="fl">2.04</span>, <span class="fl">2.13</span>, <span class="fl">2.08</span>, <span class="fl">1.76</span>, <span class="fl">1.89</span>, <span class="fl">2.38</span>,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.24</span>, <span class="fl">2.05</span>, <span class="fl">2.34</span>, <span class="fl">2.70</span>, <span class="fl">3.18</span>, <span class="fl">3.48</span>, <span class="fl">3.66</span>, <span class="fl">4.11</span>, <span class="fl">2.97</span>, <span class="fl">3.46</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.25</span>, <span class="fl">4.30</span>, <span class="fl">4.10</span>, <span class="fl">3.85</span>, <span class="fl">2.80</span>, <span class="fl">2.42</span>, <span class="fl">2.66</span>, <span class="fl">2.95</span>, <span class="fl">2.79</span>, <span class="fl">2.28</span>, <span class="fl">3.05</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Premium_Current"</span>: [</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="va">None</span>, <span class="fl">1.34</span>, <span class="fl">1.35</span>, <span class="fl">1.34</span>, <span class="fl">1.41</span>, <span class="fl">1.42</span>, <span class="fl">1.25</span>, <span class="fl">1.36</span>, <span class="fl">1.69</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.66</span>, <span class="fl">1.56</span>, <span class="fl">1.78</span>, <span class="fl">2.07</span>, <span class="fl">2.49</span>, <span class="fl">2.81</span>, <span class="fl">3.03</span>, <span class="fl">3.52</span>, <span class="fl">2.61</span>, <span class="fl">3.05</span>,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.79</span>, <span class="fl">3.92</span>, <span class="fl">3.84</span>, <span class="fl">3.71</span>, <span class="fl">2.87</span>, <span class="fl">2.61</span>, <span class="fl">2.91</span>, <span class="fl">3.27</span>, <span class="fl">3.21</span>, <span class="fl">2.79</span>, <span class="fl">3.69</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Premium_Constant_2021"</span>: [</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="va">None</span>, <span class="fl">3.37</span>, <span class="fl">2.80</span>, <span class="fl">2.38</span>, <span class="fl">2.44</span>, <span class="fl">2.39</span>, <span class="fl">2.08</span>, <span class="fl">2.21</span>, <span class="fl">2.66</span>,</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.54</span>, <span class="fl">2.34</span>, <span class="fl">2.62</span>, <span class="fl">2.97</span>, <span class="fl">3.46</span>, <span class="fl">3.77</span>, <span class="fl">3.96</span>, <span class="fl">4.43</span>, <span class="fl">3.29</span>, <span class="fl">3.79</span>,</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.57</span>, <span class="fl">4.63</span>, <span class="fl">4.47</span>, <span class="fl">4.25</span>, <span class="fl">3.28</span>, <span class="fl">2.95</span>, <span class="fl">3.22</span>, <span class="fl">3.53</span>, <span class="fl">3.40</span>, <span class="fl">2.92</span>, <span class="fl">3.69</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Diesel_Current</th>
<th data-quarto-table-cell-role="th">Diesel_Constant_2021</th>
<th data-quarto-table-cell-role="th">Regular_Current</th>
<th data-quarto-table-cell-role="th">Regular_Constant_2021</th>
<th data-quarto-table-cell-role="th">Premium_Current</th>
<th data-quarto-table-cell-role="th">Premium_Constant_2021</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1978</td>
<td>NaN</td>
<td>NaN</td>
<td>0.67</td>
<td>2.78</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1980</td>
<td>1.01</td>
<td>3.32</td>
<td>1.25</td>
<td>4.09</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1985</td>
<td>1.22</td>
<td>3.07</td>
<td>1.20</td>
<td>3.03</td>
<td>1.34</td>
<td>3.37</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1990</td>
<td>1.07</td>
<td>2.22</td>
<td>1.16</td>
<td>2.41</td>
<td>1.35</td>
<td>2.80</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1995</td>
<td>1.11</td>
<td>1.97</td>
<td>1.15</td>
<td>2.04</td>
<td>1.34</td>
<td>2.38</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>1996</td>
<td>1.24</td>
<td>2.13</td>
<td>1.23</td>
<td>2.13</td>
<td>1.41</td>
<td>2.44</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>1997</td>
<td>1.20</td>
<td>2.02</td>
<td>1.23</td>
<td>2.08</td>
<td>1.42</td>
<td>2.39</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>1998</td>
<td>1.04</td>
<td>1.74</td>
<td>1.06</td>
<td>1.76</td>
<td>1.25</td>
<td>2.08</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>1999</td>
<td>1.12</td>
<td>1.82</td>
<td>1.17</td>
<td>1.89</td>
<td>1.36</td>
<td>2.21</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>2000</td>
<td>1.49</td>
<td>2.35</td>
<td>1.51</td>
<td>2.38</td>
<td>1.69</td>
<td>2.66</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>2001</td>
<td>1.40</td>
<td>2.14</td>
<td>1.46</td>
<td>2.24</td>
<td>1.66</td>
<td>2.54</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>2002</td>
<td>1.32</td>
<td>1.99</td>
<td>1.36</td>
<td>2.05</td>
<td>1.56</td>
<td>2.34</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>2003</td>
<td>1.51</td>
<td>2.22</td>
<td>1.59</td>
<td>2.34</td>
<td>1.78</td>
<td>2.62</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>2004</td>
<td>1.81</td>
<td>2.60</td>
<td>1.88</td>
<td>2.70</td>
<td>2.07</td>
<td>2.97</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>2005</td>
<td>2.40</td>
<td>3.33</td>
<td>2.30</td>
<td>3.18</td>
<td>2.49</td>
<td>3.46</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>2006</td>
<td>2.71</td>
<td>3.64</td>
<td>2.59</td>
<td>3.48</td>
<td>2.81</td>
<td>3.77</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>2007</td>
<td>2.89</td>
<td>3.77</td>
<td>2.80</td>
<td>3.66</td>
<td>3.03</td>
<td>3.96</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>2008</td>
<td>3.80</td>
<td>4.79</td>
<td>3.27</td>
<td>4.11</td>
<td>3.52</td>
<td>4.43</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>2009</td>
<td>2.47</td>
<td>3.12</td>
<td>2.35</td>
<td>2.97</td>
<td>2.61</td>
<td>3.29</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td>2010</td>
<td>2.99</td>
<td>3.72</td>
<td>2.79</td>
<td>3.46</td>
<td>3.05</td>
<td>3.79</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>2011</td>
<td>3.84</td>
<td>4.63</td>
<td>3.53</td>
<td>4.25</td>
<td>3.79</td>
<td>4.57</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td>2012</td>
<td>3.97</td>
<td>4.68</td>
<td>3.64</td>
<td>4.30</td>
<td>3.92</td>
<td>4.63</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>2013</td>
<td>3.92</td>
<td>4.56</td>
<td>3.53</td>
<td>4.10</td>
<td>3.84</td>
<td>4.47</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td>2014</td>
<td>3.83</td>
<td>4.38</td>
<td>3.37</td>
<td>3.85</td>
<td>3.71</td>
<td>4.25</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>2015</td>
<td>2.71</td>
<td>3.09</td>
<td>2.45</td>
<td>2.80</td>
<td>2.87</td>
<td>3.28</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>2016</td>
<td>2.30</td>
<td>2.60</td>
<td>2.14</td>
<td>2.42</td>
<td>2.61</td>
<td>2.95</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>2017</td>
<td>2.65</td>
<td>2.93</td>
<td>2.41</td>
<td>2.66</td>
<td>2.91</td>
<td>3.22</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">27</th>
<td>2018</td>
<td>3.18</td>
<td>3.43</td>
<td>2.74</td>
<td>2.95</td>
<td>3.27</td>
<td>3.53</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">28</th>
<td>2019</td>
<td>3.06</td>
<td>3.24</td>
<td>2.64</td>
<td>2.79</td>
<td>3.21</td>
<td>3.40</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">29</th>
<td>2020</td>
<td>2.55</td>
<td>2.67</td>
<td>2.17</td>
<td>2.28</td>
<td>2.79</td>
<td>2.92</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">30</th>
<td>2021</td>
<td>3.29</td>
<td>3.29</td>
<td>3.05</td>
<td>3.05</td>
<td>3.69</td>
<td>3.69</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="0278e597" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">FIXME</span><span class="co">: Unsure the logic behind this calculation.</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2[<span class="st">"Diesel to Average Ratio"</span>] <span class="op">=</span> df_FE_SizeClass_2[<span class="st">"Diesel_Current"</span>] <span class="op">/</span> (df_FE_SizeClass_2[<span class="st">"Regular_Current"</span>] <span class="op">+</span> df_FE_SizeClass_2[<span class="st">"Premium_Current"</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2.loc[df_FE_SizeClass_2[<span class="st">'Year'</span>] <span class="op">==</span> <span class="dv">2021</span>, <span class="st">'Diesel to Average Ratio'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>30    0.244065
Name: Diesel to Average Ratio, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="repair-and-maintenance-cost---heavy" class="level3">
<h3 class="anchored" data-anchor-id="repair-and-maintenance-cost---heavy">Repair and Maintenance Cost - Heavy</h3>
<p>Heavy truck maintenance costs come from industry surveys conducted by the American Transportation Research Institute (ATRI), which tracks operating costs for commercial trucking fleets. Maintenance costs include scheduled preventive maintenance (oil changes, filter replacements, inspections), repairs (brakes, tires, engine work), and roadside breakdowns. The data shows maintenance costs per mile ranging from $0.12 to $0.17, considerably higher than light-duty vehicle maintenance due to more frequent service intervals, larger and more expensive parts, and the severe duty cycles that commercial trucks experience.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://fleetimages.bobitstudios.com/upload/trucking-info/content/article/2021-08/maintenance_chart4-__-720x516-s.jpg" class="img-fluid figure-img"></p>
<figcaption>Repair and Maintenance Cost per Mile</figcaption>
</figure>
</div>
<p>Source: <a href="'https://www.truckinginfo.com/10150350/2021-hdt-fact-book-maintenance-costs-expected-to-rise'">TruckingInfo.com</a></p>
<p>Further Research: American Transportation Research Institute</p>
<div id="5dc0175b" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manually Entering the data from above image</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>df_RepairMaintenanceCost_Heavy <span class="op">=</span> pd.DataFrame({</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: [<span class="st">"2010"</span>, <span class="st">"2011"</span>, <span class="st">"2012"</span>, <span class="st">"2013"</span>, <span class="st">"2014"</span>, <span class="st">"2015"</span>, <span class="st">"2016"</span>, <span class="st">"2017"</span>, <span class="st">"2018"</span>, <span class="st">"2019"</span>],</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CostMile"</span>: [<span class="fl">0.124</span>, <span class="fl">0.152</span>, <span class="fl">0.138</span>, <span class="fl">0.148</span>, <span class="fl">0.158</span>, <span class="fl">0.156</span>, <span class="fl">0.166</span>, <span class="fl">0.167</span>, <span class="fl">0.171</span>, <span class="fl">0.14</span>]</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>df_RepairMaintenanceCost_Heavy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">CostMile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2010</td>
<td>0.124</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2011</td>
<td>0.152</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>2012</td>
<td>0.138</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>2013</td>
<td>0.148</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>2014</td>
<td>0.158</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>2015</td>
<td>0.156</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>2016</td>
<td>0.166</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>2017</td>
<td>0.167</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>2018</td>
<td>0.171</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>2019</td>
<td>0.140</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="driving-costs" class="level3">
<h3 class="anchored" data-anchor-id="driving-costs">Driving Costs</h3>
<p>AAA publishes an annual â€œYour Driving Costsâ€ report based on vehicle ownership costs for five vehicle categories at three annual mileage levels. The report combines manufacturer data, insurance industry statistics, and fuel price surveys. The PDF tables are extracted programmatically using <code>pdfplumber</code>, which identifies table boundaries and cell contents. The two pages are combined horizontally to create a complete dataset. This provides current-year cost estimates to benchmark against our trend-based calculations.</p>
<p>Data Source: <a href="'https://exchange.aaa.com/wp-content/uploads/2019/09/AAA-Your-Driving-Costs-2019.pdf'">American Automobile Association</a></p>
<div id="f9831ff0" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>filepath_drivingcost <span class="op">=</span> Path(<span class="st">"data/aaa/YDC-Brochure_2023-FINAL-8.30.23-.pdf"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_drivingcost.exists():</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    filepath_drivingcost.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://newsroom.aaa.com/wp-content/uploads/2023/08/YDC-Brochure_2023-FINAL-8.30.23-.pdf"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    filepath_drivingcost.write_bytes(response.content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="c6c64022" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pdfplumber.<span class="bu">open</span>(filepath_drivingcost) <span class="im">as</span> pdf:</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Page 1 (index 0)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    page1 <span class="op">=</span> pdf.pages[<span class="dv">0</span>]</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Page 2 (index 1)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    page2 <span class="op">=</span> pdf.pages[<span class="dv">1</span>]</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use lines strategy for table detection</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    table_settings <span class="op">=</span> {</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"vertical_strategy"</span>: <span class="st">"lines"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"horizontal_strategy"</span>: <span class="st">"lines"</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract tables from both pages</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    table1 <span class="op">=</span> page1.extract_table(table_settings<span class="op">=</span>table_settings)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    table2 <span class="op">=</span> page2.extract_table(table_settings<span class="op">=</span>table_settings)</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create DataFrames</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    df_page1 <span class="op">=</span> pd.DataFrame(table1[<span class="dv">1</span>:], columns<span class="op">=</span>table1[<span class="dv">0</span>])</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    df_page2 <span class="op">=</span> pd.DataFrame(table2[<span class="dv">1</span>:], columns<span class="op">=</span>table2[<span class="dv">0</span>])</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove the 6th column (index 5) from df_page2</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    df_page2_clean <span class="op">=</span> df_page2.drop(df_page2.columns[<span class="dv">0</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Concatenate horizontally (side by side)</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    df_DrivingCosts <span class="op">=</span> pd.concat([df_page1, df_page2_clean], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>df_DrivingCosts</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Small\nSedan</th>
<th data-quarto-table-cell-role="th">Medium\nSedan</th>
<th data-quarto-table-cell-role="th">Subcompact\nSUV</th>
<th data-quarto-table-cell-role="th">Compact\nSUV (FWD)</th>
<th data-quarto-table-cell-role="th">Medium\nSUV (4WD)</th>
<th data-quarto-table-cell-role="th">Midsize\nPickup</th>
<th data-quarto-table-cell-role="th">1/2 Ton/Crew-\nCab Pickup</th>
<th data-quarto-table-cell-role="th">Hybrid\nVehicle</th>
<th data-quarto-table-cell-role="th">Electric\nVehicle</th>
<th data-quarto-table-cell-role="th">2023 Weighted\nAverage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Operating Costs</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>fuel</td>
<td>11.18Â¢</td>
<td>12.52Â¢</td>
<td>13.17Â¢</td>
<td>12.76Â¢</td>
<td>16.66Â¢</td>
<td>19.05Â¢</td>
<td>22.31Â¢</td>
<td>9.58Â¢</td>
<td>4.74Â¢</td>
<td>15.93Â¢</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>maintenance</td>
<td>9.11Â¢</td>
<td>10.85Â¢</td>
<td>9.51Â¢</td>
<td>10.39Â¢</td>
<td>10.57Â¢</td>
<td>10.35Â¢</td>
<td>9.42Â¢</td>
<td>9.09Â¢</td>
<td>8.12Â¢</td>
<td>9.83Â¢</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>cost per mile</td>
<td>20.29Â¢</td>
<td>23.37Â¢</td>
<td>22.68Â¢</td>
<td>23.14Â¢</td>
<td>27.22Â¢</td>
<td>29.40Â¢</td>
<td>31.73Â¢</td>
<td>18.67Â¢</td>
<td>12.86Â¢</td>
<td>25.76Â¢</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Ownership Costs</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>full-coverage insurance</td>
<td>$1,794</td>
<td>$1,922</td>
<td>$1,713</td>
<td>$1,681</td>
<td>$1,685</td>
<td>$1,679</td>
<td>$1,807</td>
<td>$1,710</td>
<td>$1,820</td>
<td>$1,765</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>license, registration, taxes</td>
<td>$505</td>
<td>$668</td>
<td>$599</td>
<td>$629</td>
<td>$816</td>
<td>$825</td>
<td>$1,099</td>
<td>$692</td>
<td>-$192</td>
<td>$762</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>depreciation (15k mi/yr)</td>
<td>$2,846</td>
<td>$3,922</td>
<td>$3,102</td>
<td>$3,332</td>
<td>$4,136</td>
<td>$4,089</td>
<td>$6,464</td>
<td>$3,401</td>
<td>$5,296</td>
<td>$4,538</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>finance charges</td>
<td>$750</td>
<td>$1,030</td>
<td>$901</td>
<td>$953</td>
<td>$1,250</td>
<td>$1,255</td>
<td>$1,729</td>
<td>$1,046</td>
<td>$1,260</td>
<td>$1,253</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>cost per year</td>
<td>$5,895</td>
<td>$7,542</td>
<td>$6,316</td>
<td>$6,594</td>
<td>$7,887</td>
<td>$7,848</td>
<td>$11,099</td>
<td>$6,849</td>
<td>$8,183</td>
<td>$8,318</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>cost per day</td>
<td>$16.15</td>
<td>$20.66</td>
<td>$17.30</td>
<td>$18.07</td>
<td>$21.61</td>
<td>$21.50</td>
<td>$30.41</td>
<td>$18.76</td>
<td>$22.42</td>
<td>$22.79</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>Total Cost â€“ 10k mi/yr</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>operating cost</td>
<td>$2,029</td>
<td>$2,337</td>
<td>$2,268</td>
<td>$2,314</td>
<td>$2,722</td>
<td>$2,940</td>
<td>$3,173</td>
<td>$1,867</td>
<td>$1,286</td>
<td>$2,576</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>ownership cost</td>
<td>$5,895</td>
<td>$7,542</td>
<td>$6,316</td>
<td>$6,594</td>
<td>$7,887</td>
<td>$7,848</td>
<td>$11,099</td>
<td>$6,849</td>
<td>$8,183</td>
<td>$8,318</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>depreciation1</td>
<td>-$217</td>
<td>-$241</td>
<td>-2$33</td>
<td>-$286</td>
<td>-$371</td>
<td>-$395</td>
<td>-$453</td>
<td>-$272</td>
<td>-$370</td>
<td>-$345</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>total cost per year</td>
<td>$7,707</td>
<td>$9,638</td>
<td>$8,351</td>
<td>$8,623</td>
<td>$10,239</td>
<td>$10,393</td>
<td>$13,818</td>
<td>$8,445</td>
<td>$9,099</td>
<td>$10,549</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>total cost per day</td>
<td>$21.12</td>
<td>$26.41</td>
<td>$22.88</td>
<td>$23.62</td>
<td>$28.05</td>
<td>$28.48</td>
<td>$37.86</td>
<td>$23.14</td>
<td>$24.93</td>
<td>$28.90</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>total cost per mile2</td>
<td>$0.7707</td>
<td>$0.9638</td>
<td>$0.8351</td>
<td>$0.8623</td>
<td>$1.0239</td>
<td>$1.0393</td>
<td>$1.3818</td>
<td>$0.8445</td>
<td>$0.9099</td>
<td>$1.0549</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>Total Cost â€“ 15k mi/yr</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td>operating cost</td>
<td>$3,044</td>
<td>$3,505</td>
<td>$3,402</td>
<td>$3,471</td>
<td>$4,084</td>
<td>$4,410</td>
<td>$4,759</td>
<td>$2,801</td>
<td>$1,929</td>
<td>$3,864</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>ownership cost</td>
<td>$5,895</td>
<td>$7,542</td>
<td>$6,316</td>
<td>$6,594</td>
<td>$7,887</td>
<td>$7,848</td>
<td>$11,099</td>
<td>$6,849</td>
<td>$8,183</td>
<td>$8,318</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td>total cost per year</td>
<td>$8,939</td>
<td>$11,048</td>
<td>$9,718</td>
<td>$10,066</td>
<td>$11,971</td>
<td>$12,258</td>
<td>$15,858</td>
<td>$9,650</td>
<td>$10,112</td>
<td>$12,182</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>total cost per day</td>
<td>$24.49</td>
<td>$30.27</td>
<td>$26.62</td>
<td>$27.58</td>
<td>$32.80</td>
<td>$33.58</td>
<td>$43.45</td>
<td>$26.44</td>
<td>$27.70</td>
<td>$33.37</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td>total cost per mile2</td>
<td>$0.5959</td>
<td>$0.7365</td>
<td>$0.6479</td>
<td>$0.6710</td>
<td>$0.7981</td>
<td>$0.8172</td>
<td>$1.0572</td>
<td>$0.6433</td>
<td>$0.6741</td>
<td>$0.8121</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>Total Cost â€“ 20k mi/yr</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>operating cost</td>
<td>$4,058</td>
<td>$4,674</td>
<td>$4,537</td>
<td>$4,628</td>
<td>$5,445</td>
<td>$5,879</td>
<td>$6,346</td>
<td>$3,734</td>
<td>$2,572</td>
<td>$5,152</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>ownership cost</td>
<td>$5,895</td>
<td>$7,542</td>
<td>$6,316</td>
<td>$6,594</td>
<td>$7,887</td>
<td>$7,848</td>
<td>$11,099</td>
<td>$6,849</td>
<td>$8,183</td>
<td>$8,318</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">27</th>
<td>depreciation1</td>
<td>+$235</td>
<td>+$261</td>
<td>+$252</td>
<td>+$311</td>
<td>+$401</td>
<td>+$428</td>
<td>+$496</td>
<td>+$294</td>
<td>+$399</td>
<td>+$375</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">28</th>
<td>total cost per year</td>
<td>$10,188</td>
<td>$12,477</td>
<td>$11,104</td>
<td>$11,533</td>
<td>$13,733</td>
<td>$14,156</td>
<td>$17,940</td>
<td>$10,877</td>
<td>$11,154</td>
<td>$13,844</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">29</th>
<td>total cost per day</td>
<td>$27.91</td>
<td>$34.18</td>
<td>$30.42</td>
<td>$31.60</td>
<td>$37.63</td>
<td>$38.78</td>
<td>$49.15</td>
<td>$29.80</td>
<td>$30.56</td>
<td>$37.93</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">30</th>
<td>total cost per mile2</td>
<td>$0.5094</td>
<td>$0.6239</td>
<td>$0.5552</td>
<td>$0.5767</td>
<td>$0.6867</td>
<td>$0.7078</td>
<td>$0.8970</td>
<td>$0.5438</td>
<td>$0.5577</td>
<td>$0.6922</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="intermediate-cost-calculations" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="intermediate-cost-calculations"><span class="header-section-number">3</span> Intermediate Cost Calculations</h2>
<p>Raw data alone cannot answer the question â€œwhat does it cost to drive a mile?â€ The data must be processed, combined, and analyzed to extract meaningful patterns and derive cost estimates. This section performs several types of calculations:</p>
<ol type="1">
<li><strong>Trend analysis:</strong> Fitting linear regression lines to historical data to identify whether costs are rising, falling, or stable over time</li>
<li><strong>Data fusion:</strong> Combining information from multiple sources (e.g., fuel prices from EIA and fuel economy from BTS to calculate fuel cost per mile)</li>
<li><strong>Actual vs.&nbsp;trend comparison:</strong> Evaluating whether the most recent actual data point aligns with the long-term trend or represents an unusual deviation</li>
<li><strong>Normalization:</strong> Adjusting costs for inflation using the CPI to enable valid comparisons across years</li>
</ol>
<p>Each subsection focuses on a specific cost component, builds relevant metrics, visualizes trends, and produces comparison tables that inform the final operating cost calculations. The visualizations help both technical and non-technical readers understand whether recent costs are consistent with historical patterns or represent significant departures requiring explanation.</p>
<section id="transportation-expenditures" class="level3">
<h3 class="anchored" data-anchor-id="transportation-expenditures">Transportation Expenditures</h3>
<p>Transportation expenditures provide essential context for validating our operating cost calculations. If our estimates are accurate, they should produce travel costs consistent with what households actually spend on transportation. This subsection examines transportation spending from two perspectives: transportation as a percentage of total household expenditures, and gasoline specifically as a percentage of total expenditures.</p>
<p>The first metric reveals how much of household budgets go to all transportation (vehicles, fuel, maintenance, public transit, air travel). The second isolates just gasoline, which directly relates to our per-mile operating cost estimates. If gasoline spending is rising faster than overall transportation spending, it suggests fuel prices are increasing or people are driving more. If itâ€™s falling, vehicles may be becoming more efficient or people may be driving less.</p>
<section id="create-dataframe" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe">Create Dataframe</h4>
<p>The dataframe combines transportation cost percentages from the personal expenditure data with gasoline costs from the average cost data. The calculation <code>Gasoline Cost of Transportation * Transportation Percent of Total / 100</code> produces gasoline as a percentage of total household expenditures. This derived metric helps us understand whether fluctuations in gasoline prices significantly impact household budgets or represent a small enough fraction that price changes have limited behavioral effects.</p>
<div id="e878960b" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure.columns <span class="op">=</span> df_PersonalExpenditure.columns.astype(<span class="bu">str</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>df_AverageCost.columns <span class="op">=</span> df_AverageCost.columns.astype(<span class="bu">str</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DataFrame to combine the extracted data</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure <span class="op">=</span> pd.DataFrame({</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The years from 1990 to 2024</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the 'Transportation Cost Percent of Total' for the years 1990-2020 from row 2</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Transportation Percent of Total"</span>: pd.to_numeric(</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>      df_PersonalExpenditure.loc[<span class="dv">2</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the 'Gasoline Cost of Transportation' for the years 1990-2020 from row 2</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gasoline Cost of Transportation"</span>: pd.to_numeric(</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">2</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">FIXME</span><span class="co">: Did not understand the logic for this</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure[<span class="st">"Gasoline Percent of Total"</span>] <span class="op">=</span> df_TransportationExpenditure[<span class="st">"Gasoline Cost of Transportation"</span>] <span class="op">*</span> df_TransportationExpenditure[<span class="st">"Transportation Percent of Total"</span>] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="plotting-trends" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends">Plotting Trends</h4>
<p>The visualization shows two time series: the blue line represents all transportation spending as a percentage of total expenditures, while the red line shows just gasoline. Dashed trend lines reveal the long-term direction. Several insights emerge from these patterns:</p>
<ul>
<li>Transportation spending as a share of total expenditures has remained relatively stable at 12-13% over the 30+ year period, suggesting transportation is a consistent household priority</li>
<li>Gasoline spending fluctuates more than total transportation spending, reflecting volatile oil prices</li>
<li>When gasoline prices spike (visible as peaks in the red line), it absorbs a larger share of total transportation budgets, potentially crowding out other spending or changing travel behavior</li>
<li>The gap between the lines represents non-gasoline transportation costs: vehicle purchases, insurance, maintenance, and public transit</li>
</ul>
<div id="a344370c" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Transportation Cost Percent of Total with a blue line</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Transportation Percent of Total'</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#0070C0'</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">'Transportation as </span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Gasoline Percent of Total with a red line</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gasoline Percent of Total'</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#FF0000'</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">'Gasoline as </span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Transportation Percent of Total'</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gasoline Percent of Total'</span>,</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Transportation as a Percent of Total Expenditure'</span>,</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_TransportationExpenditure[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 14</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">14</span>)</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="actual-vs-trend-comparision" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision">Actual vs Trend Comparision</h4>
<p>The comparison table evaluates whether 2023 values align with historical trends or deviate significantly. â€œActualâ€ shows the reported value from the data source for 2023. â€œTrendâ€ shows the value predicted by a linear regression fit to all historical data.</p>
<p>Large differences between actual and trend values warrant investigation. If actual spending exceeds the trend, it might indicate unusual fuel price spikes or increased travel demand. If actual spending falls below the trend, it could reflect improved fuel economy, reduced travel, or fuel price declines. Small differences suggest stability and that using trend-based projections for missing data would be reasonable.</p>
<div id="16414938" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>df_TranspExp_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR],</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        df_TransportationExpenditure.loc[df_TransportationExpenditure[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Transportation Percent of Total'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        df_TransportationExpenditure.loc[df_TransportationExpenditure[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Gasoline Percent of Total'</span>].iloc[<span class="dv">0</span>]  <span class="co"># FIXED: THere is a potential error here in Excel sheet</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_TransportationExpenditure[<span class="st">'Year'</span>]),</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_TransportationExpenditure[<span class="st">'Transportation Percent of Total'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_TransportationExpenditure[<span class="st">'Year'</span>]),</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_TransportationExpenditure[<span class="st">'Gasoline Percent of Total'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Transportation as % Total Expenditures'</span>, <span class="st">'Gasoline as % Total Expenditures'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>df_TranspExp_Comparision</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="auto-cost---variable-fixed" class="level3">
<h3 class="anchored" data-anchor-id="auto-cost---variable-fixed">Auto Cost - Variable-Fixed</h3>
<p>Understanding the split between variable and fixed costs is fundamental to travel demand modeling. Variable costsâ€”primarily fuel and maintenanceâ€”increase with each mile driven, so travelers experience them directly and may modify their behavior in response. Fixed costsâ€”insurance, depreciation, registration, and finance chargesâ€”must be paid regardless of whether the vehicle is driven 5,000 or 25,000 miles per year.</p>
<p>Travel demand models typically include only variable costs because these represent the marginal cost of each trip. A traveler deciding whether to drive downtown doesnâ€™t consider their annual insurance premium (already paid) but does consider fuel and parking costs. By isolating variable costs and tracking how theyâ€™ve changed over time, we can better estimate the cost signals that influence travel decisions.</p>
<p>This section also normalizes costs by the Consumer Price Index to distinguish between nominal increases (due to general inflation) and real increases (costs rising faster than inflation). If variable costs increase faster than the CPI, driving is becoming genuinely more expensive in real terms, which may encourage modal shifts or trip consolidation.</p>
<section id="create-dataframe-1" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe-1">Create Dataframe</h4>
<p>The dataframe combines several cost components. â€œVariableâ€ represents the cents-per-mile cost of fuel, maintenance, and tiresâ€”expenses that scale with mileage. â€œFixedâ€ represents annual costs for insurance, registration, depreciation, and finance charges. â€œTotalâ€ is the sum of variable and fixed costs.</p>
<p>The â€œPer 15kâ€ column converts the annual fixed cost into a per-mile equivalent by dividing by 15,000 milesâ€”the assumed annual travel in the AAA data. This allows direct comparison of fixed costs to variable costs on a per-mile basis, though itâ€™s important to remember this is an accounting convenience rather than a true marginal cost.</p>
<p>â€œVariable/Totalâ€ shows what fraction of total costs are variableâ€”typically 30-40%. This indicates that most vehicle ownership costs are fixed commitments. â€œVariable/CPIâ€ and â€œFixed/CPIâ€ divide costs by the Consumer Price Index to produce inflation-adjusted metrics. If these ratios increase over time, vehicle costs are rising faster than general inflation. If they decrease, vehicles are becoming relatively cheaper despite nominal price increases.</p>
<div id="db37bc37" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>))  <span class="co"># Last year should be one more than desired</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed <span class="op">=</span> pd.DataFrame({</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Variable"</span>: pd.to_numeric(</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">6</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fixed"</span>: pd.to_numeric(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">7</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Total"</span>: pd.to_numeric(</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">5</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CPI"</span>: pd.to_numeric(</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>      df_CPI[df_CPI[<span class="st">'year'</span>].between(year_range[<span class="dv">0</span>], year_range[<span class="op">-</span><span class="dv">1</span>])][<span class="st">"annualaverage"</span>].values,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Derived Columns</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Per 15k"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Fixed"</span>] <span class="op">/</span> <span class="dv">15000</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Variable/Total"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Variable"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"Total"</span>]</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Variable/CPI"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Variable"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"CPI"</span>]</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Fixed/CPI"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Fixed"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"CPI"</span>]</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder columns</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed <span class="op">=</span> df_AutoCost_VariableFixed[[<span class="st">'Year'</span>, <span class="st">'Variable/Total'</span>, <span class="st">'Variable/CPI'</span>, <span class="st">'Fixed/CPI'</span>, <span class="st">'Variable'</span>, <span class="st">'Fixed'</span>, <span class="st">'Total'</span>, <span class="st">'Per 15k'</span>, <span class="st">'CPI'</span>]]</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="plotting-trends-1" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends-1">Plotting Trends</h4>
<section id="fixedcpi-and-variablecpi" class="level5">
<h5 class="anchored" data-anchor-id="fixedcpi-and-variablecpi">Fixed/CPI and Variable/CPI</h5>
<p>This chart normalizes both fixed and variable costs by the CPI to reveal real cost trends independent of general inflation. The smoothed spline curves reduce year-to-year noise to highlight underlying patterns.</p>
<p>The green line (Fixed/CPI) shows whether fixed ownership costs are rising or falling in real terms. A rising trend means insurance, depreciation, and registration costs are outpacing inflation. The red line (Variable/CPI) does the same for operating costs.</p>
<p>Notably, both series show considerable variation, reflecting the volatility of fuel prices (which dominate variable costs) and the episodic nature of insurance cost increases. The period from 2000-2010 saw rising real costs in both categories, while the 2010s showed some moderation. Understanding these patterns helps determine whether the base year represents typical conditions or an unusual outlier.</p>
<div id="4ae426ae" class="cell" data-execution_count="29">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create smooth spline curves</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Year'</span>]</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>y_fixed <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Fixed/CPI'</span>]</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>y_variable <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Variable/CPI'</span>]</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate smooth curves</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>x_smooth <span class="op">=</span> np.linspace(x.<span class="bu">min</span>(), x.<span class="bu">max</span>(), <span class="dv">300</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>spline_fixed <span class="op">=</span> make_interp_spline(x, y_fixed, k<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>spline_variable <span class="op">=</span> make_interp_spline(x, y_variable, k<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>y_fixed_smooth <span class="op">=</span> spline_fixed(x_smooth)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>y_variable_smooth <span class="op">=</span> spline_variable(x_smooth)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot smooth lines</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>x_smooth, y<span class="op">=</span>y_fixed_smooth, linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Fixed/CPI"</span>)</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>x_smooth, y<span class="op">=</span>y_variable_smooth, linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Variable/CPI"</span>)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Trendline of Fixed/CPI and Variable/CPI (1990â€“2020)'</span>,</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost_VariableFixed[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to $40</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">40</span>)</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="average-cost-per-mile" class="level5">
<h5 class="anchored" data-anchor-id="average-cost-per-mile">Average Cost per Mile</h5>
<p>This stacked area chart visualizes the composition of total vehicle costs. The green area represents fixed costs, while the red area shows variable costs stacked on top. The total height at any year represents the total cost per 15,000 miles. Several patterns emerge:</p>
<ul>
<li>Total costs have increased over time, rising from around $4,000 in 1990 to $9,000+ in recent years</li>
<li>Variable costs (red) fluctuate more than fixed costs, visible in the undulating upper boundary</li>
<li>Fixed costs (green) grow more steadily, reflecting consistent increases in insurance premiums and vehicle prices</li>
<li>The variable cost portion occasionally spikes, particularly during periods of high oil prices (mid-2000s, early 2010s)</li>
</ul>
<p>The chart provides intuitive visual confirmation of the trend analysis while making the relative magnitudes immediately apparent to non-technical readers.</p>
<div id="ff8a1fef" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the stacked area plot</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the areas - Fixed on bottom, Variable on top</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>plt.fill_between(df_AutoCost_VariableFixed[<span class="st">'Year'</span>],</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>],</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">'#9BBB59'</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span><span class="st">'Fixed'</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>plt.fill_between(df_AutoCost_VariableFixed[<span class="st">'Year'</span>],</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>],</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>] <span class="op">+</span> df_AutoCost_VariableFixed[<span class="st">'Variable'</span>],</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">'#C0504D'</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span><span class="st">'Variable'</span>)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Total Cost per 15,000 Miles'</span>,</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USDs'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost_VariableFixed[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>plt.ylim(bottom<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Add grid</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="actual-vs-trend-comparision-1" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision-1">Actual vs Trend Comparision</h4>
<p>This comparison assesses whether 2023 costs align with long-term trends. Each row compares the actual value from the AAA data against the predicted value from a linear trend fit to 1990-2023 data.</p>
<p>â€œVariableâ€ costs show whether fuel and maintenance in 2023 are higher or lower than historical patterns would predict. Given the volatility of fuel prices, some deviation is expected. Large positive deviations suggest an unusually expensive year, while negative deviations indicate relative affordability.</p>
<p>â€œFixedâ€ costs are typically more stable, so large deviations are less common. â€œFixed per 15,000 Milesâ€ converts annual fixed costs to a per-mile basis for comparison purposes, though remember this is not a true marginal cost.</p>
<p>Analysts should investigate any large discrepancies. If actual costs substantially exceed trends, using trend-based estimates might understate current costs. If actual costs fall well below trends, it might signal a structural change in the market or data collection methodology.</p>
<div id="0c6a014c" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Variable'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Fixed'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Per 15k'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Variable'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Per 15k'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Variable'</span>, <span class="st">'Fixed'</span>, <span class="st">'Fixed per 15,000 Miles'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed_Comparision</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="auto-cost" class="level3">
<h3 class="anchored" data-anchor-id="auto-cost">Auto Cost</h3>
<p>This subsection isolates the two primary variable cost components that appear in travel demand models: fuel costs and maintenance-plus-tires. While the previous section examined total variable costs, here we separate gasoline specifically from other variable expenses.</p>
<p>Fuel costs respond directly to oil markets and refinery economics. Maintenance and tire costs respond to vehicle reliability, parts prices, and labor rates. By analyzing these separately, we can identify which component drives changes in total variable costs and assess whether they move together or independently.</p>
<p>This disaggregation also allows us to construct operating costs from first principles: calculating fuel cost per mile (price per gallon Ã· miles per gallon) and adding maintenance cost per mile. This bottom-up approach provides more transparency than using aggregated cost figures.</p>
<section id="create-dataframe-2" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe-2">Create Dataframe</h4>
<p>The dataframe extracts three series from the AAA average cost data: â€œGasâ€ (the cents-per-mile fuel cost), â€œMaintâ€ (maintenance cost per mile), and â€œTiresâ€ (tire cost per mile). In some years, maintenance and tires are reported separately; in others, theyâ€™re combined. The code uses <code>.fillna(0)</code> to handle missing values, ensuring that when only one value is present, the sum still works correctly.</p>
<p>â€œMaint+Tiresâ€ combines these two closely related costs. Both represent wear-and-tear expenses that scale with mileage. Maintenance includes oil changes, brake replacements, and routine service. Tires wear out with miles driven and must be replaced periodically. Together, they represent the non-fuel variable costs of driving.</p>
<div id="cb727c93" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>df_AutoCost <span class="op">=</span> pd.DataFrame({</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gas"</span>: pd.to_numeric(</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">1</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Maint"</span>: pd.to_numeric(</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tires"</span>: pd.to_numeric(</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span>   <span class="co"># turns "U" into NaN</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>df_AutoCost[<span class="st">"Maint+Tires"</span>] <span class="op">=</span> df_AutoCost[<span class="st">"Maint"</span>].fillna(<span class="dv">0</span>) <span class="op">+</span> df_AutoCost[<span class="st">"Tires"</span>].fillna(<span class="dv">0</span>)</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co"># View Dataframe</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>df_AutoCost</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Gas</th>
<th data-quarto-table-cell-role="th">Maint</th>
<th data-quarto-table-cell-role="th">Tires</th>
<th data-quarto-table-cell-role="th">Maint+Tires</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1990</td>
<td>5.40</td>
<td>2.10</td>
<td>0.90</td>
<td>3.00</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1991</td>
<td>6.60</td>
<td>2.20</td>
<td>0.90</td>
<td>3.10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1992</td>
<td>5.90</td>
<td>2.20</td>
<td>0.90</td>
<td>3.10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1993</td>
<td>5.90</td>
<td>2.40</td>
<td>0.90</td>
<td>3.30</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1994</td>
<td>5.60</td>
<td>2.50</td>
<td>1.00</td>
<td>3.50</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>1995</td>
<td>5.80</td>
<td>2.60</td>
<td>1.20</td>
<td>3.80</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>1996</td>
<td>5.60</td>
<td>2.80</td>
<td>1.20</td>
<td>4.00</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>1997</td>
<td>6.60</td>
<td>2.80</td>
<td>1.40</td>
<td>4.20</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>1998</td>
<td>6.20</td>
<td>3.10</td>
<td>1.40</td>
<td>4.50</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>1999</td>
<td>5.60</td>
<td>3.30</td>
<td>1.70</td>
<td>5.00</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>2000</td>
<td>6.90</td>
<td>3.60</td>
<td>1.70</td>
<td>5.30</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>2001</td>
<td>7.90</td>
<td>3.90</td>
<td>1.80</td>
<td>5.70</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>2002</td>
<td>5.90</td>
<td>4.10</td>
<td>1.80</td>
<td>5.90</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>2003</td>
<td>7.20</td>
<td>4.10</td>
<td>1.80</td>
<td>5.90</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>2004</td>
<td>6.50</td>
<td>5.40</td>
<td>0.70</td>
<td>6.10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>2005</td>
<td>8.20</td>
<td>5.30</td>
<td>0.60</td>
<td>5.90</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>2006</td>
<td>9.50</td>
<td>4.90</td>
<td>0.70</td>
<td>5.60</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>2007</td>
<td>8.90</td>
<td>4.90</td>
<td>0.70</td>
<td>5.60</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>2008</td>
<td>11.67</td>
<td>4.57</td>
<td>0.72</td>
<td>5.29</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td>2009</td>
<td>10.09</td>
<td>4.56</td>
<td>0.77</td>
<td>5.33</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>2010</td>
<td>11.36</td>
<td>4.54</td>
<td>0.83</td>
<td>5.37</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td>2011</td>
<td>12.34</td>
<td>4.44</td>
<td>0.96</td>
<td>5.40</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>2012</td>
<td>14.17</td>
<td>4.47</td>
<td>1.00</td>
<td>5.47</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td>2013</td>
<td>14.45</td>
<td>4.97</td>
<td>1.00</td>
<td>5.97</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>2014</td>
<td>13.00</td>
<td>5.06</td>
<td>0.97</td>
<td>6.03</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>2015</td>
<td>11.21</td>
<td>5.11</td>
<td>0.98</td>
<td>6.09</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>2016</td>
<td>8.45</td>
<td>5.28</td>
<td>1.00</td>
<td>6.28</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">27</th>
<td>2017</td>
<td>10.26</td>
<td>7.91</td>
<td>NaN</td>
<td>7.91</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">28</th>
<td>2018</td>
<td>11.05</td>
<td>8.21</td>
<td>NaN</td>
<td>8.21</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">29</th>
<td>2019</td>
<td>11.60</td>
<td>8.94</td>
<td>NaN</td>
<td>8.94</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">30</th>
<td>2020</td>
<td>10.66</td>
<td>9.12</td>
<td>NaN</td>
<td>9.12</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">31</th>
<td>2021</td>
<td>10.72</td>
<td>9.55</td>
<td>NaN</td>
<td>9.55</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">32</th>
<td>2022</td>
<td>17.99</td>
<td>9.68</td>
<td>NaN</td>
<td>9.68</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">33</th>
<td>2023</td>
<td>15.93</td>
<td>9.83</td>
<td>NaN</td>
<td>9.83</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="plotting-trends-2" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends-2">Plotting Trends</h4>
<p>The visualization compares fuel costs (blue line) with maintenance-plus-tires costs (red line). Dashed trend lines show the long-term trajectory of each component. Key observations:</p>
<ul>
<li>Fuel costs (blue) are consistently higher than maintenance costs and show more volatility, reflecting oil price fluctuations</li>
<li>Maintenance costs (red) increase gradually over time, likely driven by parts price inflation and increasing vehicle complexity</li>
<li>The gap between the lines varies with fuel pricesâ€”during high oil price periods, fuel costs can be 2-3 times maintenance costs</li>
<li>Both show upward trends, but fuel costs rise more steeply, meaning fuel is becoming a larger fraction of variable costs</li>
</ul>
<p>The trend lines provide predicted values for the base year that smooth out year-to-year fluctuations. If 2023 data points fall close to trend lines, using trend-based estimates is justified. Large deviations suggest the need to use actual values or investigate the causes of unusual costs.</p>
<div id="b8a32010" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed/CPI with a green line</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Gas"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Gas"</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable/CPI with a red line</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Maint+Tires"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Maint+Tires"</span>)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gas'</span>,</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Maint+Tires'</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Auto Costs'</span>,</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USDs'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits</span></span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>plt.ylim(bottom<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-34-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="actual-vs-trend-comparision-2" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision-2">Actual vs Trend Comparision</h4>
<p>This table compares 2023 actual costs against trend predictions for both fuel and maintenance-plus-tires. The â€œGasâ€ row reveals whether fuel prices in 2023 are high or low relative to the long-term trend. Fuel markets are volatile, so moderate deviations are normal. Large deviations might reflect temporary supply disruptions, geopolitical events, or unusual demand conditions.</p>
<p>The â€œMaint+Tiresâ€ row is typically more stable. Significant deviations here might indicate changes in vehicle reliability (newer vehicles requiring less maintenance), shifts in labor costs, or changes in how AAA calculates these figures.</p>
<p>For travel demand models, using trend values rather than actual values can be justified when actual values represent temporary anomalies. However, if the deviation persists across multiple years, it may signal a structural shift requiring adjustment to the model.</p>
<div id="63dc801c" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df_AutoCost_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR],</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>        df_AutoCost.loc[df_AutoCost[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Gas'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        df_AutoCost.loc[df_AutoCost[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Maint+Tires'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost[<span class="st">'Year'</span>]),</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost[<span class="st">'Gas'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost[<span class="st">'Year'</span>]),</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost[<span class="st">'Maint+Tires'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Gas'</span>, <span class="st">'Maint+Tires'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>df_AutoCost_Comparision</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Actual</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Gas</th>
<td>2023</td>
<td>15.93</td>
<td>13.93</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Maint+Tires</th>
<td>2023</td>
<td>9.83</td>
<td>8.77</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="vehicle-miles---trucks" class="level3">
<h3 class="anchored" data-anchor-id="vehicle-miles---trucks">Vehicle Miles - Trucks</h3>
<p>Average annual vehicle miles traveled (VMT) varies dramatically by truck class. Light trucks (pickups and SUVs used for personal travel) typically drive 10,000-15,000 miles per year. Medium trucks (delivery vehicles) might drive 15,000-25,000 miles. Heavy trucks (long-haul tractor-trailers) often exceed 60,000 miles annually.</p>
<p>Understanding these patterns serves two purposes. First, it helps calibrate whether our fuel economy and cost estimates are reasonableâ€”a vehicle class with unusually high or low VMT should have corresponding impacts on total fuel consumption. Second, it informs how we weight different vehicle classes when calculating fleet-average statistics.</p>
<p>This subsection tracks trends in truck VMT over time. Are trucks driving more miles as the economy grows and freight demand increases? Are efficiency improvements or modal shifts reducing truck VMT? The analysis looks at both the full 1990-2023 period and a 2000-2023 subset to check whether recent trends differ from long-term patterns.</p>
<section id="create-dataframe-3" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe-3">Create Dataframe</h4>
<p>The dataframe compiles average annual VMT for three truck categories. â€œHeavyâ€ refers to combination trucksâ€”tractor-trailers used for long-haul freight. â€œMediumâ€ covers single-unit trucksâ€”delivery vehicles, utility trucks, and other medium-duty applications. â€œLightâ€ includes pickup trucks and SUVs primarily used for personal transportation or light commercial purposes.</p>
<p>The data comes from BTS tables that compile Federal Highway Administration statistics on vehicle registration, fuel consumption, and estimated miles traveled. Dividing total miles by number of vehicles yields average VMT per vehicle. These are fleet-wide averages; individual vehicles may drive considerably more or less depending on their specific usage patterns.</p>
<div id="dd6c2c7b" class="cell" data-execution_count="35">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy.columns <span class="op">=</span> df_FE_Heavy.columns.astype(<span class="bu">str</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>df_FE_Medium.columns <span class="op">=</span> df_FE_Medium.columns.astype(<span class="bu">str</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>df_4_11.columns <span class="op">=</span> df_4_11.columns.astype(<span class="bu">str</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>df_VehicleMiles_Truck <span class="op">=</span> pd.DataFrame({</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Year"</span>: year_range,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Heavy"</span>: pd.to_numeric(</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    df_FE_Heavy.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Medium"</span>: pd.to_numeric(</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    df_FE_Medium.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Light"</span>: pd.to_numeric(</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    df_4_11.loc[<span class="dv">10</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="co"># View dataframe</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>df_VehicleMiles_Truck</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="plotting-trends-3" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends-3">Plotting Trends</h4>
<section id="section-5" class="level5">
<h5 class="anchored" data-anchor-id="section-5">1990 - 2023</h5>
<p>This chart shows VMT trends for all three truck classes over the full data period. The blue line (Heavy) shows that long-haul trucks average 50,000-70,000 miles per year with a generally flat trendâ€”these vehicles are already used intensively, and thereâ€™s limited room for further increases. The red line (Medium) shows medium trucks traveling 12,000-16,000 miles annually with moderate growth, reflecting increased delivery activity. The green line (Light) shows light trucks at 11,000-13,000 miles per year, similar to passenger cars.</p>
<p>Only the heavy truck trend line is shown here (dashed blue) to avoid visual clutter, as itâ€™s the most stable series. The relatively flat trend for heavy trucks suggests that regulatory limits on driver hours and the physical constraints of long-haul trucking have kept average VMT stable even as total freight volumes have grown (accommodated by adding more trucks rather than driving each truck further).</p>
<div id="a57edf53" class="cell" data-execution_count="36">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Heavy"</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium"</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#BE4B48"</span>, label<span class="op">=</span><span class="st">"Medium"</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light"</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#98B954"</span>, label<span class="op">=</span><span class="st">"Light"</span>)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy'</span>,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Vehicle Miles - Trucks (1990 - 2023)'</span>,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_VehicleMiles_Truck[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 80</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">80</span>)</span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="section-6" class="level5">
<h5 class="anchored" data-anchor-id="section-6">2000 - 2023</h5>
<p>This chart focuses on the more recent period to check whether trends have changed. All three trend lines are now shown (dashed).</p>
<p>Comparing to the 1990-2023 chart reveals that light and medium truck VMT patterns changed around 2000. The 2000+ trends show slight increases for medium trucks (driven by e-commerce growth and more frequent deliveries) and slight decreases for light trucks (possibly reflecting higher fuel prices making owners more selective about trip-making).</p>
<p>Heavy truck VMT remains remarkably stable across both time periods, confirming that these vehicles are operated at maximum intensity regardless of economic conditions. This stability makes heavy truck operating costs particularly sensitive to fuel price changesâ€”operators cannot significantly reduce miles to offset higher fuel costs.</p>
<div id="df85bbbc" class="cell" data-execution_count="37">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy"</span>,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Heavy"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#BE4B48"</span>, label<span class="op">=</span><span class="st">"Medium"</span>)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light"</span>,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Light"</span>)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy'</span>,</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Medium'</span>,</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Light'</span>,</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#00B050'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Vehicle Miles - Trucks (2000 - 2023)'</span>,</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_VehicleMiles_Truck[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis limits to show only 2000-2023</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">2000</span>, BASE_YEAR)</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 80</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">80</span>)</span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="actual-vs-trend-comparision-3" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision-3">Actual vs Trend Comparision</h4>
<p>This comparison table shows 2023 VMT estimates using two different trend periods: 1990-2023 and 2000-2023.</p>
<p>The first three rows use the full data period. The second three rows use only post-2000 data. Comparing these reveals whether recent trends differ from long-term patterns. If the two trend estimates are similar, it suggests stable, consistent behavior. Large differences indicate a structural break around 2000, making recent trends more relevant for current-year estimates.</p>
<p>For heavy trucks, both approaches yield similar results, confirming the stability of this market segment. For light and medium trucks, the estimates may differ more, reflecting the changing roles of these vehicles in the economy. Medium truck VMT has likely increased with e-commerce growth, while light truck VMT may have declined as fuel economy concerns limited discretionary driving.</p>
<div id="f4957175" class="cell" data-execution_count="38">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df_VMTrucks_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Heavy'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Medium'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Light'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Last 3: Use only data from 2000+</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Heavy'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Medium'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Light'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Heavy Trucks  - 1990+'</span>, <span class="st">'Medium Trucks  - 1990+'</span>, <span class="st">'Light Trucks  - 1990+'</span>,</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a><span class="st">'Heavy Trucks  - 2000+'</span>, <span class="st">'Medium Trucks  - 2000+'</span>, <span class="st">'Light Trucks  - 2000+'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: '1980+' should be changed to '1990+'</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>df_VMTrucks_Comparision</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
</section>
<section id="fuel-economy" class="level3">
<h3 class="anchored" data-anchor-id="fuel-economy">Fuel Economy</h3>
<p>Fuel economyâ€”miles traveled per gallon of fuel consumedâ€”directly determines fuel costs per mile. A vehicle that achieves 25 miles per gallon at $3.00/gallon costs $0.12 per mile for fuel. One that achieves only 6 miles per gallon costs $0.50 per mileâ€”more than four times as much.</p>
<p>Fuel economy has improved substantially over time due to technological advances (better engines, transmissions, aerodynamics) and regulatory pressure (CAFE standards for cars and light trucks, fuel economy standards for heavy trucks). However, improvements vary by vehicle class. Light-duty vehicles have seen dramatic gains, rising from under 20 mpg in the 1980s to over 25 mpg today. Heavy trucks have improved more modestly, from 5.5 to 6.5 mpg, because the physics of moving heavy loads limits efficiency gains.</p>
<p>This subsection tracks fuel economy trends for three vehicle classes: light-duty (cars and small SUVs), medium-duty (delivery trucks), and heavy-duty (tractor-trailers). By comparing actual 2023 fuel economy against long-term trends, we can assess whether recent values are typical or represent unusual efficiency improvements or setbacks.</p>
<section id="create-dataframe-4" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe-4">Create Dataframe</h4>
<p>The dataframe compiles fuel economy data for three truck/vehicle categories spanning 1980-2023. The year range starts earlier than other series (1980 and 1985 are included) to capture the full arc of fuel economy improvement following the oil crises of the 1970s.</p>
<p>â€œLight Dutyâ€ comes from BTS Table 4-23, which tracks average fuel economy of the U.S. light-duty vehicle fleetâ€”both cars and light trucks weighted by their share of vehicle miles traveled. This represents actual on-road fuel economy, which is typically 20-25% lower than EPA test ratings due to aggressive driving, air conditioning use, cold starts, and other real-world factors.</p>
<p>â€œMedium Dutyâ€ and â€œHeavy Dutyâ€ come from BTS tables on single-unit and combination trucks. These are calculated by dividing total miles traveled by total fuel consumed for each truck class. Note that a calculation error in the original analysis has been correctedâ€”the code now properly extracts fuel economy (row 4) rather than fuel consumption (row 5).</p>
<div id="b4b78704" class="cell" data-execution_count="39">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">1985</span>] <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year of the range should be one more than desired</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty.columns <span class="op">=</span> df_FE_LightDuty.columns.astype(<span class="bu">str</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>df_FE_Medium.columns <span class="op">=</span> df_FE_Medium.columns.astype(<span class="bu">str</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy.columns <span class="op">=</span> df_FE_Heavy.columns.astype(<span class="bu">str</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy <span class="op">=</span> pd.DataFrame({</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Year"</span>: year_range,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Light Duty"</span>: pd.to_numeric(</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    df_FE_LightDuty.loc[<span class="dv">0</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Medium Duty"</span>: pd.to_numeric(</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    df_FE_Medium.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values, <span class="co"># FIXED: Mistake in original calculation; use this instead</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Heavy Duty"</span>: pd.to_numeric(</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    df_FE_Heavy.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values, <span class="co"># FIXED: Mistake in original calculation; use this instead</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Light Duty</th>
<th data-quarto-table-cell-role="th">Medium Duty</th>
<th data-quarto-table-cell-role="th">Heavy Duty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1980</td>
<td>14.900000</td>
<td>5.751024</td>
<td>5.267929</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1985</td>
<td>16.500000</td>
<td>6.141193</td>
<td>5.573818</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1990</td>
<td>18.800000</td>
<td>6.210733</td>
<td>5.847737</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1991</td>
<td>19.500000</td>
<td>6.472767</td>
<td>5.749700</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1992</td>
<td>19.500000</td>
<td>6.540576</td>
<td>5.780000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>1993</td>
<td>19.200000</td>
<td>6.688396</td>
<td>5.810000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>1994</td>
<td>19.391913</td>
<td>6.785380</td>
<td>5.840000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>1995</td>
<td>19.602243</td>
<td>6.832257</td>
<td>5.860000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>1996</td>
<td>19.691458</td>
<td>6.834582</td>
<td>5.912689</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>1997</td>
<td>19.700000</td>
<td>6.985442</td>
<td>6.136631</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>1998</td>
<td>19.792902</td>
<td>9.977427</td>
<td>5.102120</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11</th>
<td>1999</td>
<td>19.616980</td>
<td>9.872225</td>
<td>5.045112</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12</th>
<td>2000</td>
<td>20.025918</td>
<td>7.372130</td>
<td>5.260719</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">13</th>
<td>2001</td>
<td>20.235501</td>
<td>7.488557</td>
<td>5.351787</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">14</th>
<td>2002</td>
<td>20.081724</td>
<td>7.350921</td>
<td>5.239386</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">15</th>
<td>2003</td>
<td>19.500192</td>
<td>8.754982</td>
<td>5.883906</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">16</th>
<td>2004</td>
<td>19.644668</td>
<td>8.755922</td>
<td>5.885261</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>2005</td>
<td>20.174052</td>
<td>8.261740</td>
<td>5.201682</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">18</th>
<td>2006</td>
<td>20.435839</td>
<td>8.154805</td>
<td>5.058225</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">19</th>
<td>2007</td>
<td>21.275150</td>
<td>7.354144</td>
<td>5.960288</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">20</th>
<td>2008</td>
<td>21.824862</td>
<td>7.399570</td>
<td>6.015066</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">21</th>
<td>2009</td>
<td>21.696378</td>
<td>7.396154</td>
<td>5.992856</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">22</th>
<td>2010</td>
<td>21.525254</td>
<td>7.335344</td>
<td>5.873992</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">23</th>
<td>2011</td>
<td>21.367594</td>
<td>7.302138</td>
<td>5.812110</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">24</th>
<td>2012</td>
<td>21.550948</td>
<td>7.345698</td>
<td>5.848071</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">25</th>
<td>2013</td>
<td>21.634777</td>
<td>7.349478</td>
<td>5.849476</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">26</th>
<td>2014</td>
<td>21.402991</td>
<td>7.338686</td>
<td>5.832550</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">27</th>
<td>2015</td>
<td>21.979313</td>
<td>7.380038</td>
<td>5.893747</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">28</th>
<td>2016</td>
<td>22.038465</td>
<td>7.389125</td>
<td>5.906246</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">29</th>
<td>2017</td>
<td>22.274363</td>
<td>7.442531</td>
<td>5.977236</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">30</th>
<td>2018</td>
<td>22.497301</td>
<td>7.506099</td>
<td>6.073034</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">31</th>
<td>2019</td>
<td>22.243634</td>
<td>7.489126</td>
<td>6.047698</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">32</th>
<td>2020</td>
<td>22.980009</td>
<td>7.564619</td>
<td>6.160965</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">33</th>
<td>2021</td>
<td>22.366546</td>
<td>7.667027</td>
<td>6.418956</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">34</th>
<td>2022</td>
<td>22.767227</td>
<td>7.928816</td>
<td>6.912164</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">35</th>
<td>2023</td>
<td>22.584552</td>
<td>7.813428</td>
<td>6.681840</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="plotting-trends-4" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends-4">Plotting Trends</h4>
<p>This chart shows fuel economy trends for all three vehicle classes with trend lines. Several important patterns emerge:</p>
<ul>
<li>The blue line (Light Duty) shows substantial improvement, rising from about 16 mpg in 1980 to over 24 mpg by 2023. This reflects CAFE standards requiring manufacturers to improve fleet fuel economy, along with technological improvements like direct fuel injection, turbocharging, continuously variable transmissions, and cylinder deactivation. The trend is approximately linear, suggesting consistent progress over time.</li>
<li>The red line (Medium Duty) shows more modest improvement, from about 6.5 to 8 mpg. Medium trucks face conflicting pressures: efficiency improvements versus increasing vehicle size and capability. The trend is flatter than light-duty, indicating slower progress.</li>
<li>The green line (Heavy Duty) is flattest of all, improving from about 5.5 to 6.0 mpg. Heavy truck fuel economy is limited by fundamental physicsâ€”aerodynamic drag and rolling resistance of a 80,000-pound vehicle. Recent regulations requiring aerodynamic improvements (side skirts, trailer tails) and low-rolling-resistance tires have helped, but gains are incremental.</li>
</ul>
<p>The trend lines provide expected 2023 values that smooth out year-to-year variation from weather, economic conditions, and data collection variability.</p>
<div id="11f95f03" class="cell" data-execution_count="40">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light Duty"</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Light Duty"</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium Duty"</span>,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Medium Duty"</span>)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy Duty"</span>,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Heavy Duty"</span>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Light Duty'</span>,</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Medium Duty'</span>,</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy Duty'</span>,</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#00B050'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Fuel Economy (miles per gallon)'</span>,</span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles Travelled per Gallon'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_FuelEconomy[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 25</span></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">25</span>)</span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-41-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="actual-vs-trend-comparision-4" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision-4">Actual vs Trend Comparision</h4>
<p>This table compares actual 2023 fuel economy against trend-based predictions for each vehicle class.</p>
<p>The â€œLight Dutyâ€ comparison reveals whether recent improvements in passenger vehicle efficiency are ahead of, behind, or on track with the long-term trend. If actual values exceed the trend, it might reflect a particularly good year for fuel economyâ€”perhaps high gas prices encouraged purchasing more efficient vehicles. If actual values fall below the trend, it could indicate a shift toward larger vehicles or more aggressive driving.</p>
<p>â€œMedium Dutyâ€ and â€œHeavy Dutyâ€ comparisons are similarly revealing. These markets respond less to consumer preferences and more to regulatory requirements and operational economics. Fleet operators maximize efficiency to reduce fuel costs, so deviations from trend likely reflect regulatory changes or technological breakthroughs rather than behavioral shifts.</p>
<p>For operating cost calculations, using trend values is generally appropriate for fuel economy because these represent long-term technological capability rather than short-term market fluctuations. However, if actual values consistently exceed trends for several years, it may indicate a structural improvement worth incorporating.</p>
<div id="d28819dd" class="cell" data-execution_count="41">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light Duty'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium Duty'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy Duty'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Light Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Medium Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Heavy Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Light Duty'</span>, <span class="st">'Medium Duty'</span>, <span class="st">'Heavy Duty'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy_Comparision</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Actual</th>
<th data-quarto-table-cell-role="th">Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Light Duty</th>
<td>2023</td>
<td>22.58</td>
<td>23.14</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Medium Duty</th>
<td>2023</td>
<td>7.81</td>
<td>7.96</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Heavy Duty</th>
<td>2023</td>
<td>6.68</td>
<td>6.18</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="fuel-costs" class="level3">
<h3 class="anchored" data-anchor-id="fuel-costs">Fuel Costs</h3>
<p>Fuel prices are the most volatile component of vehicle operating costs. Unlike fuel economy (which changes gradually with fleet turnover) or maintenance costs (which increase slowly with parts and labor inflation), fuel prices can swing 50% or more in a single year due to crude oil markets, refinery outages, geopolitical events, and seasonal demand patterns.</p>
<p>Regional variations in fuel prices also matter. The Rocky Mountain region (which includes Utah) typically has prices 5-15% different from the national average due to distance from refineries, pipeline capacity constraints, and regional fuel formulation requirements. Using region-specific prices improves the accuracy of operating cost estimates for our study area.</p>
<p>This subsection compiles daily fuel price data for both gasoline and diesel in the Rocky Mountain region from 1994 through 2024. We analyze both the full 30-year period and a more recent 20-year window (2005-2024) to assess whether long-term trends differ from recent patterns. This is particularly important given the oil price spike of 2008, the collapse in 2014-2016, and the 2020-2022 pandemic-related volatility.</p>
<section id="create-dataframe-5" class="level4">
<h4 class="anchored" data-anchor-id="create-dataframe-5">Create Dataframe</h4>
<p>The dataframe merges gasoline and diesel price series into a single time series dataset spanning 1994-2024. The EIA publishes weekly prices, but we match them to a daily date range to enable precise date-based lookups.</p>
<p>â€œGasoline $/galâ€ contains the retail price for all grades of gasoline in the Rocky Mountain region. This is a volume-weighted average of regular, midgrade, and premium grades reflecting actual consumer purchases. About 85% of gasoline sold is regular grade.</p>
<p>â€œDiesel $/galâ€ contains the retail price for on-highway diesel fuel (No.&nbsp;2 diesel) in the Rocky Mountain region. This is the fuel type used by medium and heavy trucks. Off-highway diesel (used in agriculture and construction) has lower taxes and is not included.</p>
<p>Missing values appear as NaN (Not a Number). These typically occur in the first few years when diesel price reporting was less comprehensive. The code handles these properly by dropping NaN values before fitting trend lines.</p>
<div id="2d40308f" class="cell" data-execution_count="42">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the date range between the desired dates</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>date_range <span class="op">=</span> pd.date_range(<span class="st">"1994-01-03"</span>, <span class="st">"2024-12-31"</span>, freq<span class="op">=</span><span class="st">"D"</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>df_FuelCosts <span class="op">=</span> pd.DataFrame({</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Date"</span>: df_RetailGasPrices[df_RetailGasPrices[<span class="st">'Date'</span>].isin(date_range)][<span class="st">'Date'</span>].values</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge Gasoline and Diesel prices directly</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>df_FuelCosts <span class="op">=</span> df_FuelCosts.merge(df_RetailGasPrices[[<span class="st">'Date'</span>, <span class="st">'Weekly Rocky Mountain All Grades All Formulations Retail Gasoline Prices  (Dollars per Gallon)'</span>]], on<span class="op">=</span><span class="st">'Date'</span>, how<span class="op">=</span><span class="st">'left'</span>) <span class="op">\</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>                            .merge(df_RetailDieselPrices[[<span class="st">'Date'</span>, <span class="st">'Weekly Rocky Mountain No 2 Diesel Retail Prices  (Dollars per Gallon)'</span>]], on<span class="op">=</span><span class="st">'Date'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>df_FuelCosts.rename(columns<span class="op">=</span>{</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Weekly Rocky Mountain All Grades All Formulations Retail Gasoline Prices  (Dollars per Gallon)'</span>: <span class="st">'Gasoline $/gal'</span>,</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Weekly Rocky Mountain No 2 Diesel Retail Prices  (Dollars per Gallon)'</span>: <span class="st">'Diesel $/gal'</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>df_FuelCosts</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Gasoline $/gal</th>
<th data-quarto-table-cell-role="th">Diesel $/gal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1994-01-03</td>
<td>1.085</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1994-01-10</td>
<td>1.065</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1994-01-17</td>
<td>1.092</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1994-01-24</td>
<td>1.075</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1994-01-31</td>
<td>1.063</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1613</th>
<td>2024-12-02</td>
<td>2.912</td>
<td>3.431</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1614</th>
<td>2024-12-09</td>
<td>2.910</td>
<td>3.329</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1615</th>
<td>2024-12-16</td>
<td>2.964</td>
<td>3.357</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1616</th>
<td>2024-12-23</td>
<td>3.014</td>
<td>3.328</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">1617</th>
<td>2024-12-30</td>
<td>3.007</td>
<td>3.370</td>
</tr>
</tbody>
</table>

<p>1618 rows Ã— 3 columns</p>
</div>
</div>
</div>
</section>
<section id="plotting-trends-5" class="level4">
<h4 class="anchored" data-anchor-id="plotting-trends-5">Plotting Trends</h4>
<section id="retail-gasoline-prices---rocky-mountain-1994---2024" class="level5">
<h5 class="anchored" data-anchor-id="retail-gasoline-prices---rocky-mountain-1994---2024">Retail Gasoline Prices - Rocky Mountain (1994 - 2024)</h5>
<p>This chart shows three decades of gasoline prices with a linear trend line (red). The price series is highly volatile, reflecting the turbulent nature of oil markets:</p>
<ul>
<li>1994-1999: Relatively stable around $1.00-1.50/gallon</li>
<li>2000-2008: Rapid increase to over $4.00/gallon, driven by growing global demand and geopolitical tensions</li>
<li>2008-2009: Sharp collapse during the financial crisis</li>
<li>2010-2014: Sustained high prices around $3.50/gallon</li>
<li>2014-2016: Dramatic decline due to U.S. shale oil production and OPEC supply increases</li>
<li>2017-2019: Moderate recovery</li>
<li>2020: Brief collapse during COVID-19 pandemic lockdowns</li>
<li>2021-2024: Rapid increase then gradual decline</li>
</ul>
<p>The linear trend line (red) shows an upward slope of approximately 3-4 cents per year over the 30-year period, indicating that despite enormous volatility, gasoline prices have risen faster than general inflation. However, the trend line poorly captures the actual price dynamicsâ€”it cuts through the middle of wild swings above and below. This highlights the limitation of using simple linear trends for highly volatile commodities.The y-axis extends to $6.00 per gallon to accommodate historical peaks. The x-axis shows every other year to avoid label crowding. Grid lines aid in reading specific price levels. For 2023 estimates, the question becomes: should we use the actual price from that year, or a smoothed trend value? Given the volatility, using a specific date (like July 1, 2023, representing mid-year conditions) may better reflect what travelers actually experienced than a long-term trend that averages over boom-and-bust cycles.</p>
<div id="c9b96c4c" class="cell" data-execution_count="43">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Gasoline $/gal"</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line inline</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[<span class="st">'Date'</span>],</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Gasoline Prices ($ per gallon) - Rocky Mountain (1994 - 2024)'</span>,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique()[::<span class="dv">2</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>plt.xlim(df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">min</span>(), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-44-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="retail-gasoline-prices---rocky-mountain-2005---2024" class="level5">
<h5 class="anchored" data-anchor-id="retail-gasoline-prices---rocky-mountain-2005---2024">Retail Gasoline Prices - Rocky Mountain (2005 - 2024)</h5>
<p>This chart focuses on the most recent 20 years to assess whether recent price behavior differs from the long-term pattern. The same data is shown, but with the trend line (red) fitted only to 2005-2024 data.</p>
<p>Comparing this trend to the 1994-2024 trend reveals whether gasoline price dynamics have changed. If the 2005+ trend is steeper, recent price increases are outpacing historical patterns, perhaps due to sustained global demand or reduced spare production capacity. If the recent trend is flatter, it suggests a structural changeâ€”perhaps shale oil production has created a price ceiling by bringing new supply online whenever prices rise too high.</p>
<p>The 2005 starting point deliberately excludes the very low prices of the 1990s, which may no longer be relevant given changes in global oil markets, climate policy, and production costs. For a 2023 base year, a trend fitted to more recent data may provide more relevant context than one that includes conditions from three decades ago.</p>
<p>All years are shown on the x-axis for this 20-year window, as there are few enough to display without crowding. The chart makes clear that even in this shorter period, volatility remains extremeâ€”the range from low to high still exceeds $2.00 per gallon.</p>
<div id="b8d0e356" class="cell" data-execution_count="44">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Gasoline $/gal"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line for filtered data inline</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>],</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Gasoline Prices ($ per gallon) - Rocky Mountain (2005 - 2024)'</span>, fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique(), rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>plt.xlim(pd.to_datetime(<span class="st">"2005-01-01"</span>), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-45-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="retail-diesel-prices---rocky-mountain-1994---2024" class="level5">
<h5 class="anchored" data-anchor-id="retail-diesel-prices---rocky-mountain-1994---2024">Retail Diesel Prices - Rocky Mountain (1994 - 2024)</h5>
<p>This chart parallels the gasoline analysis but for diesel fuel, which powers medium and heavy trucks. Diesel prices follow similar patterns to gasoline but with some distinct characteristics:</p>
<ul>
<li>Diesel typically costs $0.10-0.50 more per gallon than gasoline due to higher refining costs and federal excise tax differences (24.4 cents/gallon for diesel vs.&nbsp;18.4 cents/gallon for gasoline)</li>
<li>The diesel-gasoline price spread varies over time based on refinery economics and relative supply-demand conditions</li>
<li>Diesel prices often lead gasoline pricesâ€”when crude oil costs rise, refineries pass through costs to diesel markets first because commercial customers are less price-sensitive than retail gasoline consumers</li>
<li>Cold weather can create diesel price spikes because heating oil (chemically similar to diesel) competes for the same refinery output</li>
</ul>
<p>The red trend line shows diesel prices rising at roughly the same rate as gasoline over the full 30-year period. The 1994-2003 period has some data gaps (visible as breaks in the blue line) when regional diesel price reporting was less comprehensive. These gaps are handled by the code through <code>.dropna()</code> operations that remove missing values before analysis. The chart uses the same y-axis scale ($0-6/gallon) as the gasoline charts to facilitate direct comparison. Diesel prices generally track in the upper portion of this range, consistently above gasoline.</p>
<div id="47859ba9" class="cell" data-execution_count="45">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Diesel $/gal"</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line inline</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>],</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>]</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>]</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Diesel Prices ($ per gallon) - Rocky Mountain (1994 - 2024)'</span>,</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique()[::<span class="dv">2</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>plt.xlim(df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">min</span>(), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 5</span></span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-46-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="retail-diesel-prices---rocky-mountain-2005---2024" class="level5">
<h5 class="anchored" data-anchor-id="retail-diesel-prices---rocky-mountain-2005---2024">Retail Diesel Prices - Rocky Mountain (2005 - 2024)</h5>
<p>This chart examines recent diesel price trends, fitting the trend line only to 2005-2024 data. The more recent period shows diesel prices becoming particularly volatile in 2021-2022, when supply chain disruptions, reduced refining capacity, and geopolitical factors created unusual price pressures.</p>
<p>The post-2005 trend may differ from the long-term trend for several reasons:</p>
<ul>
<li>U.S. ultra-low sulfur diesel requirements (implemented 2006-2010) changed refining economics</li>
<li>Growing diesel exports to Europe and Latin America tightened domestic supplies</li>
<li>Hurricane damage to Gulf Coast refineries reduced diesel production capacity</li>
<li>Renewable diesel production (using vegetable oils and waste fats) began competing for market share</li>
</ul>
<p>For truck operating costs, diesel price trends are critical because fuel represents 20-40% of total heavy truck operating expenses. Even a 10-cent-per-gallon change in diesel prices can significantly impact freight costs and trucking company profitability. The difference between using a 1994-2024 trend versus a 2005-2024 trend could change operating cost estimates by several cents per mileâ€”enough to matter for policy analysis.</p>
<p>All x-axis labels are shown for the 20-year window. The filtering of data to 2005+ is visible in the chart limits. The code properly handles the filtering by applying it both to the displayed data and to the trend line calculation, ensuring consistency.</p>
<div id="e80cb97b" class="cell" data-execution_count="46">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Diesel $/gal"</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot regression line for dates from 2005 onwards</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>],</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Diesel $/gal'</span>].dropna()</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Diesel $/gal'</span>].dropna()</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Diesel Prices ($ per gallon) - Rocky Mountain (2005 - 2024)'</span>,</span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique(), rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>plt.xlim(pd.to_datetime(<span class="st">"2005-01-01"</span>), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-47-output-1.png" width="949" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="actual-vs-trend-comparision-5" class="level4">
<h4 class="anchored" data-anchor-id="actual-vs-trend-comparision-5">Actual vs Trend Comparision</h4>
<section id="section-7" class="level5">
<h5 class="anchored" data-anchor-id="section-7">1994 - 2024</h5>
<p>This table shows trend-based price estimates for three specific dates using the full 30-year trend:</p>
<ul>
<li>January 1, 2019: A pre-pandemic baseline for comparison</li>
<li>December 31, 2023: Year-end conditions for the base year</li>
<li>July 1, 2023: Mid-year conditions, often used as an annual average proxy</li>
</ul>
<p>The three dates reveal how much prices varied within 2023 and between 2019 and 2023. If July 2023 prices are close to the trend line, using trend-based estimates is justified. If actual prices deviate significantly, it may indicate an unusual year requiring direct use of actual prices rather than smoothed trends.</p>
<p>The table presents values to three decimal places (e.g., $3.245/gallon) to enable precise calculations. When fuel economy is 20+ mpg, even small price differences of a few cents per gallon translate to measurable differences in cost per mile.</p>
<p>Comparing gasoline and diesel trends shows whether the historical price spread is widening or narrowing. If diesel trends are rising faster than gasoline trends, it suggests structural factors are making diesel relatively more expensive over time.</p>
<div id="e0aa6d30" class="cell" data-execution_count="47">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>comparison_dates <span class="op">=</span> [pd.to_datetime(<span class="st">"2019-01-01"</span>), pd.to_datetime(<span class="st">"2023-12-31"</span>), pd.to_datetime(<span class="st">"2023-07-01"</span>)]</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_1 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gasoline Trend'</span>: [</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Gasoline $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Diesel Trend'</span>: [</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>comparison_dates).<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Gasoline Trend</th>
<th data-quarto-table-cell-role="th">Diesel Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2019-01-01</th>
<td>3.193</td>
<td>3.568</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2023-12-31</th>
<td>3.603</td>
<td>4.074</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2023-07-01</th>
<td>3.562</td>
<td>4.023</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="section-8" class="level5">
<h5 class="anchored" data-anchor-id="section-8">2005 - 2024</h5>
<p>This table repeats the analysis using only post-2005 data to fit the trends. Comparing this table to the 1994-2024 results reveals whether recent trends differ from long-term patterns.</p>
<p>If the 2005-2024 trend estimates are higher than the 1994-2024 estimates for the same dates, it indicates prices have been rising faster in recent years than the long-term average would suggest. This could reflect:</p>
<ul>
<li>Depletion of low-cost oil resources requiring more expensive production</li>
<li>Growth in global demand outpacing supply growth</li>
<li>Climate policies or carbon pricing adding to fuel costs</li>
<li>Reduced refining capacity as older refineries close without replacement</li>
</ul>
<p>Conversely, if 2005-2024 trends are lower, it might reflect:</p>
<ul>
<li>Shale oil production creating downward price pressure</li>
<li>Improved vehicle efficiency reducing demand</li>
<li>Economic shifts away from fuel-intensive activities</li>
</ul>
<p>For operating cost calculations, the choice between long-term and recent trends can significantly impact results. If recent trends are more representative of current market conditions, using them produces more accurate estimates. If recent years represent a temporary deviation from long-term patterns, the full-period trend may be more appropriate.</p>
<p>The three-decimal-place precision enables analysts to see small but meaningful differences between the two trend periods. Differences of even $0.10/gallon translate to 0.4-0.5 cents per mile for light-duty vehicles and 1.5-2.0 cents per mile for heavy trucks.</p>
<div id="86c8b885" class="cell" data-execution_count="48">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>comparison_dates <span class="op">=</span> [pd.to_datetime(<span class="st">"2019-01-01"</span>), pd.to_datetime(<span class="st">"2023-12-31"</span>), pd.to_datetime(<span class="st">"2023-07-01"</span>)]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for dates &gt;= 2005-01-01 and fit trends</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>date_filter <span class="op">=</span> pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]) <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_2 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gasoline Trend'</span>: [</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Gasoline $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Diesel Trend'</span>: [</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>comparison_dates).<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Gasoline Trend</th>
<th data-quarto-table-cell-role="th">Diesel Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2019-01-01</th>
<td>3.108</td>
<td>3.480</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2023-12-31</th>
<td>3.269</td>
<td>3.704</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2023-07-01</th>
<td>3.253</td>
<td>3.682</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="auto-operating-costs" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="auto-operating-costs"><span class="header-section-number">4</span> Auto Operating Costs</h2>
<p>All the preceding analysisâ€”fuel prices, fuel economy, maintenance costs, and trend evaluationsâ€”now comes together to calculate the bottom-line metric: operating cost in cents per mile for each vehicle class. This is the number that enters travel demand models and informs policy analysis.</p>
<p>The calculation follows a simple formula for each vehicle class: <code>Operating Cost (cents/mile) = [Fuel Price ($/gallon) Ã· Fuel Economy (miles/gallon) Ã— 100] + Maintenance Cost (cents/mile)</code></p>
<p>The first term converts fuel price and economy into fuel cost per mile. Dividing dollars per gallon by miles per gallon yields dollars per mile; multiplying by 100 converts to cents per mile. The second term adds non-fuel variable costs (maintenance and tires). Four vehicle classes receive separate calculations:</p>
<ol type="1">
<li>AOC_Auto: Passenger cars and car-based SUVs</li>
<li>AOC_LT: Light-duty trucks (pickups, SUVs, vans)</li>
<li>AOC_MD: Medium-duty trucks (single-unit delivery and commercial trucks)</li>
<li>AOC_HV: Heavy-duty trucks (combination tractor-trailers)</li>
</ol>
<p>Each class uses fuel type (gasoline vs.&nbsp;diesel), fuel economy, and maintenance costs appropriate to that vehicle category. The calculations explicitly show each component to maintain transparency and enable validation.</p>
<div id="d98d2644" class="cell" data-execution_count="49">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autos</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>AOC_Auto <span class="op">=</span> (</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get gasoline price per gallon for July 2023</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Gasoline Trend'</span>] <span class="op">/</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Divide by fuel economy (miles per gallon) to get gallons per mile</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Light Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span>  <span class="co"># Convert to cents</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add maintenance and tire costs per mile (already in cents)</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>]</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Light Duty Trucks</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>AOC_LT <span class="op">=</span> (</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: (price per gallon / mpg) * 100 cents per dollar</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Gasoline Trend'</span>] <span class="op">/</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    df_FE_SizeClass_1[df_FE_SizeClass_1[<span class="st">'Manufacturer</span><span class="ch">\'</span><span class="st">s gross vehicle weight class'</span>] <span class="op">==</span> <span class="st">'Light truck subtotal (1â€“2)'</span>][<span class="st">'2002 VIUS'</span>].iloc[<span class="dv">0</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>]</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Medium Duty Trucks</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>AOC_MD <span class="op">=</span> (</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: diesel price / medium duty mpg * 100</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Diesel Trend'</span>] <span class="op">/</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Medium Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost: approximation as average of light and heavy</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    (df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>] <span class="op">+</span> (df_RepairMaintenanceCost_Heavy[<span class="st">'CostMile'</span>].mean() <span class="op">*</span> <span class="dv">100</span>)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Heavy Duty Trucks</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>AOC_HV <span class="op">=</span> (</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: diesel price / heavy duty mpg * 100</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Diesel Trend'</span>] <span class="op">/</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Heavy Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>    (df_RepairMaintenanceCost_Heavy[<span class="st">'CostMile'</span>].mean() <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Letâ€™s examine each calculation in detail:</p>
<p><strong>AOC_Auto (Automobiles):</strong></p>
<ul>
<li>Uses July 1, 2023 gasoline price from the 1994-2024 trend (df_FuelCost_Comparison_1)</li>
<li>Divides by light-duty fuel economy trend value for 2023 (df_FuelEconomy_Comparision)</li>
<li>Multiplies by 100 to convert dollars per mile to cents per mile</li>
<li>Adds maintenance and tires cost trend value for 2023 (df_AutoCost_Comparision)</li>
</ul>
<p>This represents the cost per mile for a typical passenger car under mid-year 2023 conditions. The use of trend values smooths out year-to-year volatility to produce a stable estimate.</p>
<p><strong>AOC_LT (Light Trucks):</strong></p>
<ul>
<li>Uses the same July 1, 2023 gasoline price (light trucks use gasoline, not diesel)</li>
<li>Divides by the fuel economy for light truck subtotal from the 2002 VIUS survey (df_FE_SizeClass_1)</li>
<li>This 2002 value (16.2 mpg) is older than ideal but represents the most recent detailed survey of light truck fuel economy by weight class</li>
<li>Adds the same maintenance cost as automobiles, as light trucks have similar service requirements</li>
</ul>
<p>The light truck calculation uses somewhat older fuel economy data because more recent surveys were discontinued. The 2002 value likely understates current light truck efficiency, as fuel economy has improved since then, meaning this calculation may slightly overestimate light truck operating costs.</p>
<p><strong>AOC_MD (Medium Duty Trucks):</strong></p>
<ul>
<li>Uses July 1, 2023 diesel price (medium trucks predominantly use diesel engines)</li>
<li>Divides by medium-duty fuel economy trend for 2023</li>
<li>Adds maintenance costs estimated as the average of light-duty maintenance (from AAA data) and heavy-duty maintenance (from trucking industry surveys)</li>
</ul>
<p>The maintenance cost approximation acknowledges that medium trucks fall between passenger vehicles and heavy trucks in terms of service intensity and costs. They require more frequent maintenance than cars but less than tractor-trailers.</p>
<p><strong>AOC_HV (Heavy Duty Trucks):</strong></p>
<ul>
<li>Uses July 1, 2023 diesel price</li>
<li>Divides by heavy-duty fuel economy trend for 2023 (typically around 6 mpg)</li>
<li>Adds heavy truck maintenance costs from American Transportation Research Institute data (converted from dollars per mile to cents per mile by multiplying by 100)</li>
</ul>
<p>Heavy trucks have the highest operating costs due to poor fuel economy (large engines moving heavy loads) and intensive maintenance requirements (high annual mileage and severe duty cycles requiring frequent service).</p>
<p>The calculations use a mix of actual 2023 data and trend-based estimates depending on data availability and volatility. Fuel prices use mid-year 2023 values to represent typical conditions. Fuel economy and maintenance use trend values to smooth short-term fluctuations.</p>
</section>
<section id="export" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="export"><span class="header-section-number">5</span> Export</h2>
<p>The final output table presents the culmination of this analysis: operating costs for the base year 2023 compared to the previous calculation from 2019. This comparison reveals how operating costs have changed and whether the changes are consistent with underlying trends in fuel prices, fuel economy, and maintenance costs.</p>
<p>The four vehicle classes represent the essential categories for travel demand modeling: * Personal vehicles (autos and light trucks) used for household travel * Commercial vehicles (medium and heavy trucks) used for freight movement</p>
<p>Each class has distinct cost structures reflecting their different technologies, usage patterns, and operational requirements. Monitoring how these costs evolve over time helps transportation planners understand changing incentives for travel mode choice, vehicle type choice, and trip-making decisions.</p>
<div id="e8ef5fba" class="cell" data-execution_count="50">
<details class="code-fold">
<summary>Show the code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataframe compiling data</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>df_AOC_export <span class="op">=</span> pd.DataFrame({</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Auto Operating Costs'</span>: [<span class="st">'AOC_Auto'</span>, <span class="st">'AOC_LT'</span>, <span class="st">'AOC_MD'</span>, <span class="st">'AOC_HV'</span>],</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'2019 Cost (cent/mile)'</span>: [<span class="fl">21.7</span>, <span class="fl">27.3</span>, <span class="fl">55.5</span>, <span class="fl">74.3</span>], <span class="co"># From 2019 Excel Calculations</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'2023 Cost (cent/mile)'</span>: [</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>      AOC_Auto.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>      AOC_LT.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>      AOC_MD.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>      AOC_HV.<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>df_AOC_export</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Auto Operating Costs</th>
<th data-quarto-table-cell-role="th">2019 Cost (cent/mile)</th>
<th data-quarto-table-cell-role="th">2023 Cost (cent/mile)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>AOC_Auto</td>
<td>21.7</td>
<td>24.2</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>AOC_LT</td>
<td>27.3</td>
<td>30.8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>AOC_MD</td>
<td>55.5</td>
<td>62.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>AOC_HV</td>
<td>74.3</td>
<td>80.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The comparison table shows operating costs for both 2019 and 2023, revealing several important trends:</p>
<ul>
<li><strong>Automobiles (AOC_Auto):</strong> The increase from 21.7 to <code>python AOC_Auto.round(1)</code> cents per mile reflects changes in gasoline prices and offsetting improvements in fuel economy. If the increse is modest (a few cents), it suggests that fuel economy gains have partially offset fuel price increases. A larger increase indicates that fuel prices rose faster than efficiency improved.</li>
<li><strong>Light Trucks (AOC_LT):</strong> The increase from 27.3 to <code>python AOC_LT.round(1)</code> cents per mile shows how pickup trucks and SUVs, which have lower fuel economy than cars, experience larger operating cost increases when fuel prices rise. The percentage increase for light trucks typically exceeds that for automobiles unless light truck fuel economy improved unusually fast.</li>
<li><strong>Medium Duty Trucks (AOC_MD):</strong> The increase from 55.5 to <code>python AOC_MD.round(1)</code> cents per mile reflects diesel price changes and medium truck efficiency trends. Medium trucks have roughly double the operating costs of light-duty vehicles due to much lower fuel economy (7-8 mpg vs.&nbsp;16-24 mpg). These costs directly impact local freight delivery economics and potentially goods prices.</li>
<li><strong>Heavy Duty Trucks (AOC_HV):</strong> The increase from 74.3 to <code>python AOC_HV.round(1)</code> cents per mile shows how tractor-trailers, with the lowest fuel economy (5-6 mpg), face the highest operating costs. Even modest diesel price increases create substantial cost pressures for trucking companies. These costs ultimately influence freight rates and the competitiveness of truck transport versus rail or other modes.</li>
</ul>
<p>The table provides transparency by showing both the historical baseline (2019) and current estimates (2023). Users can assess whether cost changes are reasonable given fuel price movements between these years. The values can be directly imported into travel demand models as updated per-mile cost parameters.</p>
<p>These operating cost estimates exclude fixed costs (insurance, depreciation, registration) because travel demand models respond to marginal costsâ€”the cost of each additional mile driven. Fixed costs, already paid regardless of usage, donâ€™t influence short-term travel decisions. However, they do affect vehicle ownership decisions and long-term travel patterns.</p>
<p>The final values should be validated by comparing to other sources: trucking industry surveys, fleet operator cost data, or independent fuel cost calculators. If the estimates align with these external benchmarks, it provides confidence in the methodology. Significant discrepancies warrant investigation to identify potential data errors or methodological improvements.</p>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Auto Operating Costs Calculation</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> Estimating Auto Operating Costs for Travel Demand Model</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"> - name: Pukar Bhandari</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">   email: pukar.bhandari@wfrc.utah.gov</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">   affiliation:</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">     - name: Wasatch Front Regional Council</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co">       url: "https://wfrc.utah.gov/"</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-09-17"</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">   eval: true</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a><span class="co">    theme:</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="co">        light: flatly</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a><span class="co">        dark: darkly</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="co">    number-depth: 2</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="co">    code-link: true</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-width: 8</span></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-height: 5</span></span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a><span class="co">    # out-width: "100%"</span></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a><span class="co">    # fig-align: center</span></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a><span class="an">title-block-banner:</span><span class="co"> true</span></span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>This document updates the <span class="in">`0 - Auto Operating Cost - 2022-01-11.qmd`</span> to the new base year <span class="in">`2023`</span>.</span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a><span class="fu">## Environment Setup</span></span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load Libraries</span></span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a><span class="in">``` python</span></span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>conda install numpy pandas geopandas matplotlib seaborn scipy openpyxl python<span class="op">-</span>dotenv</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pdfplumber</span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a><span class="co"># For Analysis</span></span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a><span class="co"># For Visualization</span></span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.ticker <span class="im">import</span> FuncFormatter</span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.interpolate <span class="im">import</span> make_interp_spline</span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a><span class="co"># misc</span></span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdfplumber</span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a><span class="fu">### Set Base Year for Calculations</span></span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a>BASE_YEAR <span class="op">=</span> <span class="dv">2023</span></span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">6</span>)</span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-82"><a href="#cb54-82" aria-hidden="true" tabindex="-1"></a>This analysis calculates auto operating costs for different vehicle classes using a base year of 2023. Operating costs represent the variable expenses incurred per mile of vehicle travel, primarily fuel and maintenance. These costs are critical inputs for travel demand models, which use them to predict how people make transportation choices based on the relative costs of driving.</span>
<span id="cb54-83"><a href="#cb54-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-84"><a href="#cb54-84" aria-hidden="true" tabindex="-1"></a>The methodology combines data from multiple federal agencies. The Bureau of Transportation Statistics (BTS) provides historical data on fuel prices, vehicle expenditures, fleet characteristics, and average costs of vehicle ownership. The Energy Information Administration (EIA) supplies detailed regional fuel price data specific to the Rocky Mountain area, which includes Utah and neighboring states. The Bureau of Labor Statistics (BLS) provides the Consumer Price Index, allowing us to adjust historical costs for inflation. The American Automobile Association (AAA) publishes annual driving cost surveys that break down expenses into variable and fixed components. Finally, the Oak Ridge National Laboratory maintains the Transportation Energy Data Book with detailed fuel economy statistics by vehicle size class.</span>
<span id="cb54-85"><a href="#cb54-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-86"><a href="#cb54-86" aria-hidden="true" tabindex="-1"></a>By synthesizing these diverse data sources, we can identify long-term trends, compare actual costs against historical patterns, and produce defensible estimates for current-year operating costs across four vehicle classes: automobiles (passenger cars), light-duty trucks (pickups and SUVs), medium-duty trucks (single-unit delivery trucks), and heavy-duty trucks (tractor-trailers).</span>
<span id="cb54-87"><a href="#cb54-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-88"><a href="#cb54-88" aria-hidden="true" tabindex="-1"></a><span class="fu">## Read Raw Data</span></span>
<span id="cb54-89"><a href="#cb54-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-90"><a href="#cb54-90" aria-hidden="true" tabindex="-1"></a>The data collection process is designed for reproducibility and transparency. Each dataset is automatically downloaded from its authoritative source and cached locally in the <span class="in">`data/`</span> directory. The code checks whether files already exist before attempting downloads, which speeds up subsequent runs and reduces load on source servers.</span>
<span id="cb54-91"><a href="#cb54-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-92"><a href="#cb54-92" aria-hidden="true" tabindex="-1"></a>For each dataset, the code specifies the exact file location, sheet name (for Excel files), header row, columns to read, and number of rows to process. This explicit specification ensures that anyone running this analysis will extract identical data. Comments in the code indicate which columns may need updating as new data becomes available in future years.</span>
<span id="cb54-93"><a href="#cb54-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-94"><a href="#cb54-94" aria-hidden="true" tabindex="-1"></a>Some datasets require special handling. The Consumer Price Index data is fetched via the BLS API, which requires a free API key stored in a <span class="in">`.env`</span> file. The AAA driving costs data is extracted from a PDF using the <span class="in">`pdfplumber`</span> library, which parses table structures from the formatted document. Column names containing year information are cleaned and standardized using regular expressions to ensure consistent formatting.</span>
<span id="cb54-95"><a href="#cb54-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-96"><a href="#cb54-96" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3-11</span></span>
<span id="cb54-97"><a href="#cb54-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-98"><a href="#cb54-98" aria-hidden="true" tabindex="-1"></a>Table 3-11 provides historical fuel prices to end-users from 1970 through the most recent year available. This dataset includes separate price series for gasoline, diesel, and other fuel types across all states. While we primarily rely on EIA data for detailed regional pricing, this BTS table provides context for long-term national trends.</span>
<span id="cb54-99"><a href="#cb54-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-100"><a href="#cb54-100" aria-hidden="true" tabindex="-1"></a>Table 3-11: Sales Price of Transportation Fuel to End-Users <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/sales-price-transportation-fuel-end-users-current-cents-gallon)</span><span class="sc">\]</span></span>
<span id="cb54-101"><a href="#cb54-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-104"><a href="#cb54-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-105"><a href="#cb54-105" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-106"><a href="#cb54-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-107"><a href="#cb54-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-108"><a href="#cb54-108" aria-hidden="true" tabindex="-1"></a>filepath_3_11 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_11_032824.xlsx"</span>)</span>
<span id="cb54-109"><a href="#cb54-109" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_11.exists():</span>
<span id="cb54-110"><a href="#cb54-110" aria-hidden="true" tabindex="-1"></a>    filepath_3_11.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-111"><a href="#cb54-111" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2024-03/table_03_11_032824.xlsx"</span>)</span>
<span id="cb54-112"><a href="#cb54-112" aria-hidden="true" tabindex="-1"></a>    filepath_3_11.write_bytes(response.content)</span>
<span id="cb54-113"><a href="#cb54-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-114"><a href="#cb54-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-115"><a href="#cb54-115" aria-hidden="true" tabindex="-1"></a>df_3_11 <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-116"><a href="#cb54-116" aria-hidden="true" tabindex="-1"></a>  filepath_3_11,</span>
<span id="cb54-117"><a href="#cb54-117" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-11"</span>,</span>
<span id="cb54-118"><a href="#cb54-118" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-119"><a href="#cb54-119" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AK"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-120"><a href="#cb54-120" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">10</span></span>
<span id="cb54-121"><a href="#cb54-121" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-122"><a href="#cb54-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-123"><a href="#cb54-123" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-124"><a href="#cb54-124" aria-hidden="true" tabindex="-1"></a>df_3_11</span>
<span id="cb54-125"><a href="#cb54-125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-126"><a href="#cb54-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-127"><a href="#cb54-127" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3-12</span></span>
<span id="cb54-128"><a href="#cb54-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-129"><a href="#cb54-129" aria-hidden="true" tabindex="-1"></a>Table 3-12 tracks how gasoline prices have changed relative to other consumer goods and services. This relative price index reveals whether fuel costs are rising faster or slower than general inflation. When gasoline prices rise faster than overall inflation, transportation becomes relatively more expensive, potentially shifting travel behavior toward more efficient modes or shorter trips.</span>
<span id="cb54-130"><a href="#cb54-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-131"><a href="#cb54-131" aria-hidden="true" tabindex="-1"></a>Table 3-12: Price Trends of Gasoline v. Other Consumer Goods and Services <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/price-trends-gasoline-v-other-consumer-goods-and-services)</span><span class="sc">\]</span></span>
<span id="cb54-132"><a href="#cb54-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-135"><a href="#cb54-135" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-136"><a href="#cb54-136" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-137"><a href="#cb54-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-138"><a href="#cb54-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-139"><a href="#cb54-139" aria-hidden="true" tabindex="-1"></a>filepath_3_12 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_12_032824_1.xlsx"</span>)</span>
<span id="cb54-140"><a href="#cb54-140" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_12.exists():</span>
<span id="cb54-141"><a href="#cb54-141" aria-hidden="true" tabindex="-1"></a>    filepath_3_12.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-142"><a href="#cb54-142" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2024-03/table_03_12_032824_1.xlsx"</span>)</span>
<span id="cb54-143"><a href="#cb54-143" aria-hidden="true" tabindex="-1"></a>    filepath_3_12.write_bytes(response.content)</span>
<span id="cb54-144"><a href="#cb54-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-145"><a href="#cb54-145" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-146"><a href="#cb54-146" aria-hidden="true" tabindex="-1"></a>df_3_12 <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-147"><a href="#cb54-147" aria-hidden="true" tabindex="-1"></a>  filepath_3_12,</span>
<span id="cb54-148"><a href="#cb54-148" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-12"</span>,</span>
<span id="cb54-149"><a href="#cb54-149" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-150"><a href="#cb54-150" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-151"><a href="#cb54-151" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">15</span></span>
<span id="cb54-152"><a href="#cb54-152" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-153"><a href="#cb54-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-154"><a href="#cb54-154" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-155"><a href="#cb54-155" aria-hidden="true" tabindex="-1"></a>df_3_12</span>
<span id="cb54-156"><a href="#cb54-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-157"><a href="#cb54-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-158"><a href="#cb54-158" aria-hidden="true" tabindex="-1"></a><span class="fu">### 3-25</span></span>
<span id="cb54-159"><a href="#cb54-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-160"><a href="#cb54-160" aria-hidden="true" tabindex="-1"></a>Table 3-25 shows average wages in transportation industries, which provides economic context for understanding how transportation costs relate to household incomes. While not directly used in operating cost calculations, this data helps validate that our cost estimates are reasonable relative to what workers in the transportation sector earn.</span>
<span id="cb54-161"><a href="#cb54-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-162"><a href="#cb54-162" aria-hidden="true" tabindex="-1"></a>Table 3-25: Average Wage and Salary Accruals per Full-Time Equivalent Employee by Transportation Industry <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/average-wage-and-salary-accruals-full-time-equivalent-employee-transportation-industry-naics)</span><span class="sc">\]</span></span>
<span id="cb54-163"><a href="#cb54-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-166"><a href="#cb54-166" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-167"><a href="#cb54-167" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-168"><a href="#cb54-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-169"><a href="#cb54-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-170"><a href="#cb54-170" aria-hidden="true" tabindex="-1"></a>filepath_3_25 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_25_102122.xlsx"</span>)</span>
<span id="cb54-171"><a href="#cb54-171" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_25.exists():</span>
<span id="cb54-172"><a href="#cb54-172" aria-hidden="true" tabindex="-1"></a>    filepath_3_25.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-173"><a href="#cb54-173" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2022-10/table_03_25_102122.xlsx"</span>)</span>
<span id="cb54-174"><a href="#cb54-174" aria-hidden="true" tabindex="-1"></a>    filepath_3_25.write_bytes(response.content)</span>
<span id="cb54-175"><a href="#cb54-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-176"><a href="#cb54-176" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-177"><a href="#cb54-177" aria-hidden="true" tabindex="-1"></a>df_3_25 <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-178"><a href="#cb54-178" aria-hidden="true" tabindex="-1"></a>  filepath_3_25,</span>
<span id="cb54-179"><a href="#cb54-179" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-25"</span>,</span>
<span id="cb54-180"><a href="#cb54-180" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-181"><a href="#cb54-181" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:Y"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-182"><a href="#cb54-182" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">10</span></span>
<span id="cb54-183"><a href="#cb54-183" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-184"><a href="#cb54-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-185"><a href="#cb54-185" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-186"><a href="#cb54-186" aria-hidden="true" tabindex="-1"></a>df_3_25</span>
<span id="cb54-187"><a href="#cb54-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-188"><a href="#cb54-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-189"><a href="#cb54-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-190"><a href="#cb54-190" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4-12</span></span>
<span id="cb54-191"><a href="#cb54-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-192"><a href="#cb54-192" aria-hidden="true" tabindex="-1"></a>Table 4-12 details fuel consumption and vehicle miles traveled for light-duty vehicles with long wheelbasesâ€”primarily SUVs, vans, and pickup trucks. This category represents a significant and growing share of the passenger vehicle fleet. The table reports both fuel consumed (in millions of gallons) and miles traveled (in billions), which together yield fuel economy in miles per gallon.</span>
<span id="cb54-193"><a href="#cb54-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-194"><a href="#cb54-194" aria-hidden="true" tabindex="-1"></a>Table 4-12: Light Duty Vehicle, Long Wheel Base Fuel Consumption and Travel <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/other-2-axle-4-tire-vehicle-fuel-consumption-and-travel-0)</span><span class="sc">\]</span></span>
<span id="cb54-195"><a href="#cb54-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-198"><a href="#cb54-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-199"><a href="#cb54-199" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-200"><a href="#cb54-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-201"><a href="#cb54-201" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-202"><a href="#cb54-202" aria-hidden="true" tabindex="-1"></a>filepath_4_12 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_12M_032725.xlsx"</span>)</span>
<span id="cb54-203"><a href="#cb54-203" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_12.exists():</span>
<span id="cb54-204"><a href="#cb54-204" aria-hidden="true" tabindex="-1"></a>    filepath_4_12.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-205"><a href="#cb54-205" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_12M_032725.xlsx"</span>)</span>
<span id="cb54-206"><a href="#cb54-206" aria-hidden="true" tabindex="-1"></a>    filepath_4_12.write_bytes(response.content)</span>
<span id="cb54-207"><a href="#cb54-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-208"><a href="#cb54-208" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-209"><a href="#cb54-209" aria-hidden="true" tabindex="-1"></a>df_4_12 <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-210"><a href="#cb54-210" aria-hidden="true" tabindex="-1"></a>  filepath_4_12,</span>
<span id="cb54-211"><a href="#cb54-211" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-12M"</span>,</span>
<span id="cb54-212"><a href="#cb54-212" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-213"><a href="#cb54-213" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-214"><a href="#cb54-214" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb54-215"><a href="#cb54-215" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-216"><a href="#cb54-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-217"><a href="#cb54-217" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-218"><a href="#cb54-218" aria-hidden="true" tabindex="-1"></a>df_4_12</span>
<span id="cb54-219"><a href="#cb54-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-220"><a href="#cb54-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-221"><a href="#cb54-221" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy - CombinedVehType</span></span>
<span id="cb54-222"><a href="#cb54-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-223"><a href="#cb54-223" aria-hidden="true" tabindex="-1"></a>Table 4-9 aggregates fuel consumption and travel across all motor vehicle types. This provides a fleet-wide perspective on average fuel economy and helps ensure that our vehicle-class-specific estimates align with national totals. The combined data includes passenger cars, light trucks, buses, and heavy trucks.</span>
<span id="cb54-224"><a href="#cb54-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-225"><a href="#cb54-225" aria-hidden="true" tabindex="-1"></a>Table 4-9: Motor Vehicle Fuel Consumption and Travel <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/motor-vehicle-fuel-consumption-and-travel)</span><span class="sc">\]</span></span>
<span id="cb54-226"><a href="#cb54-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-229"><a href="#cb54-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-230"><a href="#cb54-230" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-231"><a href="#cb54-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-232"><a href="#cb54-232" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-233"><a href="#cb54-233" aria-hidden="true" tabindex="-1"></a>filepath_4_9 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_09_032825.xlsx"</span>)</span>
<span id="cb54-234"><a href="#cb54-234" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_9.exists():</span>
<span id="cb54-235"><a href="#cb54-235" aria-hidden="true" tabindex="-1"></a>    filepath_4_9.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-236"><a href="#cb54-236" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_09_032825.xlsx"</span>)</span>
<span id="cb54-237"><a href="#cb54-237" aria-hidden="true" tabindex="-1"></a>    filepath_4_9.write_bytes(response.content)</span>
<span id="cb54-238"><a href="#cb54-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-239"><a href="#cb54-239" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-240"><a href="#cb54-240" aria-hidden="true" tabindex="-1"></a>df_FE_CombinedVehType <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-241"><a href="#cb54-241" aria-hidden="true" tabindex="-1"></a>  filepath_4_9,</span>
<span id="cb54-242"><a href="#cb54-242" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-9"</span>,</span>
<span id="cb54-243"><a href="#cb54-243" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-244"><a href="#cb54-244" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AO"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-245"><a href="#cb54-245" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb54-246"><a href="#cb54-246" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-247"><a href="#cb54-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-248"><a href="#cb54-248" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-249"><a href="#cb54-249" aria-hidden="true" tabindex="-1"></a>df_FE_CombinedVehType</span>
<span id="cb54-250"><a href="#cb54-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-251"><a href="#cb54-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-252"><a href="#cb54-252" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy - LightDuty</span></span>
<span id="cb54-253"><a href="#cb54-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-254"><a href="#cb54-254" aria-hidden="true" tabindex="-1"></a>Table 4-23 focuses specifically on light-duty vehicles (passenger cars and light trucks under 8,500 pounds). This is the most detailed fuel economy dataset for the vehicles that comprise the majority of personal travel. The table separates passenger cars from light trucks and tracks how fuel economy has improved over time due to Corporate Average Fuel Economy (CAFE) standards and technological improvements in engines, transmissions, and vehicle design.</span>
<span id="cb54-255"><a href="#cb54-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-256"><a href="#cb54-256" aria-hidden="true" tabindex="-1"></a>Table 4-23:  Average Fuel Efficiency of U.S. Light Duty Vehicles <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/average-fuel-efficiency-us-light-duty-vehicles)</span><span class="sc">\]</span></span>
<span id="cb54-257"><a href="#cb54-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-260"><a href="#cb54-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-261"><a href="#cb54-261" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-262"><a href="#cb54-262" aria-hidden="true" tabindex="-1"></a>filepath_4_23 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_23_042425.xlsx"</span>)</span>
<span id="cb54-263"><a href="#cb54-263" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_23.exists():</span>
<span id="cb54-264"><a href="#cb54-264" aria-hidden="true" tabindex="-1"></a>    filepath_4_23.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-265"><a href="#cb54-265" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(</span>
<span id="cb54-266"><a href="#cb54-266" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-04/table_04_23_042425.xlsx"</span>,</span>
<span id="cb54-267"><a href="#cb54-267" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">=</span>{<span class="st">"User-Agent"</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'</span>}</span>
<span id="cb54-268"><a href="#cb54-268" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-269"><a href="#cb54-269" aria-hidden="true" tabindex="-1"></a>    filepath_4_23.write_bytes(response.content)</span>
<span id="cb54-270"><a href="#cb54-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-271"><a href="#cb54-271" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-272"><a href="#cb54-272" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-273"><a href="#cb54-273" aria-hidden="true" tabindex="-1"></a>  filepath_4_23,</span>
<span id="cb54-274"><a href="#cb54-274" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-23"</span>,</span>
<span id="cb54-275"><a href="#cb54-275" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-276"><a href="#cb54-276" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AK"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-277"><a href="#cb54-277" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">12</span></span>
<span id="cb54-278"><a href="#cb54-278" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-279"><a href="#cb54-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-280"><a href="#cb54-280" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-281"><a href="#cb54-281" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty</span>
<span id="cb54-282"><a href="#cb54-282" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-283"><a href="#cb54-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-284"><a href="#cb54-284" aria-hidden="true" tabindex="-1"></a><span class="fu">### Personal Expenditure</span></span>
<span id="cb54-285"><a href="#cb54-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-286"><a href="#cb54-286" aria-hidden="true" tabindex="-1"></a>Table 3-15 shows total personal consumption expenditures across all categories: housing, healthcare, food, transportation, and others. Transportation typically represents 15-20% of household budgets. By tracking transportation's share over time, we can assess whether our operating cost estimates produce results consistent with observed household spending patterns. The column names are cleaned to extract just the year, removing formatting artifacts like "(R)" revision markers.</span>
<span id="cb54-287"><a href="#cb54-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-288"><a href="#cb54-288" aria-hidden="true" tabindex="-1"></a>Table 3-15: Personal Expenditures by Category (Millions of current dollars) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/personal-expenditures-category-millions-current-dollars)</span><span class="sc">\]</span></span>
<span id="cb54-289"><a href="#cb54-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-292"><a href="#cb54-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-293"><a href="#cb54-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-294"><a href="#cb54-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-295"><a href="#cb54-295" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-296"><a href="#cb54-296" aria-hidden="true" tabindex="-1"></a>filepath_3_15 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_15_022525.xlsx"</span>)</span>
<span id="cb54-297"><a href="#cb54-297" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_15.exists():</span>
<span id="cb54-298"><a href="#cb54-298" aria-hidden="true" tabindex="-1"></a>    filepath_3_15.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-299"><a href="#cb54-299" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-02/table_03_15_022525.xlsx"</span>)</span>
<span id="cb54-300"><a href="#cb54-300" aria-hidden="true" tabindex="-1"></a>    filepath_3_15.write_bytes(response.content)</span>
<span id="cb54-301"><a href="#cb54-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-302"><a href="#cb54-302" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-303"><a href="#cb54-303" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-304"><a href="#cb54-304" aria-hidden="true" tabindex="-1"></a>  filepath_3_15,</span>
<span id="cb54-305"><a href="#cb54-305" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-15"</span>,</span>
<span id="cb54-306"><a href="#cb54-306" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-307"><a href="#cb54-307" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AP"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-308"><a href="#cb54-308" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">17</span></span>
<span id="cb54-309"><a href="#cb54-309" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-310"><a href="#cb54-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-311"><a href="#cb54-311" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract years from column names, handling formats like "(R) 2019"</span></span>
<span id="cb54-312"><a href="#cb54-312" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure.columns <span class="op">=</span> [</span>
<span id="cb54-313"><a href="#cb54-313" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span>(<span class="bu">int</span>(match.group())) <span class="cf">if</span> (match <span class="op">:=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="vs">19</span><span class="cf">|</span><span class="vs">20</span><span class="kw">)</span><span class="dv">\d</span><span class="op">{2}</span><span class="dv">\b</span><span class="vs">'</span>, <span class="bu">str</span>(col))) <span class="cf">else</span> col</span>
<span id="cb54-314"><a href="#cb54-314" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df_PersonalExpenditure.columns</span>
<span id="cb54-315"><a href="#cb54-315" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb54-316"><a href="#cb54-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-317"><a href="#cb54-317" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-318"><a href="#cb54-318" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure</span>
<span id="cb54-319"><a href="#cb54-319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-320"><a href="#cb54-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-321"><a href="#cb54-321" aria-hidden="true" tabindex="-1"></a><span class="fu">### Personal Consumption</span></span>
<span id="cb54-322"><a href="#cb54-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-323"><a href="#cb54-323" aria-hidden="true" tabindex="-1"></a>Table 3-16 breaks down transportation expenditures into subcategories: vehicle purchases, gasoline and oil, maintenance and repairs, insurance, and public transportation. This detailed breakdown allows us to isolate the specific cost components we're estimating and compare our calculations against actual household expenditure data reported in national accounts.</span>
<span id="cb54-324"><a href="#cb54-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-325"><a href="#cb54-325" aria-hidden="true" tabindex="-1"></a>Table 3-16: Personal Consumption Expenditures on Transportation by Subcategory (Millions of current dollars) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/personal-consumption-expenditures-transportation-subcategory-millions-current-dollars)</span><span class="sc">\]</span></span>
<span id="cb54-326"><a href="#cb54-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-329"><a href="#cb54-329" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-330"><a href="#cb54-330" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-331"><a href="#cb54-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-332"><a href="#cb54-332" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-333"><a href="#cb54-333" aria-hidden="true" tabindex="-1"></a>filepath_3_16 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_16_022525.xlsx"</span>)</span>
<span id="cb54-334"><a href="#cb54-334" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_16.exists():</span>
<span id="cb54-335"><a href="#cb54-335" aria-hidden="true" tabindex="-1"></a>    filepath_3_16.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-336"><a href="#cb54-336" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-02/table_03_16_022525.xlsx"</span>)</span>
<span id="cb54-337"><a href="#cb54-337" aria-hidden="true" tabindex="-1"></a>    filepath_3_16.write_bytes(response.content)</span>
<span id="cb54-338"><a href="#cb54-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-339"><a href="#cb54-339" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file</span></span>
<span id="cb54-340"><a href="#cb54-340" aria-hidden="true" tabindex="-1"></a>df_PersonalConsumption <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-341"><a href="#cb54-341" aria-hidden="true" tabindex="-1"></a>  filepath_3_16,</span>
<span id="cb54-342"><a href="#cb54-342" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-16"</span>,</span>
<span id="cb54-343"><a href="#cb54-343" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-344"><a href="#cb54-344" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AP"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-345"><a href="#cb54-345" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">17</span></span>
<span id="cb54-346"><a href="#cb54-346" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-347"><a href="#cb54-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-348"><a href="#cb54-348" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-349"><a href="#cb54-349" aria-hidden="true" tabindex="-1"></a>df_PersonalConsumption</span>
<span id="cb54-350"><a href="#cb54-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-351"><a href="#cb54-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-352"><a href="#cb54-352" aria-hidden="true" tabindex="-1"></a><span class="fu">### Consumer Price Index</span></span>
<span id="cb54-353"><a href="#cb54-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-354"><a href="#cb54-354" aria-hidden="true" tabindex="-1"></a>The Consumer Price Index (CPI-U) measures the average change in prices paid by urban consumers for a basket of goods and services. The BLS API provides monthly CPI values from 1913 to the present. We calculate annual averages and year-over-year percent changes to track inflation. The CPI serves multiple purposes in this analysis: adjusting historical costs to constant dollars, comparing how auto costs change relative to general inflation, and normalizing costs across different time periods. The API requires a free registration key, which should be stored in a <span class="in">`.env`</span> file to keep it secure and separate from the code.</span>
<span id="cb54-355"><a href="#cb54-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-356"><a href="#cb54-356" aria-hidden="true" tabindex="-1"></a>Data Source: Consumer Price Index for All Urban Consumers (CPI-U) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Labor Statistics</span><span class="co">](https://data.bls.gov/pdq/SurveyOutputServlet)</span><span class="sc">\]</span></span>
<span id="cb54-357"><a href="#cb54-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-358"><a href="#cb54-358" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb54-359"><a href="#cb54-359" aria-hidden="true" tabindex="-1"></a>Get your BLS Public API key from <span class="co">[</span><span class="ot">here</span><span class="co">](https://data.bls.gov/registrationEngine/)</span>.</span>
<span id="cb54-360"><a href="#cb54-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-361"><a href="#cb54-361" aria-hidden="true" tabindex="-1"></a>Create a <span class="in">`.env`</span> file in the root directory and add your BLS API key:</span>
<span id="cb54-362"><a href="#cb54-362" aria-hidden="true" tabindex="-1"></a>```BLS_PUBLIC_API=your-key-here```</span>
<span id="cb54-363"><a href="#cb54-363" aria-hidden="true" tabindex="-1"></a>This enables fetching Consumer Price Index data from the BLS API.</span>
<span id="cb54-364"><a href="#cb54-364" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb54-365"><a href="#cb54-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-368"><a href="#cb54-368" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-369"><a href="#cb54-369" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb54-370"><a href="#cb54-370" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span>
<span id="cb54-371"><a href="#cb54-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-372"><a href="#cb54-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-375"><a href="#cb54-375" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-376"><a href="#cb54-376" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-377"><a href="#cb54-377" aria-hidden="true" tabindex="-1"></a>filepath_cpi <span class="op">=</span> Path(<span class="st">"data/bls/cpi_1913_present.xlsx"</span>)</span>
<span id="cb54-378"><a href="#cb54-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-379"><a href="#cb54-379" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_cpi.exists():</span>
<span id="cb54-380"><a href="#cb54-380" aria-hidden="true" tabindex="-1"></a>    filepath_cpi.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-381"><a href="#cb54-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-382"><a href="#cb54-382" aria-hidden="true" tabindex="-1"></a>    api_url <span class="op">=</span> <span class="st">"https://api.bls.gov/publicAPI/v2/timeseries/data/"</span></span>
<span id="cb54-383"><a href="#cb54-383" aria-hidden="true" tabindex="-1"></a>    current_year <span class="op">=</span> pd.Timestamp.now().year</span>
<span id="cb54-384"><a href="#cb54-384" aria-hidden="true" tabindex="-1"></a>    all_data <span class="op">=</span> []</span>
<span id="cb54-385"><a href="#cb54-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-386"><a href="#cb54-386" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> start_year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1913</span>, current_year <span class="op">+</span> <span class="dv">1</span>, <span class="dv">20</span>):</span>
<span id="cb54-387"><a href="#cb54-387" aria-hidden="true" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">min</span>(start_year <span class="op">+</span> <span class="dv">19</span>, current_year)</span>
<span id="cb54-388"><a href="#cb54-388" aria-hidden="true" tabindex="-1"></a>        payload <span class="op">=</span> {</span>
<span id="cb54-389"><a href="#cb54-389" aria-hidden="true" tabindex="-1"></a>            <span class="st">"seriesid"</span>: [<span class="st">"CUUR0000SA0"</span>],</span>
<span id="cb54-390"><a href="#cb54-390" aria-hidden="true" tabindex="-1"></a>            <span class="st">"startyear"</span>: <span class="bu">str</span>(start_year),</span>
<span id="cb54-391"><a href="#cb54-391" aria-hidden="true" tabindex="-1"></a>            <span class="st">"endyear"</span>: <span class="bu">str</span>(end_year),</span>
<span id="cb54-392"><a href="#cb54-392" aria-hidden="true" tabindex="-1"></a>            <span class="st">"catalog"</span>: <span class="va">False</span>,</span>
<span id="cb54-393"><a href="#cb54-393" aria-hidden="true" tabindex="-1"></a>            <span class="st">"calculations"</span>: <span class="va">False</span>,</span>
<span id="cb54-394"><a href="#cb54-394" aria-hidden="true" tabindex="-1"></a>            <span class="st">"annualaverage"</span>: <span class="va">False</span>,</span>
<span id="cb54-395"><a href="#cb54-395" aria-hidden="true" tabindex="-1"></a>            <span class="st">"registrationkey"</span>: os.getenv(<span class="st">'BLS_PUBLIC_API'</span>)</span>
<span id="cb54-396"><a href="#cb54-396" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb54-397"><a href="#cb54-397" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.post(api_url, json<span class="op">=</span>payload, headers<span class="op">=</span>{<span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>})</span>
<span id="cb54-398"><a href="#cb54-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-399"><a href="#cb54-399" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> response.json()[<span class="st">'Results'</span>][<span class="st">'series'</span>][<span class="dv">0</span>][<span class="st">'data'</span>]:</span>
<span id="cb54-400"><a href="#cb54-400" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> item[<span class="st">'period'</span>].startswith(<span class="st">'M'</span>) <span class="kw">and</span> item[<span class="st">'period'</span>] <span class="op">!=</span> <span class="st">'M13'</span>:</span>
<span id="cb54-401"><a href="#cb54-401" aria-hidden="true" tabindex="-1"></a>                all_data.append({</span>
<span id="cb54-402"><a href="#cb54-402" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'year'</span>: <span class="bu">int</span>(item[<span class="st">'year'</span>]),</span>
<span id="cb54-403"><a href="#cb54-403" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'period'</span>: item[<span class="st">'period'</span>],</span>
<span id="cb54-404"><a href="#cb54-404" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'value'</span>: <span class="bu">float</span>(item[<span class="st">'value'</span>])</span>
<span id="cb54-405"><a href="#cb54-405" aria-hidden="true" tabindex="-1"></a>                })</span>
<span id="cb54-406"><a href="#cb54-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-407"><a href="#cb54-407" aria-hidden="true" tabindex="-1"></a>    df_pivot <span class="op">=</span> pd.DataFrame(all_data).pivot(index<span class="op">=</span><span class="st">'year'</span>, columns<span class="op">=</span><span class="st">'period'</span>, values<span class="op">=</span><span class="st">'value'</span>)</span>
<span id="cb54-408"><a href="#cb54-408" aria-hidden="true" tabindex="-1"></a>    df_pivot <span class="op">=</span> df_pivot[[<span class="ss">f'M</span><span class="sc">{</span>i<span class="sc">:02d}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>)]].sort_index()</span>
<span id="cb54-409"><a href="#cb54-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-410"><a href="#cb54-410" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> pd.ExcelWriter(filepath_cpi, engine<span class="op">=</span><span class="st">'openpyxl'</span>) <span class="im">as</span> writer:</span>
<span id="cb54-411"><a href="#cb54-411" aria-hidden="true" tabindex="-1"></a>        df_pivot.to_excel(writer, sheet_name<span class="op">=</span><span class="st">'BLS Data Series'</span>)</span>
<span id="cb54-412"><a href="#cb54-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-413"><a href="#cb54-413" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-414"><a href="#cb54-414" aria-hidden="true" tabindex="-1"></a>df_CPI <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-415"><a href="#cb54-415" aria-hidden="true" tabindex="-1"></a>  filepath_cpi, <span class="co"># File path</span></span>
<span id="cb54-416"><a href="#cb54-416" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"BLS Data Series"</span>,</span>
<span id="cb54-417"><a href="#cb54-417" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:M"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-418"><a href="#cb54-418" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-419"><a href="#cb54-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-420"><a href="#cb54-420" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate annual average</span></span>
<span id="cb54-421"><a href="#cb54-421" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'annualaverage'</span>] <span class="op">=</span> df_CPI[[<span class="ss">f'M</span><span class="sc">{</span>i<span class="sc">:02d}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">13</span>)]].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb54-422"><a href="#cb54-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-423"><a href="#cb54-423" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 12-month percent change for December</span></span>
<span id="cb54-424"><a href="#cb54-424" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'pct_change_Dec'</span>] <span class="op">=</span> df_CPI[<span class="st">'M12'</span>].pct_change(periods<span class="op">=</span><span class="dv">1</span>, fill_method<span class="op">=</span><span class="va">None</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb54-425"><a href="#cb54-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-426"><a href="#cb54-426" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate 12-month percent change for annual average</span></span>
<span id="cb54-427"><a href="#cb54-427" aria-hidden="true" tabindex="-1"></a>df_CPI[<span class="st">'pct_change_Avg'</span>] <span class="op">=</span> df_CPI[<span class="st">'annualaverage'</span>].pct_change(periods<span class="op">=</span><span class="dv">1</span>, fill_method<span class="op">=</span><span class="va">None</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb54-428"><a href="#cb54-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-429"><a href="#cb54-429" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-430"><a href="#cb54-430" aria-hidden="true" tabindex="-1"></a>df_CPI</span>
<span id="cb54-431"><a href="#cb54-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-432"><a href="#cb54-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-433"><a href="#cb54-433" aria-hidden="true" tabindex="-1"></a><span class="fu">### Retail Diesel Prices</span></span>
<span id="cb54-434"><a href="#cb54-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-435"><a href="#cb54-435" aria-hidden="true" tabindex="-1"></a>The EIA publishes weekly retail diesel prices by region. Diesel fuel powers medium-duty and heavy-duty trucks, so accurate diesel pricing is essential for calculating operating costs for freight vehicles. The Rocky Mountain region pricing reflects conditions in Utah, Colorado, Wyoming, Montana, and Idaho. Diesel prices typically run 10-20% higher than gasoline due to higher refining costs and federal excise tax rates, though the spread varies with crude oil prices and refinery economics.</span>
<span id="cb54-436"><a href="#cb54-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-437"><a href="#cb54-437" aria-hidden="true" tabindex="-1"></a>Retail Prices for Diesel (On-Highway) - All Types <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Energy Information Administration</span><span class="co">](http://www.eia.gov/dnav/pet/pet_pri_gnd_a_epd2d_pte_dpgal_w.htm)</span>]</span>
<span id="cb54-438"><a href="#cb54-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-441"><a href="#cb54-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-442"><a href="#cb54-442" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-443"><a href="#cb54-443" aria-hidden="true" tabindex="-1"></a>filepath_retaildiesel <span class="op">=</span> Path(<span class="st">"data/eia/PET_PRI_GND_A_EPD2D_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb54-444"><a href="#cb54-444" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_retaildiesel.exists():</span>
<span id="cb54-445"><a href="#cb54-445" aria-hidden="true" tabindex="-1"></a>    filepath_retaildiesel.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-446"><a href="#cb54-446" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.eia.gov/dnav/pet/xls/PET_PRI_GND_A_EPD2D_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb54-447"><a href="#cb54-447" aria-hidden="true" tabindex="-1"></a>    filepath_retaildiesel.write_bytes(response.content)</span>
<span id="cb54-448"><a href="#cb54-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-449"><a href="#cb54-449" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-450"><a href="#cb54-450" aria-hidden="true" tabindex="-1"></a>df_RetailDieselPrices <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-451"><a href="#cb54-451" aria-hidden="true" tabindex="-1"></a>  filepath_retaildiesel, <span class="co"># File path</span></span>
<span id="cb54-452"><a href="#cb54-452" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"Data 2"</span>,</span>
<span id="cb54-453"><a href="#cb54-453" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb54-454"><a href="#cb54-454" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:J"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-455"><a href="#cb54-455" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-456"><a href="#cb54-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-457"><a href="#cb54-457" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-458"><a href="#cb54-458" aria-hidden="true" tabindex="-1"></a>df_RetailDieselPrices</span>
<span id="cb54-459"><a href="#cb54-459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-460"><a href="#cb54-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-461"><a href="#cb54-461" aria-hidden="true" tabindex="-1"></a><span class="fu">### Retail Gas Prices</span></span>
<span id="cb54-462"><a href="#cb54-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-463"><a href="#cb54-463" aria-hidden="true" tabindex="-1"></a>Similar to diesel prices, the EIA provides weekly retail gasoline prices for all grades (regular, midgrade, premium) by region. Most light-duty vehicles use regular gasoline, though some require premium. The "all grades" series provides a weighted average that reflects actual consumer purchasing patterns. Weekly data captures seasonal price fluctuationsâ€”prices typically rise in summer due to higher driving demand and the switch to more expensive summer-blend fuel formulations required for air quality.</span>
<span id="cb54-464"><a href="#cb54-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-465"><a href="#cb54-465" aria-hidden="true" tabindex="-1"></a>Retail Prices for Gasoline, All Grades <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Energy Information Administration</span><span class="co">](https://www.eia.gov/dnav/pet/pet_pri_gnd_a_epm0_pte_dpgal_w.htm)</span>]</span>
<span id="cb54-466"><a href="#cb54-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-469"><a href="#cb54-469" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-470"><a href="#cb54-470" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-471"><a href="#cb54-471" aria-hidden="true" tabindex="-1"></a>filepath_retailgas <span class="op">=</span> Path(<span class="st">"data/eia/PET_PRI_GND_A_EPM0_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb54-472"><a href="#cb54-472" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_retailgas.exists():</span>
<span id="cb54-473"><a href="#cb54-473" aria-hidden="true" tabindex="-1"></a>    filepath_retailgas.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-474"><a href="#cb54-474" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.eia.gov/dnav/pet/xls/PET_PRI_GND_A_EPM0_PTE_DPGAL_W.xls"</span>)</span>
<span id="cb54-475"><a href="#cb54-475" aria-hidden="true" tabindex="-1"></a>    filepath_retailgas.write_bytes(response.content)</span>
<span id="cb54-476"><a href="#cb54-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-477"><a href="#cb54-477" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-478"><a href="#cb54-478" aria-hidden="true" tabindex="-1"></a>df_RetailGasPrices <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-479"><a href="#cb54-479" aria-hidden="true" tabindex="-1"></a>  filepath_retailgas, <span class="co"># File path</span></span>
<span id="cb54-480"><a href="#cb54-480" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"Data 2"</span>,</span>
<span id="cb54-481"><a href="#cb54-481" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb54-482"><a href="#cb54-482" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:J"</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-483"><a href="#cb54-483" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-484"><a href="#cb54-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-485"><a href="#cb54-485" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-486"><a href="#cb54-486" aria-hidden="true" tabindex="-1"></a>df_RetailGasPrices</span>
<span id="cb54-487"><a href="#cb54-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-488"><a href="#cb54-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-489"><a href="#cb54-489" aria-hidden="true" tabindex="-1"></a><span class="fu">### Average Cost</span></span>
<span id="cb54-490"><a href="#cb54-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-491"><a href="#cb54-491" aria-hidden="true" tabindex="-1"></a>Table 3-17 reports the average cost of owning and operating an automobile assuming 15,000 miles of annual driving. AAA compiles this data annually through surveys and manufacturer specifications. The costs are broken into variable expenses (fuel, maintenance, tires) that increase with miles driven, and fixed expenses (insurance, license/registration/taxes, depreciation, finance charges) that remain relatively constant regardless of mileage. This decomposition is critical because travel demand models respond primarily to variable costsâ€”travelers notice the cost of each additional mile driven, but fixed costs are sunk regardless of how much they drive.</span>
<span id="cb54-492"><a href="#cb54-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-493"><a href="#cb54-493" aria-hidden="true" tabindex="-1"></a>Table 3-17:  Average Cost of Owning and Operating an Automobilea (Assuming 15,000 Vehicle-Miles per Year) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/average-cost-owning-and-operating-automobilea-assuming-15000-vehicle-miles-year)</span><span class="sc">\]</span></span>
<span id="cb54-494"><a href="#cb54-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-497"><a href="#cb54-497" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-498"><a href="#cb54-498" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-499"><a href="#cb54-499" aria-hidden="true" tabindex="-1"></a>filepath_3_17 <span class="op">=</span> Path(<span class="st">"data/bts/table_03_17_032725.xlsx"</span>)</span>
<span id="cb54-500"><a href="#cb54-500" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_3_17.exists():</span>
<span id="cb54-501"><a href="#cb54-501" aria-hidden="true" tabindex="-1"></a>    filepath_3_17.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-502"><a href="#cb54-502" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_03_17_032725.xlsx"</span>)</span>
<span id="cb54-503"><a href="#cb54-503" aria-hidden="true" tabindex="-1"></a>    filepath_3_17.write_bytes(response.content)</span>
<span id="cb54-504"><a href="#cb54-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-505"><a href="#cb54-505" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-506"><a href="#cb54-506" aria-hidden="true" tabindex="-1"></a>df_AverageCost <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-507"><a href="#cb54-507" aria-hidden="true" tabindex="-1"></a>  filepath_3_17,</span>
<span id="cb54-508"><a href="#cb54-508" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"3-17"</span>,</span>
<span id="cb54-509"><a href="#cb54-509" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-510"><a href="#cb54-510" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-511"><a href="#cb54-511" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">8</span></span>
<span id="cb54-512"><a href="#cb54-512" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-513"><a href="#cb54-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-514"><a href="#cb54-514" aria-hidden="true" tabindex="-1"></a>df_AverageCost.columns <span class="op">=</span> [</span>
<span id="cb54-515"><a href="#cb54-515" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span>(<span class="bu">int</span>(match.group())) <span class="cf">if</span> (match <span class="op">:=</span> re.search(<span class="vs">r'</span><span class="dv">\b</span><span class="kw">(</span><span class="vs">19</span><span class="cf">|</span><span class="vs">20</span><span class="kw">)</span><span class="dv">\d</span><span class="op">{2}</span><span class="dv">\b</span><span class="vs">'</span>, <span class="bu">str</span>(col))) <span class="cf">else</span> col</span>
<span id="cb54-516"><a href="#cb54-516" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> df_AverageCost.columns</span>
<span id="cb54-517"><a href="#cb54-517" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb54-518"><a href="#cb54-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-519"><a href="#cb54-519" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-520"><a href="#cb54-520" aria-hidden="true" tabindex="-1"></a>df_AverageCost</span>
<span id="cb54-521"><a href="#cb54-521" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-522"><a href="#cb54-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-523"><a href="#cb54-523" aria-hidden="true" tabindex="-1"></a><span class="fu">### 4-11</span></span>
<span id="cb54-524"><a href="#cb54-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-525"><a href="#cb54-525" aria-hidden="true" tabindex="-1"></a>Table 4-11 covers light-duty vehicles with short wheelbases (primarily passenger cars) and motorcycles. These smaller, more fuel-efficient vehicles represent an important segment of the fleet. The table structure matches 4-12, reporting fuel consumption and vehicle miles traveled over time. Combined with Table 4-12, this provides comprehensive coverage of the light-duty vehicle fleet.</span>
<span id="cb54-526"><a href="#cb54-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-527"><a href="#cb54-527" aria-hidden="true" tabindex="-1"></a>Table 4-11: Light Duty Vehicle, Short Wheel Base and Motorcycle Fuel Consumption and Travel <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/light-duty-vehicle-short-wheel-base-and-motorcycle-fuel-consumption-and-travel)</span>]</span>
<span id="cb54-528"><a href="#cb54-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-531"><a href="#cb54-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-532"><a href="#cb54-532" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-533"><a href="#cb54-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-534"><a href="#cb54-534" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-535"><a href="#cb54-535" aria-hidden="true" tabindex="-1"></a>filepath_4_11 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_11_032825.xlsx"</span>)</span>
<span id="cb54-536"><a href="#cb54-536" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_11.exists():</span>
<span id="cb54-537"><a href="#cb54-537" aria-hidden="true" tabindex="-1"></a>    filepath_4_11.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-538"><a href="#cb54-538" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_11_032825.xlsx"</span>)</span>
<span id="cb54-539"><a href="#cb54-539" aria-hidden="true" tabindex="-1"></a>    filepath_4_11.write_bytes(response.content)</span>
<span id="cb54-540"><a href="#cb54-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-541"><a href="#cb54-541" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-542"><a href="#cb54-542" aria-hidden="true" tabindex="-1"></a>df_4_11 <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-543"><a href="#cb54-543" aria-hidden="true" tabindex="-1"></a>  filepath_4_11,</span>
<span id="cb54-544"><a href="#cb54-544" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-11"</span>,</span>
<span id="cb54-545"><a href="#cb54-545" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-546"><a href="#cb54-546" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AO"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-547"><a href="#cb54-547" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">18</span></span>
<span id="cb54-548"><a href="#cb54-548" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-549"><a href="#cb54-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-550"><a href="#cb54-550" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-551"><a href="#cb54-551" aria-hidden="true" tabindex="-1"></a>df_4_11</span>
<span id="cb54-552"><a href="#cb54-552" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-553"><a href="#cb54-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-554"><a href="#cb54-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy - Medium</span></span>
<span id="cb54-555"><a href="#cb54-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-556"><a href="#cb54-556" aria-hidden="true" tabindex="-1"></a>Table 4-13 addresses single-unit trucks with two axles and six or more tiresâ€”typically box trucks, delivery vehicles, utility trucks, and small dump trucks. These medium-duty trucks bridge the gap between light-duty pickups and heavy combination trucks. They generally achieve 6-8 miles per gallon, reflecting their larger engines, heavier construction, and cargo loads. Medium-duty trucks serve crucial roles in local freight delivery, construction, and utilities.</span>
<span id="cb54-557"><a href="#cb54-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-558"><a href="#cb54-558" aria-hidden="true" tabindex="-1"></a>Table 4-13:  Single-Unit 2-Axle 6-Tire or More Truck Fuel Consumption and Travel <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/single-unit-2-axle-6-tire-or-more-truck-fuel-consumption-and-travel)</span><span class="sc">\]</span></span>
<span id="cb54-559"><a href="#cb54-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-562"><a href="#cb54-562" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-563"><a href="#cb54-563" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-564"><a href="#cb54-564" aria-hidden="true" tabindex="-1"></a>filepath_4_13 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_13_032725.xlsx"</span>)</span>
<span id="cb54-565"><a href="#cb54-565" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_13.exists():</span>
<span id="cb54-566"><a href="#cb54-566" aria-hidden="true" tabindex="-1"></a>    filepath_4_13.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-567"><a href="#cb54-567" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_13_032725.xlsx"</span>)</span>
<span id="cb54-568"><a href="#cb54-568" aria-hidden="true" tabindex="-1"></a>    filepath_4_13.write_bytes(response.content)</span>
<span id="cb54-569"><a href="#cb54-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-570"><a href="#cb54-570" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-571"><a href="#cb54-571" aria-hidden="true" tabindex="-1"></a>df_FE_Medium <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-572"><a href="#cb54-572" aria-hidden="true" tabindex="-1"></a>  filepath_4_13,</span>
<span id="cb54-573"><a href="#cb54-573" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-13"</span>,</span>
<span id="cb54-574"><a href="#cb54-574" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-575"><a href="#cb54-575" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AM"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-576"><a href="#cb54-576" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb54-577"><a href="#cb54-577" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-578"><a href="#cb54-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-579"><a href="#cb54-579" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-580"><a href="#cb54-580" aria-hidden="true" tabindex="-1"></a>df_FE_Medium</span>
<span id="cb54-581"><a href="#cb54-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-582"><a href="#cb54-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-583"><a href="#cb54-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy - Heavy</span></span>
<span id="cb54-584"><a href="#cb54-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-585"><a href="#cb54-585" aria-hidden="true" tabindex="-1"></a>Table 4-14 covers combination trucksâ€”tractor-trailers consisting of a powered unit (tractor) pulling one or more trailers. These are the largest vehicles on the highway and handle the majority of long-distance freight. Heavy-duty trucks typically achieve 5-7 miles per gallon, limited by aerodynamic drag, rolling resistance, and the weight of loaded trailers. Small improvements in heavy truck fuel economy yield significant fuel savings given the high annual mileage these vehicles accumulate (often 60,000-100,000 miles per year).</span>
<span id="cb54-586"><a href="#cb54-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-587"><a href="#cb54-587" aria-hidden="true" tabindex="-1"></a>Table 4-14:  Combination Truck Fuel Consumption and Travel <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Bureau of Transportation Statistics</span><span class="co">](https://www.bts.gov/content/combination-truck-fuel-consumption-and-travel)</span><span class="sc">\]</span></span>
<span id="cb54-588"><a href="#cb54-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-591"><a href="#cb54-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-592"><a href="#cb54-592" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-593"><a href="#cb54-593" aria-hidden="true" tabindex="-1"></a>filepath_4_14 <span class="op">=</span> Path(<span class="st">"data/bts/table_04_14_032725.xlsx"</span>)</span>
<span id="cb54-594"><a href="#cb54-594" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_4_14.exists():</span>
<span id="cb54-595"><a href="#cb54-595" aria-hidden="true" tabindex="-1"></a>    filepath_4_14.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-596"><a href="#cb54-596" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://www.bts.gov/sites/bts.dot.gov/files/2025-03/table_04_14_032725.xlsx"</span>)</span>
<span id="cb54-597"><a href="#cb54-597" aria-hidden="true" tabindex="-1"></a>    filepath_4_14.write_bytes(response.content)</span>
<span id="cb54-598"><a href="#cb54-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-599"><a href="#cb54-599" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Excel file directly from URL</span></span>
<span id="cb54-600"><a href="#cb54-600" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy <span class="op">=</span> pd.read_excel(</span>
<span id="cb54-601"><a href="#cb54-601" aria-hidden="true" tabindex="-1"></a>  filepath_4_14,</span>
<span id="cb54-602"><a href="#cb54-602" aria-hidden="true" tabindex="-1"></a>  sheet_name<span class="op">=</span><span class="st">"4-14"</span>,</span>
<span id="cb54-603"><a href="#cb54-603" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb54-604"><a href="#cb54-604" aria-hidden="true" tabindex="-1"></a>  usecols<span class="op">=</span><span class="st">"A:AN"</span>, <span class="co"># </span><span class="al">TODO</span><span class="co">: update cols later for new data</span></span>
<span id="cb54-605"><a href="#cb54-605" aria-hidden="true" tabindex="-1"></a>  nrows<span class="op">=</span><span class="dv">6</span></span>
<span id="cb54-606"><a href="#cb54-606" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-607"><a href="#cb54-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-608"><a href="#cb54-608" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-609"><a href="#cb54-609" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy</span>
<span id="cb54-610"><a href="#cb54-610" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-611"><a href="#cb54-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-612"><a href="#cb54-612" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy by Size Class</span></span>
<span id="cb54-613"><a href="#cb54-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-614"><a href="#cb54-614" aria-hidden="true" tabindex="-1"></a>The Transportation Energy Data Book provides detailed truck fuel economy broken down by manufacturer's gross vehicle weight rating (GVWR) classes. The Vehicle Inventory and Use Survey (VIUS) collected this data in 1992, 1997, and 2002 before being discontinued. These surveys provide the most detailed look at fuel economy across the full truck size spectrum. The data shows clear relationships: fuel economy decreases as vehicle weight increases. This allows us to estimate fuel economy for truck classes not directly reported in the annual BTS tables. The document also includes historical retail fuel prices in both current and inflation-adjusted dollars, showing how fuel costs have changed in real terms over decades.</span>
<span id="cb54-615"><a href="#cb54-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-616"><a href="#cb54-616" aria-hidden="true" tabindex="-1"></a>Table 5.6 Truck Harmonic Mean Fuel Economy by Size Class, 1992, 1997, and 2002 (miles per gallon) <span class="sc">\[</span>Source: <span class="co">[</span><span class="ot">Oak Ridge National Laboratory</span><span class="co">](https://tedb.ornl.gov/wp-content/uploads/2022/03/TEDB_Ed_40.pdf)</span><span class="sc">\]</span></span>
<span id="cb54-617"><a href="#cb54-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-620"><a href="#cb54-620" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-621"><a href="#cb54-621" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-622"><a href="#cb54-622" aria-hidden="true" tabindex="-1"></a>filepath_tedb <span class="op">=</span> Path(<span class="st">"data/doe/TEDB_Ed_40.pdf"</span>)</span>
<span id="cb54-623"><a href="#cb54-623" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_tedb.exists():</span>
<span id="cb54-624"><a href="#cb54-624" aria-hidden="true" tabindex="-1"></a>    filepath_tedb.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-625"><a href="#cb54-625" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://tedb.ornl.gov/wp-content/uploads/2022/03/TEDB_Ed_40.pdf"</span>)</span>
<span id="cb54-626"><a href="#cb54-626" aria-hidden="true" tabindex="-1"></a>    filepath_tedb.write_bytes(response.content)</span>
<span id="cb54-627"><a href="#cb54-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-628"><a href="#cb54-628" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Table 5.6 in Page 152</span></span>
<span id="cb54-629"><a href="#cb54-629" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_1 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-630"><a href="#cb54-630" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Manufacturer's gross vehicle weight class"</span>: [</span>
<span id="cb54-631"><a href="#cb54-631" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1) 6,000 lb and less"</span>,</span>
<span id="cb54-632"><a href="#cb54-632" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2) 6,001â€“10,000 lb"</span>,</span>
<span id="cb54-633"><a href="#cb54-633" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3) 10,000â€“14,000 lb"</span>,</span>
<span id="cb54-634"><a href="#cb54-634" aria-hidden="true" tabindex="-1"></a>        <span class="st">"4) 14,001â€“16,000 lb"</span>,</span>
<span id="cb54-635"><a href="#cb54-635" aria-hidden="true" tabindex="-1"></a>        <span class="st">"5) 16,001â€“19,500 lb"</span>,</span>
<span id="cb54-636"><a href="#cb54-636" aria-hidden="true" tabindex="-1"></a>        <span class="st">"6) 19,501â€“26,000 lb"</span>,</span>
<span id="cb54-637"><a href="#cb54-637" aria-hidden="true" tabindex="-1"></a>        <span class="st">"7) 26,001â€“33,000 lb"</span>,</span>
<span id="cb54-638"><a href="#cb54-638" aria-hidden="true" tabindex="-1"></a>        <span class="st">"8) 33,001 lb and over"</span>,</span>
<span id="cb54-639"><a href="#cb54-639" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Light truck subtotal (1â€“2)"</span>,</span>
<span id="cb54-640"><a href="#cb54-640" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Medium truck subtotal (3â€“6)"</span>,</span>
<span id="cb54-641"><a href="#cb54-641" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Large truck subtotal (7â€“8)"</span></span>
<span id="cb54-642"><a href="#cb54-642" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-643"><a href="#cb54-643" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1992 TIUS"</span>: [<span class="fl">17.2</span>, <span class="fl">13.0</span>, <span class="fl">8.8</span>, <span class="fl">8.8</span>, <span class="fl">7.4</span>, <span class="fl">6.9</span>, <span class="fl">6.5</span>, <span class="fl">5.5</span>, <span class="fl">15.7</span>, <span class="fl">7.3</span>, <span class="fl">5.6</span>],</span>
<span id="cb54-644"><a href="#cb54-644" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1997 VIUS"</span>: [<span class="fl">17.1</span>, <span class="fl">13.6</span>, <span class="fl">9.4</span>, <span class="fl">9.3</span>, <span class="fl">8.7</span>, <span class="fl">7.3</span>, <span class="fl">6.4</span>, <span class="fl">5.7</span>, <span class="fl">15.8</span>, <span class="fl">8.6</span>, <span class="fl">6.1</span>],</span>
<span id="cb54-645"><a href="#cb54-645" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2002 VIUS"</span>: [<span class="fl">17.6</span>, <span class="fl">14.3</span>, <span class="fl">10.5</span>, <span class="fl">8.5</span>, <span class="fl">7.9</span>, <span class="fl">7.0</span>, <span class="fl">6.4</span>, <span class="fl">5.7</span>, <span class="fl">16.2</span>, <span class="fl">8.0</span>, <span class="fl">5.8</span>]</span>
<span id="cb54-646"><a href="#cb54-646" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-647"><a href="#cb54-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-648"><a href="#cb54-648" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-649"><a href="#cb54-649" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_1</span>
<span id="cb54-650"><a href="#cb54-650" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-651"><a href="#cb54-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-652"><a href="#cb54-652" aria-hidden="true" tabindex="-1"></a>Table 11.6: (Updated June 2022) Retail Prices for Motor Fuel, 1978â€“2021 (dollars per gallon, including tax)</span>
<span id="cb54-653"><a href="#cb54-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-656"><a href="#cb54-656" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-657"><a href="#cb54-657" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Table 11.6 in Page 285</span></span>
<span id="cb54-658"><a href="#cb54-658" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-659"><a href="#cb54-659" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: [</span>
<span id="cb54-660"><a href="#cb54-660" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1978</span>, <span class="dv">1980</span>, <span class="dv">1985</span>, <span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">1996</span>, <span class="dv">1997</span>, <span class="dv">1998</span>, <span class="dv">1999</span>, <span class="dv">2000</span>,</span>
<span id="cb54-661"><a href="#cb54-661" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2001</span>, <span class="dv">2002</span>, <span class="dv">2003</span>, <span class="dv">2004</span>, <span class="dv">2005</span>, <span class="dv">2006</span>, <span class="dv">2007</span>, <span class="dv">2008</span>, <span class="dv">2009</span>, <span class="dv">2010</span>,</span>
<span id="cb54-662"><a href="#cb54-662" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span></span>
<span id="cb54-663"><a href="#cb54-663" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-664"><a href="#cb54-664" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diesel_Current"</span>: [</span>
<span id="cb54-665"><a href="#cb54-665" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="fl">1.01</span>, <span class="fl">1.22</span>, <span class="fl">1.07</span>, <span class="fl">1.11</span>, <span class="fl">1.24</span>, <span class="fl">1.20</span>, <span class="fl">1.04</span>, <span class="fl">1.12</span>, <span class="fl">1.49</span>,</span>
<span id="cb54-666"><a href="#cb54-666" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.40</span>, <span class="fl">1.32</span>, <span class="fl">1.51</span>, <span class="fl">1.81</span>, <span class="fl">2.40</span>, <span class="fl">2.71</span>, <span class="fl">2.89</span>, <span class="fl">3.80</span>, <span class="fl">2.47</span>, <span class="fl">2.99</span>,</span>
<span id="cb54-667"><a href="#cb54-667" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.84</span>, <span class="fl">3.97</span>, <span class="fl">3.92</span>, <span class="fl">3.83</span>, <span class="fl">2.71</span>, <span class="fl">2.30</span>, <span class="fl">2.65</span>, <span class="fl">3.18</span>, <span class="fl">3.06</span>, <span class="fl">2.55</span>, <span class="fl">3.29</span></span>
<span id="cb54-668"><a href="#cb54-668" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-669"><a href="#cb54-669" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diesel_Constant_2021"</span>: [</span>
<span id="cb54-670"><a href="#cb54-670" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="fl">3.32</span>, <span class="fl">3.07</span>, <span class="fl">2.22</span>, <span class="fl">1.97</span>, <span class="fl">2.13</span>, <span class="fl">2.02</span>, <span class="fl">1.74</span>, <span class="fl">1.82</span>, <span class="fl">2.35</span>,</span>
<span id="cb54-671"><a href="#cb54-671" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.14</span>, <span class="fl">1.99</span>, <span class="fl">2.22</span>, <span class="fl">2.60</span>, <span class="fl">3.33</span>, <span class="fl">3.64</span>, <span class="fl">3.77</span>, <span class="fl">4.79</span>, <span class="fl">3.12</span>, <span class="fl">3.72</span>,</span>
<span id="cb54-672"><a href="#cb54-672" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.63</span>, <span class="fl">4.68</span>, <span class="fl">4.56</span>, <span class="fl">4.38</span>, <span class="fl">3.09</span>, <span class="fl">2.60</span>, <span class="fl">2.93</span>, <span class="fl">3.43</span>, <span class="fl">3.24</span>, <span class="fl">2.67</span>, <span class="fl">3.29</span></span>
<span id="cb54-673"><a href="#cb54-673" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-674"><a href="#cb54-674" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Regular_Current"</span>: [</span>
<span id="cb54-675"><a href="#cb54-675" aria-hidden="true" tabindex="-1"></a>        <span class="fl">0.67</span>, <span class="fl">1.25</span>, <span class="fl">1.20</span>, <span class="fl">1.16</span>, <span class="fl">1.15</span>, <span class="fl">1.23</span>, <span class="fl">1.23</span>, <span class="fl">1.06</span>, <span class="fl">1.17</span>, <span class="fl">1.51</span>,</span>
<span id="cb54-676"><a href="#cb54-676" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.46</span>, <span class="fl">1.36</span>, <span class="fl">1.59</span>, <span class="fl">1.88</span>, <span class="fl">2.30</span>, <span class="fl">2.59</span>, <span class="fl">2.80</span>, <span class="fl">3.27</span>, <span class="fl">2.35</span>, <span class="fl">2.79</span>,</span>
<span id="cb54-677"><a href="#cb54-677" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.53</span>, <span class="fl">3.64</span>, <span class="fl">3.53</span>, <span class="fl">3.37</span>, <span class="fl">2.45</span>, <span class="fl">2.14</span>, <span class="fl">2.41</span>, <span class="fl">2.74</span>, <span class="fl">2.64</span>, <span class="fl">2.17</span>, <span class="fl">3.05</span></span>
<span id="cb54-678"><a href="#cb54-678" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-679"><a href="#cb54-679" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Regular_Constant_2021"</span>: [</span>
<span id="cb54-680"><a href="#cb54-680" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.78</span>, <span class="fl">4.09</span>, <span class="fl">3.03</span>, <span class="fl">2.41</span>, <span class="fl">2.04</span>, <span class="fl">2.13</span>, <span class="fl">2.08</span>, <span class="fl">1.76</span>, <span class="fl">1.89</span>, <span class="fl">2.38</span>,</span>
<span id="cb54-681"><a href="#cb54-681" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.24</span>, <span class="fl">2.05</span>, <span class="fl">2.34</span>, <span class="fl">2.70</span>, <span class="fl">3.18</span>, <span class="fl">3.48</span>, <span class="fl">3.66</span>, <span class="fl">4.11</span>, <span class="fl">2.97</span>, <span class="fl">3.46</span>,</span>
<span id="cb54-682"><a href="#cb54-682" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.25</span>, <span class="fl">4.30</span>, <span class="fl">4.10</span>, <span class="fl">3.85</span>, <span class="fl">2.80</span>, <span class="fl">2.42</span>, <span class="fl">2.66</span>, <span class="fl">2.95</span>, <span class="fl">2.79</span>, <span class="fl">2.28</span>, <span class="fl">3.05</span></span>
<span id="cb54-683"><a href="#cb54-683" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-684"><a href="#cb54-684" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Premium_Current"</span>: [</span>
<span id="cb54-685"><a href="#cb54-685" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="va">None</span>, <span class="fl">1.34</span>, <span class="fl">1.35</span>, <span class="fl">1.34</span>, <span class="fl">1.41</span>, <span class="fl">1.42</span>, <span class="fl">1.25</span>, <span class="fl">1.36</span>, <span class="fl">1.69</span>,</span>
<span id="cb54-686"><a href="#cb54-686" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.66</span>, <span class="fl">1.56</span>, <span class="fl">1.78</span>, <span class="fl">2.07</span>, <span class="fl">2.49</span>, <span class="fl">2.81</span>, <span class="fl">3.03</span>, <span class="fl">3.52</span>, <span class="fl">2.61</span>, <span class="fl">3.05</span>,</span>
<span id="cb54-687"><a href="#cb54-687" aria-hidden="true" tabindex="-1"></a>        <span class="fl">3.79</span>, <span class="fl">3.92</span>, <span class="fl">3.84</span>, <span class="fl">3.71</span>, <span class="fl">2.87</span>, <span class="fl">2.61</span>, <span class="fl">2.91</span>, <span class="fl">3.27</span>, <span class="fl">3.21</span>, <span class="fl">2.79</span>, <span class="fl">3.69</span></span>
<span id="cb54-688"><a href="#cb54-688" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-689"><a href="#cb54-689" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Premium_Constant_2021"</span>: [</span>
<span id="cb54-690"><a href="#cb54-690" aria-hidden="true" tabindex="-1"></a>        <span class="va">None</span>, <span class="va">None</span>, <span class="fl">3.37</span>, <span class="fl">2.80</span>, <span class="fl">2.38</span>, <span class="fl">2.44</span>, <span class="fl">2.39</span>, <span class="fl">2.08</span>, <span class="fl">2.21</span>, <span class="fl">2.66</span>,</span>
<span id="cb54-691"><a href="#cb54-691" aria-hidden="true" tabindex="-1"></a>        <span class="fl">2.54</span>, <span class="fl">2.34</span>, <span class="fl">2.62</span>, <span class="fl">2.97</span>, <span class="fl">3.46</span>, <span class="fl">3.77</span>, <span class="fl">3.96</span>, <span class="fl">4.43</span>, <span class="fl">3.29</span>, <span class="fl">3.79</span>,</span>
<span id="cb54-692"><a href="#cb54-692" aria-hidden="true" tabindex="-1"></a>        <span class="fl">4.57</span>, <span class="fl">4.63</span>, <span class="fl">4.47</span>, <span class="fl">4.25</span>, <span class="fl">3.28</span>, <span class="fl">2.95</span>, <span class="fl">3.22</span>, <span class="fl">3.53</span>, <span class="fl">3.40</span>, <span class="fl">2.92</span>, <span class="fl">3.69</span></span>
<span id="cb54-693"><a href="#cb54-693" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-694"><a href="#cb54-694" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-695"><a href="#cb54-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-696"><a href="#cb54-696" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-697"><a href="#cb54-697" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2</span>
<span id="cb54-698"><a href="#cb54-698" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-699"><a href="#cb54-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-702"><a href="#cb54-702" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-703"><a href="#cb54-703" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">FIXME</span><span class="co">: Unsure the logic behind this calculation.</span></span>
<span id="cb54-704"><a href="#cb54-704" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2[<span class="st">"Diesel to Average Ratio"</span>] <span class="op">=</span> df_FE_SizeClass_2[<span class="st">"Diesel_Current"</span>] <span class="op">/</span> (df_FE_SizeClass_2[<span class="st">"Regular_Current"</span>] <span class="op">+</span> df_FE_SizeClass_2[<span class="st">"Premium_Current"</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb54-705"><a href="#cb54-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-706"><a href="#cb54-706" aria-hidden="true" tabindex="-1"></a>df_FE_SizeClass_2.loc[df_FE_SizeClass_2[<span class="st">'Year'</span>] <span class="op">==</span> <span class="dv">2021</span>, <span class="st">'Diesel to Average Ratio'</span>]</span>
<span id="cb54-707"><a href="#cb54-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-708"><a href="#cb54-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-709"><a href="#cb54-709" aria-hidden="true" tabindex="-1"></a><span class="fu">### Repair and Maintenance Cost - Heavy</span></span>
<span id="cb54-710"><a href="#cb54-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-711"><a href="#cb54-711" aria-hidden="true" tabindex="-1"></a>Heavy truck maintenance costs come from industry surveys conducted by the American Transportation Research Institute (ATRI), which tracks operating costs for commercial trucking fleets. Maintenance costs include scheduled preventive maintenance (oil changes, filter replacements, inspections), repairs (brakes, tires, engine work), and roadside breakdowns. The data shows maintenance costs per mile ranging from $0.12 to $0.17, considerably higher than light-duty vehicle maintenance due to more frequent service intervals, larger and more expensive parts, and the severe duty cycles that commercial trucks experience.</span>
<span id="cb54-712"><a href="#cb54-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-713"><a href="#cb54-713" aria-hidden="true" tabindex="-1"></a><span class="al">![Repair and Maintenance Cost per Mile](https://fleetimages.bobitstudios.com/upload/trucking-info/content/article/2021-08/maintenance_chart4-__-720x516-s.jpg)</span></span>
<span id="cb54-714"><a href="#cb54-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-715"><a href="#cb54-715" aria-hidden="true" tabindex="-1"></a>Source: <span class="co">[</span><span class="ot">TruckingInfo.com</span><span class="co">]('https://www.truckinginfo.com/10150350/2021-hdt-fact-book-maintenance-costs-expected-to-rise')</span></span>
<span id="cb54-716"><a href="#cb54-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-717"><a href="#cb54-717" aria-hidden="true" tabindex="-1"></a>Further Research: American Transportation Research Institute</span>
<span id="cb54-718"><a href="#cb54-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-721"><a href="#cb54-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-722"><a href="#cb54-722" aria-hidden="true" tabindex="-1"></a><span class="co"># Manually Entering the data from above image</span></span>
<span id="cb54-723"><a href="#cb54-723" aria-hidden="true" tabindex="-1"></a>df_RepairMaintenanceCost_Heavy <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-724"><a href="#cb54-724" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: [<span class="st">"2010"</span>, <span class="st">"2011"</span>, <span class="st">"2012"</span>, <span class="st">"2013"</span>, <span class="st">"2014"</span>, <span class="st">"2015"</span>, <span class="st">"2016"</span>, <span class="st">"2017"</span>, <span class="st">"2018"</span>, <span class="st">"2019"</span>],</span>
<span id="cb54-725"><a href="#cb54-725" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CostMile"</span>: [<span class="fl">0.124</span>, <span class="fl">0.152</span>, <span class="fl">0.138</span>, <span class="fl">0.148</span>, <span class="fl">0.158</span>, <span class="fl">0.156</span>, <span class="fl">0.166</span>, <span class="fl">0.167</span>, <span class="fl">0.171</span>, <span class="fl">0.14</span>]</span>
<span id="cb54-726"><a href="#cb54-726" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-727"><a href="#cb54-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-728"><a href="#cb54-728" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb54-729"><a href="#cb54-729" aria-hidden="true" tabindex="-1"></a>df_RepairMaintenanceCost_Heavy</span>
<span id="cb54-730"><a href="#cb54-730" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-731"><a href="#cb54-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-732"><a href="#cb54-732" aria-hidden="true" tabindex="-1"></a><span class="fu">### Driving Costs</span></span>
<span id="cb54-733"><a href="#cb54-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-734"><a href="#cb54-734" aria-hidden="true" tabindex="-1"></a>AAA publishes an annual "Your Driving Costs" report based on vehicle ownership costs for five vehicle categories at three annual mileage levels. The report combines manufacturer data, insurance industry statistics, and fuel price surveys. The PDF tables are extracted programmatically using <span class="in">`pdfplumber`</span>, which identifies table boundaries and cell contents. The two pages are combined horizontally to create a complete dataset. This provides current-year cost estimates to benchmark against our trend-based calculations.</span>
<span id="cb54-735"><a href="#cb54-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-736"><a href="#cb54-736" aria-hidden="true" tabindex="-1"></a>Data Source: <span class="co">[</span><span class="ot">American Automobile Association</span><span class="co">]('https://exchange.aaa.com/wp-content/uploads/2019/09/AAA-Your-Driving-Costs-2019.pdf')</span></span>
<span id="cb54-737"><a href="#cb54-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-740"><a href="#cb54-740" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-741"><a href="#cb54-741" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure file exists</span></span>
<span id="cb54-742"><a href="#cb54-742" aria-hidden="true" tabindex="-1"></a>filepath_drivingcost <span class="op">=</span> Path(<span class="st">"data/aaa/YDC-Brochure_2023-FINAL-8.30.23-.pdf"</span>)</span>
<span id="cb54-743"><a href="#cb54-743" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> filepath_drivingcost.exists():</span>
<span id="cb54-744"><a href="#cb54-744" aria-hidden="true" tabindex="-1"></a>    filepath_drivingcost.parent.mkdir(parents<span class="op">=</span><span class="va">True</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-745"><a href="#cb54-745" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="st">"https://newsroom.aaa.com/wp-content/uploads/2023/08/YDC-Brochure_2023-FINAL-8.30.23-.pdf"</span>)</span>
<span id="cb54-746"><a href="#cb54-746" aria-hidden="true" tabindex="-1"></a>    filepath_drivingcost.write_bytes(response.content)</span>
<span id="cb54-747"><a href="#cb54-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-748"><a href="#cb54-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-751"><a href="#cb54-751" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-752"><a href="#cb54-752" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pdfplumber.<span class="bu">open</span>(filepath_drivingcost) <span class="im">as</span> pdf:</span>
<span id="cb54-753"><a href="#cb54-753" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Page 1 (index 0)</span></span>
<span id="cb54-754"><a href="#cb54-754" aria-hidden="true" tabindex="-1"></a>    page1 <span class="op">=</span> pdf.pages[<span class="dv">0</span>]</span>
<span id="cb54-755"><a href="#cb54-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-756"><a href="#cb54-756" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Page 2 (index 1)</span></span>
<span id="cb54-757"><a href="#cb54-757" aria-hidden="true" tabindex="-1"></a>    page2 <span class="op">=</span> pdf.pages[<span class="dv">1</span>]</span>
<span id="cb54-758"><a href="#cb54-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-759"><a href="#cb54-759" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use lines strategy for table detection</span></span>
<span id="cb54-760"><a href="#cb54-760" aria-hidden="true" tabindex="-1"></a>    table_settings <span class="op">=</span> {</span>
<span id="cb54-761"><a href="#cb54-761" aria-hidden="true" tabindex="-1"></a>        <span class="st">"vertical_strategy"</span>: <span class="st">"lines"</span>,</span>
<span id="cb54-762"><a href="#cb54-762" aria-hidden="true" tabindex="-1"></a>        <span class="st">"horizontal_strategy"</span>: <span class="st">"lines"</span>,</span>
<span id="cb54-763"><a href="#cb54-763" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-764"><a href="#cb54-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-765"><a href="#cb54-765" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract tables from both pages</span></span>
<span id="cb54-766"><a href="#cb54-766" aria-hidden="true" tabindex="-1"></a>    table1 <span class="op">=</span> page1.extract_table(table_settings<span class="op">=</span>table_settings)</span>
<span id="cb54-767"><a href="#cb54-767" aria-hidden="true" tabindex="-1"></a>    table2 <span class="op">=</span> page2.extract_table(table_settings<span class="op">=</span>table_settings)</span>
<span id="cb54-768"><a href="#cb54-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-769"><a href="#cb54-769" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create DataFrames</span></span>
<span id="cb54-770"><a href="#cb54-770" aria-hidden="true" tabindex="-1"></a>    df_page1 <span class="op">=</span> pd.DataFrame(table1[<span class="dv">1</span>:], columns<span class="op">=</span>table1[<span class="dv">0</span>])</span>
<span id="cb54-771"><a href="#cb54-771" aria-hidden="true" tabindex="-1"></a>    df_page2 <span class="op">=</span> pd.DataFrame(table2[<span class="dv">1</span>:], columns<span class="op">=</span>table2[<span class="dv">0</span>])</span>
<span id="cb54-772"><a href="#cb54-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-773"><a href="#cb54-773" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove the 6th column (index 5) from df_page2</span></span>
<span id="cb54-774"><a href="#cb54-774" aria-hidden="true" tabindex="-1"></a>    df_page2_clean <span class="op">=</span> df_page2.drop(df_page2.columns[<span class="dv">0</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb54-775"><a href="#cb54-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-776"><a href="#cb54-776" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Concatenate horizontally (side by side)</span></span>
<span id="cb54-777"><a href="#cb54-777" aria-hidden="true" tabindex="-1"></a>    df_DrivingCosts <span class="op">=</span> pd.concat([df_page1, df_page2_clean], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb54-778"><a href="#cb54-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-779"><a href="#cb54-779" aria-hidden="true" tabindex="-1"></a>df_DrivingCosts</span>
<span id="cb54-780"><a href="#cb54-780" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-781"><a href="#cb54-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-782"><a href="#cb54-782" aria-hidden="true" tabindex="-1"></a><span class="fu">## Intermediate Cost Calculations</span></span>
<span id="cb54-783"><a href="#cb54-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-784"><a href="#cb54-784" aria-hidden="true" tabindex="-1"></a>Raw data alone cannot answer the question "what does it cost to drive a mile?" The data must be processed, combined, and analyzed to extract meaningful patterns and derive cost estimates. This section performs several types of calculations:</span>
<span id="cb54-785"><a href="#cb54-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-786"><a href="#cb54-786" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Trend analysis:** Fitting linear regression lines to historical data to identify whether costs are rising, falling, or stable over time</span>
<span id="cb54-787"><a href="#cb54-787" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Data fusion:** Combining information from multiple sources (e.g., fuel prices from EIA and fuel economy from BTS to calculate fuel cost per mile)</span>
<span id="cb54-788"><a href="#cb54-788" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Actual vs. trend comparison:** Evaluating whether the most recent actual data point aligns with the long-term trend or represents an unusual deviation</span>
<span id="cb54-789"><a href="#cb54-789" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Normalization:** Adjusting costs for inflation using the CPI to enable valid comparisons across years</span>
<span id="cb54-790"><a href="#cb54-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-791"><a href="#cb54-791" aria-hidden="true" tabindex="-1"></a>Each subsection focuses on a specific cost component, builds relevant metrics, visualizes trends, and produces comparison tables that inform the final operating cost calculations. The visualizations help both technical and non-technical readers understand whether recent costs are consistent with historical patterns or represent significant departures requiring explanation.</span>
<span id="cb54-792"><a href="#cb54-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-793"><a href="#cb54-793" aria-hidden="true" tabindex="-1"></a><span class="fu">### Transportation Expenditures</span></span>
<span id="cb54-794"><a href="#cb54-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-795"><a href="#cb54-795" aria-hidden="true" tabindex="-1"></a>Transportation expenditures provide essential context for validating our operating cost calculations. If our estimates are accurate, they should produce travel costs consistent with what households actually spend on transportation. This subsection examines transportation spending from two perspectives: transportation as a percentage of total household expenditures, and gasoline specifically as a percentage of total expenditures.</span>
<span id="cb54-796"><a href="#cb54-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-797"><a href="#cb54-797" aria-hidden="true" tabindex="-1"></a>The first metric reveals how much of household budgets go to all transportation (vehicles, fuel, maintenance, public transit, air travel). The second isolates just gasoline, which directly relates to our per-mile operating cost estimates. If gasoline spending is rising faster than overall transportation spending, it suggests fuel prices are increasing or people are driving more. If it's falling, vehicles may be becoming more efficient or people may be driving less.</span>
<span id="cb54-798"><a href="#cb54-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-799"><a href="#cb54-799" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-800"><a href="#cb54-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-801"><a href="#cb54-801" aria-hidden="true" tabindex="-1"></a>The dataframe combines transportation cost percentages from the personal expenditure data with gasoline costs from the average cost data. The calculation <span class="in">`Gasoline Cost of Transportation * Transportation Percent of Total / 100`</span> produces gasoline as a percentage of total household expenditures. This derived metric helps us understand whether fluctuations in gasoline prices significantly impact household budgets or represent a small enough fraction that price changes have limited behavioral effects.</span>
<span id="cb54-802"><a href="#cb54-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-805"><a href="#cb54-805" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-806"><a href="#cb54-806" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-807"><a href="#cb54-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-808"><a href="#cb54-808" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb54-809"><a href="#cb54-809" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb54-810"><a href="#cb54-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-811"><a href="#cb54-811" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb54-812"><a href="#cb54-812" aria-hidden="true" tabindex="-1"></a>df_PersonalExpenditure.columns <span class="op">=</span> df_PersonalExpenditure.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-813"><a href="#cb54-813" aria-hidden="true" tabindex="-1"></a>df_AverageCost.columns <span class="op">=</span> df_AverageCost.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-814"><a href="#cb54-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-815"><a href="#cb54-815" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DataFrame to combine the extracted data</span></span>
<span id="cb54-816"><a href="#cb54-816" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-817"><a href="#cb54-817" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The years from 1990 to 2024</span></span>
<span id="cb54-818"><a href="#cb54-818" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb54-819"><a href="#cb54-819" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the 'Transportation Cost Percent of Total' for the years 1990-2020 from row 2</span></span>
<span id="cb54-820"><a href="#cb54-820" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Transportation Percent of Total"</span>: pd.to_numeric(</span>
<span id="cb54-821"><a href="#cb54-821" aria-hidden="true" tabindex="-1"></a>      df_PersonalExpenditure.loc[<span class="dv">2</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-822"><a href="#cb54-822" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-823"><a href="#cb54-823" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-824"><a href="#cb54-824" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the 'Gasoline Cost of Transportation' for the years 1990-2020 from row 2</span></span>
<span id="cb54-825"><a href="#cb54-825" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gasoline Cost of Transportation"</span>: pd.to_numeric(</span>
<span id="cb54-826"><a href="#cb54-826" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">2</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-827"><a href="#cb54-827" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-828"><a href="#cb54-828" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-829"><a href="#cb54-829" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-830"><a href="#cb54-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-831"><a href="#cb54-831" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">FIXME</span><span class="co">: Did not understand the logic for this</span></span>
<span id="cb54-832"><a href="#cb54-832" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure[<span class="st">"Gasoline Percent of Total"</span>] <span class="op">=</span> df_TransportationExpenditure[<span class="st">"Gasoline Cost of Transportation"</span>] <span class="op">*</span> df_TransportationExpenditure[<span class="st">"Transportation Percent of Total"</span>] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb54-833"><a href="#cb54-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-834"><a href="#cb54-834" aria-hidden="true" tabindex="-1"></a>df_TransportationExpenditure</span>
<span id="cb54-835"><a href="#cb54-835" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-836"><a href="#cb54-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-837"><a href="#cb54-837" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-838"><a href="#cb54-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-839"><a href="#cb54-839" aria-hidden="true" tabindex="-1"></a>The visualization shows two time series: the blue line represents all transportation spending as a percentage of total expenditures, while the red line shows just gasoline. Dashed trend lines reveal the long-term direction. Several insights emerge from these patterns:</span>
<span id="cb54-840"><a href="#cb54-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-841"><a href="#cb54-841" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Transportation spending as a share of total expenditures has remained relatively stable at 12-13% over the 30+ year period, suggesting transportation is a consistent household priority</span>
<span id="cb54-842"><a href="#cb54-842" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Gasoline spending fluctuates more than total transportation spending, reflecting volatile oil prices</span>
<span id="cb54-843"><a href="#cb54-843" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>When gasoline prices spike (visible as peaks in the red line), it absorbs a larger share of total transportation budgets, potentially crowding out other spending or changing travel behavior</span>
<span id="cb54-844"><a href="#cb54-844" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The gap between the lines represents non-gasoline transportation costs: vehicle purchases, insurance, maintenance, and public transit</span>
<span id="cb54-845"><a href="#cb54-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-848"><a href="#cb54-848" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-849"><a href="#cb54-849" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-850"><a href="#cb54-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-851"><a href="#cb54-851" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-852"><a href="#cb54-852" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-853"><a href="#cb54-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-854"><a href="#cb54-854" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Transportation Cost Percent of Total with a blue line</span></span>
<span id="cb54-855"><a href="#cb54-855" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Transportation Percent of Total'</span>,</span>
<span id="cb54-856"><a href="#cb54-856" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#0070C0'</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">'Transportation as </span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>)</span>
<span id="cb54-857"><a href="#cb54-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-858"><a href="#cb54-858" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Gasoline Percent of Total with a red line</span></span>
<span id="cb54-859"><a href="#cb54-859" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gasoline Percent of Total'</span>,</span>
<span id="cb54-860"><a href="#cb54-860" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#FF0000'</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, label<span class="op">=</span><span class="st">'Gasoline as </span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>)</span>
<span id="cb54-861"><a href="#cb54-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-862"><a href="#cb54-862" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-863"><a href="#cb54-863" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Transportation Percent of Total'</span>,</span>
<span id="cb54-864"><a href="#cb54-864" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-865"><a href="#cb54-865" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-866"><a href="#cb54-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-867"><a href="#cb54-867" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_TransportationExpenditure, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gasoline Percent of Total'</span>,</span>
<span id="cb54-868"><a href="#cb54-868" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-869"><a href="#cb54-869" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-870"><a href="#cb54-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-871"><a href="#cb54-871" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-872"><a href="#cb54-872" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Transportation as a Percent of Total Expenditure'</span>,</span>
<span id="cb54-873"><a href="#cb54-873" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-874"><a href="#cb54-874" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-875"><a href="#cb54-875" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f Total Expenditure'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-876"><a href="#cb54-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-877"><a href="#cb54-877" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-878"><a href="#cb54-878" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_TransportationExpenditure[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-879"><a href="#cb54-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-880"><a href="#cb54-880" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-881"><a href="#cb54-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-882"><a href="#cb54-882" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 14</span></span>
<span id="cb54-883"><a href="#cb54-883" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">14</span>)</span>
<span id="cb54-884"><a href="#cb54-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-885"><a href="#cb54-885" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-886"><a href="#cb54-886" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-887"><a href="#cb54-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-888"><a href="#cb54-888" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-889"><a href="#cb54-889" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-890"><a href="#cb54-890" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-891"><a href="#cb54-891" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-892"><a href="#cb54-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-893"><a href="#cb54-893" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-894"><a href="#cb54-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-895"><a href="#cb54-895" aria-hidden="true" tabindex="-1"></a>The comparison table evaluates whether 2023 values align with historical trends or deviate significantly. "Actual" shows the reported value from the data source for 2023. "Trend" shows the value predicted by a linear regression fit to all historical data.</span>
<span id="cb54-896"><a href="#cb54-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-897"><a href="#cb54-897" aria-hidden="true" tabindex="-1"></a>Large differences between actual and trend values warrant investigation. If actual spending exceeds the trend, it might indicate unusual fuel price spikes or increased travel demand. If actual spending falls below the trend, it could reflect improved fuel economy, reduced travel, or fuel price declines. Small differences suggest stability and that using trend-based projections for missing data would be reasonable.</span>
<span id="cb54-898"><a href="#cb54-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-901"><a href="#cb54-901" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-902"><a href="#cb54-902" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-903"><a href="#cb54-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-904"><a href="#cb54-904" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-905"><a href="#cb54-905" aria-hidden="true" tabindex="-1"></a>df_TranspExp_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-906"><a href="#cb54-906" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR],</span>
<span id="cb54-907"><a href="#cb54-907" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb54-908"><a href="#cb54-908" aria-hidden="true" tabindex="-1"></a>        df_TransportationExpenditure.loc[df_TransportationExpenditure[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Transportation Percent of Total'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-909"><a href="#cb54-909" aria-hidden="true" tabindex="-1"></a>        df_TransportationExpenditure.loc[df_TransportationExpenditure[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Gasoline Percent of Total'</span>].iloc[<span class="dv">0</span>]  <span class="co"># FIXED: THere is a potential error here in Excel sheet</span></span>
<span id="cb54-910"><a href="#cb54-910" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-911"><a href="#cb54-911" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb54-912"><a href="#cb54-912" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_TransportationExpenditure[<span class="st">'Year'</span>]),</span>
<span id="cb54-913"><a href="#cb54-913" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_TransportationExpenditure[<span class="st">'Transportation Percent of Total'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-914"><a href="#cb54-914" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_TransportationExpenditure[<span class="st">'Year'</span>]),</span>
<span id="cb54-915"><a href="#cb54-915" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_TransportationExpenditure[<span class="st">'Gasoline Percent of Total'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb54-916"><a href="#cb54-916" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-917"><a href="#cb54-917" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Transportation as % Total Expenditures'</span>, <span class="st">'Gasoline as % Total Expenditures'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb54-918"><a href="#cb54-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-919"><a href="#cb54-919" aria-hidden="true" tabindex="-1"></a>df_TranspExp_Comparision</span>
<span id="cb54-920"><a href="#cb54-920" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-921"><a href="#cb54-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-922"><a href="#cb54-922" aria-hidden="true" tabindex="-1"></a><span class="fu">### Auto Cost - Variable-Fixed</span></span>
<span id="cb54-923"><a href="#cb54-923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-924"><a href="#cb54-924" aria-hidden="true" tabindex="-1"></a>Understanding the split between variable and fixed costs is fundamental to travel demand modeling. Variable costsâ€”primarily fuel and maintenanceâ€”increase with each mile driven, so travelers experience them directly and may modify their behavior in response. Fixed costsâ€”insurance, depreciation, registration, and finance chargesâ€”must be paid regardless of whether the vehicle is driven 5,000 or 25,000 miles per year.</span>
<span id="cb54-925"><a href="#cb54-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-926"><a href="#cb54-926" aria-hidden="true" tabindex="-1"></a>Travel demand models typically include only variable costs because these represent the marginal cost of each trip. A traveler deciding whether to drive downtown doesn't consider their annual insurance premium (already paid) but does consider fuel and parking costs. By isolating variable costs and tracking how they've changed over time, we can better estimate the cost signals that influence travel decisions.</span>
<span id="cb54-927"><a href="#cb54-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-928"><a href="#cb54-928" aria-hidden="true" tabindex="-1"></a>This section also normalizes costs by the Consumer Price Index to distinguish between nominal increases (due to general inflation) and real increases (costs rising faster than inflation). If variable costs increase faster than the CPI, driving is becoming genuinely more expensive in real terms, which may encourage modal shifts or trip consolidation.</span>
<span id="cb54-929"><a href="#cb54-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-930"><a href="#cb54-930" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-931"><a href="#cb54-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-932"><a href="#cb54-932" aria-hidden="true" tabindex="-1"></a>The dataframe combines several cost components. "Variable" represents the cents-per-mile cost of fuel, maintenance, and tiresâ€”expenses that scale with mileage. "Fixed" represents annual costs for insurance, registration, depreciation, and finance charges. "Total" is the sum of variable and fixed costs.</span>
<span id="cb54-933"><a href="#cb54-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-934"><a href="#cb54-934" aria-hidden="true" tabindex="-1"></a>The "Per 15k" column converts the annual fixed cost into a per-mile equivalent by dividing by 15,000 milesâ€”the assumed annual travel in the AAA data. This allows direct comparison of fixed costs to variable costs on a per-mile basis, though it's important to remember this is an accounting convenience rather than a true marginal cost.</span>
<span id="cb54-935"><a href="#cb54-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-936"><a href="#cb54-936" aria-hidden="true" tabindex="-1"></a>"Variable/Total" shows what fraction of total costs are variableâ€”typically 30-40%. This indicates that most vehicle ownership costs are fixed commitments. "Variable/CPI" and "Fixed/CPI" divide costs by the Consumer Price Index to produce inflation-adjusted metrics. If these ratios increase over time, vehicle costs are rising faster than general inflation. If they decrease, vehicles are becoming relatively cheaper despite nominal price increases.</span>
<span id="cb54-937"><a href="#cb54-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-940"><a href="#cb54-940" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-941"><a href="#cb54-941" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-942"><a href="#cb54-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-943"><a href="#cb54-943" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb54-944"><a href="#cb54-944" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>))  <span class="co"># Last year should be one more than desired</span></span>
<span id="cb54-945"><a href="#cb54-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-946"><a href="#cb54-946" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb54-947"><a href="#cb54-947" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-948"><a href="#cb54-948" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb54-949"><a href="#cb54-949" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Variable"</span>: pd.to_numeric(</span>
<span id="cb54-950"><a href="#cb54-950" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">6</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-951"><a href="#cb54-951" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-952"><a href="#cb54-952" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-953"><a href="#cb54-953" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fixed"</span>: pd.to_numeric(</span>
<span id="cb54-954"><a href="#cb54-954" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">7</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-955"><a href="#cb54-955" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-956"><a href="#cb54-956" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-957"><a href="#cb54-957" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Total"</span>: pd.to_numeric(</span>
<span id="cb54-958"><a href="#cb54-958" aria-hidden="true" tabindex="-1"></a>      df_AverageCost.loc[<span class="dv">5</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-959"><a href="#cb54-959" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-960"><a href="#cb54-960" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-961"><a href="#cb54-961" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CPI"</span>: pd.to_numeric(</span>
<span id="cb54-962"><a href="#cb54-962" aria-hidden="true" tabindex="-1"></a>      df_CPI[df_CPI[<span class="st">'year'</span>].between(year_range[<span class="dv">0</span>], year_range[<span class="op">-</span><span class="dv">1</span>])][<span class="st">"annualaverage"</span>].values,</span>
<span id="cb54-963"><a href="#cb54-963" aria-hidden="true" tabindex="-1"></a>      errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-964"><a href="#cb54-964" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-965"><a href="#cb54-965" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-966"><a href="#cb54-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-967"><a href="#cb54-967" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Derived Columns</span></span>
<span id="cb54-968"><a href="#cb54-968" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Per 15k"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Fixed"</span>] <span class="op">/</span> <span class="dv">15000</span></span>
<span id="cb54-969"><a href="#cb54-969" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Variable/Total"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Variable"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"Total"</span>]</span>
<span id="cb54-970"><a href="#cb54-970" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Variable/CPI"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Variable"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"CPI"</span>]</span>
<span id="cb54-971"><a href="#cb54-971" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed[<span class="st">"Fixed/CPI"</span>] <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">"Fixed"</span>] <span class="op">/</span> df_AutoCost_VariableFixed[<span class="st">"CPI"</span>]</span>
<span id="cb54-972"><a href="#cb54-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-973"><a href="#cb54-973" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder columns</span></span>
<span id="cb54-974"><a href="#cb54-974" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed <span class="op">=</span> df_AutoCost_VariableFixed[[<span class="st">'Year'</span>, <span class="st">'Variable/Total'</span>, <span class="st">'Variable/CPI'</span>, <span class="st">'Fixed/CPI'</span>, <span class="st">'Variable'</span>, <span class="st">'Fixed'</span>, <span class="st">'Total'</span>, <span class="st">'Per 15k'</span>, <span class="st">'CPI'</span>]]</span>
<span id="cb54-975"><a href="#cb54-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-976"><a href="#cb54-976" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed</span>
<span id="cb54-977"><a href="#cb54-977" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-978"><a href="#cb54-978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-979"><a href="#cb54-979" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-980"><a href="#cb54-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-981"><a href="#cb54-981" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Fixed/CPI and Variable/CPI</span></span>
<span id="cb54-982"><a href="#cb54-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-983"><a href="#cb54-983" aria-hidden="true" tabindex="-1"></a>This chart normalizes both fixed and variable costs by the CPI to reveal real cost trends independent of general inflation. The smoothed spline curves reduce year-to-year noise to highlight underlying patterns.</span>
<span id="cb54-984"><a href="#cb54-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-985"><a href="#cb54-985" aria-hidden="true" tabindex="-1"></a>The green line (Fixed/CPI) shows whether fixed ownership costs are rising or falling in real terms. A rising trend means insurance, depreciation, and registration costs are outpacing inflation. The red line (Variable/CPI) does the same for operating costs.</span>
<span id="cb54-986"><a href="#cb54-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-987"><a href="#cb54-987" aria-hidden="true" tabindex="-1"></a>Notably, both series show considerable variation, reflecting the volatility of fuel prices (which dominate variable costs) and the episodic nature of insurance cost increases. The period from 2000-2010 saw rising real costs in both categories, while the 2010s showed some moderation. Understanding these patterns helps determine whether the base year represents typical conditions or an unusual outlier.</span>
<span id="cb54-988"><a href="#cb54-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-991"><a href="#cb54-991" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-992"><a href="#cb54-992" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-993"><a href="#cb54-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-994"><a href="#cb54-994" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-995"><a href="#cb54-995" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-996"><a href="#cb54-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-997"><a href="#cb54-997" aria-hidden="true" tabindex="-1"></a><span class="co"># Create smooth spline curves</span></span>
<span id="cb54-998"><a href="#cb54-998" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Year'</span>]</span>
<span id="cb54-999"><a href="#cb54-999" aria-hidden="true" tabindex="-1"></a>y_fixed <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Fixed/CPI'</span>]</span>
<span id="cb54-1000"><a href="#cb54-1000" aria-hidden="true" tabindex="-1"></a>y_variable <span class="op">=</span> df_AutoCost_VariableFixed[<span class="st">'Variable/CPI'</span>]</span>
<span id="cb54-1001"><a href="#cb54-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1002"><a href="#cb54-1002" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate smooth curves</span></span>
<span id="cb54-1003"><a href="#cb54-1003" aria-hidden="true" tabindex="-1"></a>x_smooth <span class="op">=</span> np.linspace(x.<span class="bu">min</span>(), x.<span class="bu">max</span>(), <span class="dv">300</span>)</span>
<span id="cb54-1004"><a href="#cb54-1004" aria-hidden="true" tabindex="-1"></a>spline_fixed <span class="op">=</span> make_interp_spline(x, y_fixed, k<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb54-1005"><a href="#cb54-1005" aria-hidden="true" tabindex="-1"></a>spline_variable <span class="op">=</span> make_interp_spline(x, y_variable, k<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb54-1006"><a href="#cb54-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1007"><a href="#cb54-1007" aria-hidden="true" tabindex="-1"></a>y_fixed_smooth <span class="op">=</span> spline_fixed(x_smooth)</span>
<span id="cb54-1008"><a href="#cb54-1008" aria-hidden="true" tabindex="-1"></a>y_variable_smooth <span class="op">=</span> spline_variable(x_smooth)</span>
<span id="cb54-1009"><a href="#cb54-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1010"><a href="#cb54-1010" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot smooth lines</span></span>
<span id="cb54-1011"><a href="#cb54-1011" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>x_smooth, y<span class="op">=</span>y_fixed_smooth, linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Fixed/CPI"</span>)</span>
<span id="cb54-1012"><a href="#cb54-1012" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>x_smooth, y<span class="op">=</span>y_variable_smooth, linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Variable/CPI"</span>)</span>
<span id="cb54-1013"><a href="#cb54-1013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1014"><a href="#cb54-1014" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1015"><a href="#cb54-1015" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb54-1016"><a href="#cb54-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1017"><a href="#cb54-1017" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1018"><a href="#cb54-1018" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Trendline of Fixed/CPI and Variable/CPI (1990â€“2020)'</span>,</span>
<span id="cb54-1019"><a href="#cb54-1019" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1020"><a href="#cb54-1020" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1021"><a href="#cb54-1021" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1022"><a href="#cb54-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1023"><a href="#cb54-1023" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1024"><a href="#cb54-1024" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost_VariableFixed[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1025"><a href="#cb54-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1026"><a href="#cb54-1026" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1027"><a href="#cb54-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1028"><a href="#cb54-1028" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to $40</span></span>
<span id="cb54-1029"><a href="#cb54-1029" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">40</span>)</span>
<span id="cb54-1030"><a href="#cb54-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1031"><a href="#cb54-1031" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1032"><a href="#cb54-1032" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1033"><a href="#cb54-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1034"><a href="#cb54-1034" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1035"><a href="#cb54-1035" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1036"><a href="#cb54-1036" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1037"><a href="#cb54-1037" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1038"><a href="#cb54-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1039"><a href="#cb54-1039" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Average Cost per Mile</span></span>
<span id="cb54-1040"><a href="#cb54-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1041"><a href="#cb54-1041" aria-hidden="true" tabindex="-1"></a>This stacked area chart visualizes the composition of total vehicle costs. The green area represents fixed costs, while the red area shows variable costs stacked on top. The total height at any year represents the total cost per 15,000 miles.</span>
<span id="cb54-1042"><a href="#cb54-1042" aria-hidden="true" tabindex="-1"></a>Several patterns emerge:</span>
<span id="cb54-1043"><a href="#cb54-1043" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1044"><a href="#cb54-1044" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Total costs have increased over time, rising from around $4,000 in 1990 to $9,000+ in recent years</span>
<span id="cb54-1045"><a href="#cb54-1045" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Variable costs (red) fluctuate more than fixed costs, visible in the undulating upper boundary</span>
<span id="cb54-1046"><a href="#cb54-1046" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Fixed costs (green) grow more steadily, reflecting consistent increases in insurance premiums and vehicle prices</span>
<span id="cb54-1047"><a href="#cb54-1047" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The variable cost portion occasionally spikes, particularly during periods of high oil prices (mid-2000s, early 2010s)</span>
<span id="cb54-1048"><a href="#cb54-1048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1049"><a href="#cb54-1049" aria-hidden="true" tabindex="-1"></a>The chart provides intuitive visual confirmation of the trend analysis while making the relative magnitudes immediately apparent to non-technical readers.</span>
<span id="cb54-1050"><a href="#cb54-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1053"><a href="#cb54-1053" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1054"><a href="#cb54-1054" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1055"><a href="#cb54-1055" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1056"><a href="#cb54-1056" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the stacked area plot</span></span>
<span id="cb54-1057"><a href="#cb54-1057" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1058"><a href="#cb54-1058" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1059"><a href="#cb54-1059" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the areas - Fixed on bottom, Variable on top</span></span>
<span id="cb54-1060"><a href="#cb54-1060" aria-hidden="true" tabindex="-1"></a>plt.fill_between(df_AutoCost_VariableFixed[<span class="st">'Year'</span>],</span>
<span id="cb54-1061"><a href="#cb54-1061" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,</span>
<span id="cb54-1062"><a href="#cb54-1062" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>],</span>
<span id="cb54-1063"><a href="#cb54-1063" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">'#9BBB59'</span>,</span>
<span id="cb54-1064"><a href="#cb54-1064" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span><span class="st">'Fixed'</span>)</span>
<span id="cb54-1065"><a href="#cb54-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1066"><a href="#cb54-1066" aria-hidden="true" tabindex="-1"></a>plt.fill_between(df_AutoCost_VariableFixed[<span class="st">'Year'</span>],</span>
<span id="cb54-1067"><a href="#cb54-1067" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>],</span>
<span id="cb54-1068"><a href="#cb54-1068" aria-hidden="true" tabindex="-1"></a>                 df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>] <span class="op">+</span> df_AutoCost_VariableFixed[<span class="st">'Variable'</span>],</span>
<span id="cb54-1069"><a href="#cb54-1069" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">'#C0504D'</span>,</span>
<span id="cb54-1070"><a href="#cb54-1070" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span><span class="st">'Variable'</span>)</span>
<span id="cb54-1071"><a href="#cb54-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1072"><a href="#cb54-1072" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1073"><a href="#cb54-1073" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.0f}</span><span class="ss">'</span>))</span>
<span id="cb54-1074"><a href="#cb54-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1075"><a href="#cb54-1075" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1076"><a href="#cb54-1076" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Total Cost per 15,000 Miles'</span>,</span>
<span id="cb54-1077"><a href="#cb54-1077" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1078"><a href="#cb54-1078" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1079"><a href="#cb54-1079" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USDs'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1080"><a href="#cb54-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1081"><a href="#cb54-1081" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1082"><a href="#cb54-1082" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost_VariableFixed[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1083"><a href="#cb54-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1084"><a href="#cb54-1084" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1085"><a href="#cb54-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1086"><a href="#cb54-1086" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits</span></span>
<span id="cb54-1087"><a href="#cb54-1087" aria-hidden="true" tabindex="-1"></a>plt.ylim(bottom<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb54-1088"><a href="#cb54-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1089"><a href="#cb54-1089" aria-hidden="true" tabindex="-1"></a><span class="co"># Add grid</span></span>
<span id="cb54-1090"><a href="#cb54-1090" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1091"><a href="#cb54-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1092"><a href="#cb54-1092" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1093"><a href="#cb54-1093" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1094"><a href="#cb54-1094" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1095"><a href="#cb54-1095" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1096"><a href="#cb54-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1097"><a href="#cb54-1097" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-1098"><a href="#cb54-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1099"><a href="#cb54-1099" aria-hidden="true" tabindex="-1"></a>This comparison assesses whether 2023 costs align with long-term trends. Each row compares the actual value from the AAA data against the predicted value from a linear trend fit to 1990-2023 data.</span>
<span id="cb54-1100"><a href="#cb54-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1101"><a href="#cb54-1101" aria-hidden="true" tabindex="-1"></a>"Variable" costs show whether fuel and maintenance in 2023 are higher or lower than historical patterns would predict. Given the volatility of fuel prices, some deviation is expected. Large positive deviations suggest an unusually expensive year, while negative deviations indicate relative affordability.</span>
<span id="cb54-1102"><a href="#cb54-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1103"><a href="#cb54-1103" aria-hidden="true" tabindex="-1"></a>"Fixed" costs are typically more stable, so large deviations are less common. "Fixed per 15,000 Miles" converts annual fixed costs to a per-mile basis for comparison purposes, though remember this is not a true marginal cost.</span>
<span id="cb54-1104"><a href="#cb54-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1105"><a href="#cb54-1105" aria-hidden="true" tabindex="-1"></a>Analysts should investigate any large discrepancies. If actual costs substantially exceed trends, using trend-based estimates might understate current costs. If actual costs fall well below trends, it might signal a structural change in the market or data collection methodology.</span>
<span id="cb54-1106"><a href="#cb54-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1109"><a href="#cb54-1109" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1110"><a href="#cb54-1110" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1111"><a href="#cb54-1111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1112"><a href="#cb54-1112" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-1113"><a href="#cb54-1113" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1114"><a href="#cb54-1114" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb54-1115"><a href="#cb54-1115" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb54-1116"><a href="#cb54-1116" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Variable'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1117"><a href="#cb54-1117" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Fixed'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1118"><a href="#cb54-1118" aria-hidden="true" tabindex="-1"></a>        df_AutoCost_VariableFixed.loc[df_AutoCost_VariableFixed[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Per 15k'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb54-1119"><a href="#cb54-1119" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-1120"><a href="#cb54-1120" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb54-1121"><a href="#cb54-1121" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb54-1122"><a href="#cb54-1122" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Variable'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1123"><a href="#cb54-1123" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb54-1124"><a href="#cb54-1124" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Fixed'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1125"><a href="#cb54-1125" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Year'</span>]),</span>
<span id="cb54-1126"><a href="#cb54-1126" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost_VariableFixed[<span class="st">'Per 15k'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb54-1127"><a href="#cb54-1127" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-1128"><a href="#cb54-1128" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Variable'</span>, <span class="st">'Fixed'</span>, <span class="st">'Fixed per 15,000 Miles'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb54-1129"><a href="#cb54-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1130"><a href="#cb54-1130" aria-hidden="true" tabindex="-1"></a>df_AutoCost_VariableFixed_Comparision</span>
<span id="cb54-1131"><a href="#cb54-1131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1132"><a href="#cb54-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1133"><a href="#cb54-1133" aria-hidden="true" tabindex="-1"></a><span class="fu">### Auto Cost</span></span>
<span id="cb54-1134"><a href="#cb54-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1135"><a href="#cb54-1135" aria-hidden="true" tabindex="-1"></a>This subsection isolates the two primary variable cost components that appear in travel demand models: fuel costs and maintenance-plus-tires. While the previous section examined total variable costs, here we separate gasoline specifically from other variable expenses.</span>
<span id="cb54-1136"><a href="#cb54-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1137"><a href="#cb54-1137" aria-hidden="true" tabindex="-1"></a>Fuel costs respond directly to oil markets and refinery economics. Maintenance and tire costs respond to vehicle reliability, parts prices, and labor rates. By analyzing these separately, we can identify which component drives changes in total variable costs and assess whether they move together or independently.</span>
<span id="cb54-1138"><a href="#cb54-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1139"><a href="#cb54-1139" aria-hidden="true" tabindex="-1"></a>This disaggregation also allows us to construct operating costs from first principles: calculating fuel cost per mile (price per gallon Ã· miles per gallon) and adding maintenance cost per mile. This bottom-up approach provides more transparency than using aggregated cost figures.</span>
<span id="cb54-1140"><a href="#cb54-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1141"><a href="#cb54-1141" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-1142"><a href="#cb54-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1143"><a href="#cb54-1143" aria-hidden="true" tabindex="-1"></a>The dataframe extracts three series from the AAA average cost data: "Gas" (the cents-per-mile fuel cost), "Maint" (maintenance cost per mile), and "Tires" (tire cost per mile). In some years, maintenance and tires are reported separately; in others, they're combined. The code uses <span class="in">`.fillna(0)`</span> to handle missing values, ensuring that when only one value is present, the sum still works correctly.</span>
<span id="cb54-1144"><a href="#cb54-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1145"><a href="#cb54-1145" aria-hidden="true" tabindex="-1"></a>"Maint+Tires" combines these two closely related costs. Both represent wear-and-tear expenses that scale with mileage. Maintenance includes oil changes, brake replacements, and routine service. Tires wear out with miles driven and must be replaced periodically. Together, they represent the non-fuel variable costs of driving.</span>
<span id="cb54-1146"><a href="#cb54-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1149"><a href="#cb54-1149" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1150"><a href="#cb54-1150" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb54-1151"><a href="#cb54-1151" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb54-1152"><a href="#cb54-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1153"><a href="#cb54-1153" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb54-1154"><a href="#cb54-1154" aria-hidden="true" tabindex="-1"></a>df_AutoCost <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1155"><a href="#cb54-1155" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: year_range,</span>
<span id="cb54-1156"><a href="#cb54-1156" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Gas"</span>: pd.to_numeric(</span>
<span id="cb54-1157"><a href="#cb54-1157" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">1</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1158"><a href="#cb54-1158" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1159"><a href="#cb54-1159" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-1160"><a href="#cb54-1160" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Maint"</span>: pd.to_numeric(</span>
<span id="cb54-1161"><a href="#cb54-1161" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1162"><a href="#cb54-1162" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1163"><a href="#cb54-1163" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-1164"><a href="#cb54-1164" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tires"</span>: pd.to_numeric(</span>
<span id="cb54-1165"><a href="#cb54-1165" aria-hidden="true" tabindex="-1"></a>        df_AverageCost.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1166"><a href="#cb54-1166" aria-hidden="true" tabindex="-1"></a>        errors<span class="op">=</span><span class="st">"coerce"</span>   <span class="co"># turns "U" into NaN</span></span>
<span id="cb54-1167"><a href="#cb54-1167" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-1168"><a href="#cb54-1168" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-1169"><a href="#cb54-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1170"><a href="#cb54-1170" aria-hidden="true" tabindex="-1"></a>df_AutoCost[<span class="st">"Maint+Tires"</span>] <span class="op">=</span> df_AutoCost[<span class="st">"Maint"</span>].fillna(<span class="dv">0</span>) <span class="op">+</span> df_AutoCost[<span class="st">"Tires"</span>].fillna(<span class="dv">0</span>)</span>
<span id="cb54-1171"><a href="#cb54-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1172"><a href="#cb54-1172" aria-hidden="true" tabindex="-1"></a><span class="co"># View Dataframe</span></span>
<span id="cb54-1173"><a href="#cb54-1173" aria-hidden="true" tabindex="-1"></a>df_AutoCost</span>
<span id="cb54-1174"><a href="#cb54-1174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1175"><a href="#cb54-1175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1176"><a href="#cb54-1176" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-1177"><a href="#cb54-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1178"><a href="#cb54-1178" aria-hidden="true" tabindex="-1"></a>The visualization compares fuel costs (blue line) with maintenance-plus-tires costs (red line). Dashed trend lines show the long-term trajectory of each component.</span>
<span id="cb54-1179"><a href="#cb54-1179" aria-hidden="true" tabindex="-1"></a>Key observations:</span>
<span id="cb54-1180"><a href="#cb54-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1181"><a href="#cb54-1181" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Fuel costs (blue) are consistently higher than maintenance costs and show more volatility, reflecting oil price fluctuations</span>
<span id="cb54-1182"><a href="#cb54-1182" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Maintenance costs (red) increase gradually over time, likely driven by parts price inflation and increasing vehicle complexity</span>
<span id="cb54-1183"><a href="#cb54-1183" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The gap between the lines varies with fuel pricesâ€”during high oil price periods, fuel costs can be 2-3 times maintenance costs</span>
<span id="cb54-1184"><a href="#cb54-1184" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Both show upward trends, but fuel costs rise more steeply, meaning fuel is becoming a larger fraction of variable costs</span>
<span id="cb54-1185"><a href="#cb54-1185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1186"><a href="#cb54-1186" aria-hidden="true" tabindex="-1"></a>The trend lines provide predicted values for the base year that smooth out year-to-year fluctuations. If 2023 data points fall close to trend lines, using trend-based estimates is justified. Large deviations suggest the need to use actual values or investigate the causes of unusual costs.</span>
<span id="cb54-1187"><a href="#cb54-1187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1190"><a href="#cb54-1190" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1191"><a href="#cb54-1191" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1192"><a href="#cb54-1192" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1193"><a href="#cb54-1193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1194"><a href="#cb54-1194" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed/CPI with a green line</span></span>
<span id="cb54-1195"><a href="#cb54-1195" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Gas"</span>,</span>
<span id="cb54-1196"><a href="#cb54-1196" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Gas"</span>)</span>
<span id="cb54-1197"><a href="#cb54-1197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1198"><a href="#cb54-1198" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable/CPI with a red line</span></span>
<span id="cb54-1199"><a href="#cb54-1199" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Maint+Tires"</span>,</span>
<span id="cb54-1200"><a href="#cb54-1200" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Maint+Tires"</span>)</span>
<span id="cb54-1201"><a href="#cb54-1201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1202"><a href="#cb54-1202" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1203"><a href="#cb54-1203" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Gas'</span>,</span>
<span id="cb54-1204"><a href="#cb54-1204" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1205"><a href="#cb54-1205" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1206"><a href="#cb54-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1207"><a href="#cb54-1207" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_AutoCost, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Maint+Tires'</span>,</span>
<span id="cb54-1208"><a href="#cb54-1208" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1209"><a href="#cb54-1209" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1210"><a href="#cb54-1210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1211"><a href="#cb54-1211" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1212"><a href="#cb54-1212" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1213"><a href="#cb54-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1214"><a href="#cb54-1214" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1215"><a href="#cb54-1215" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Auto Costs'</span>,</span>
<span id="cb54-1216"><a href="#cb54-1216" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1217"><a href="#cb54-1217" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1218"><a href="#cb54-1218" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USDs'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1219"><a href="#cb54-1219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1220"><a href="#cb54-1220" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1221"><a href="#cb54-1221" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_AutoCost[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1222"><a href="#cb54-1222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1223"><a href="#cb54-1223" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1224"><a href="#cb54-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1225"><a href="#cb54-1225" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits</span></span>
<span id="cb54-1226"><a href="#cb54-1226" aria-hidden="true" tabindex="-1"></a>plt.ylim(bottom<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb54-1227"><a href="#cb54-1227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1228"><a href="#cb54-1228" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1229"><a href="#cb54-1229" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1230"><a href="#cb54-1230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1231"><a href="#cb54-1231" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1232"><a href="#cb54-1232" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1233"><a href="#cb54-1233" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1234"><a href="#cb54-1234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1235"><a href="#cb54-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1236"><a href="#cb54-1236" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-1237"><a href="#cb54-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1238"><a href="#cb54-1238" aria-hidden="true" tabindex="-1"></a>This table compares 2023 actual costs against trend predictions for both fuel and maintenance-plus-tires.</span>
<span id="cb54-1239"><a href="#cb54-1239" aria-hidden="true" tabindex="-1"></a>The "Gas" row reveals whether fuel prices in 2023 are high or low relative to the long-term trend. Fuel markets are volatile, so moderate deviations are normal. Large deviations might reflect temporary supply disruptions, geopolitical events, or unusual demand conditions.</span>
<span id="cb54-1240"><a href="#cb54-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1241"><a href="#cb54-1241" aria-hidden="true" tabindex="-1"></a>The "Maint+Tires" row is typically more stable. Significant deviations here might indicate changes in vehicle reliability (newer vehicles requiring less maintenance), shifts in labor costs, or changes in how AAA calculates these figures.</span>
<span id="cb54-1242"><a href="#cb54-1242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1243"><a href="#cb54-1243" aria-hidden="true" tabindex="-1"></a>For travel demand models, using trend values rather than actual values can be justified when actual values represent temporary anomalies. However, if the deviation persists across multiple years, it may signal a structural shift requiring adjustment to the model.</span>
<span id="cb54-1244"><a href="#cb54-1244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1247"><a href="#cb54-1247" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1248"><a href="#cb54-1248" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-1249"><a href="#cb54-1249" aria-hidden="true" tabindex="-1"></a>df_AutoCost_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1250"><a href="#cb54-1250" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR],</span>
<span id="cb54-1251"><a href="#cb54-1251" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb54-1252"><a href="#cb54-1252" aria-hidden="true" tabindex="-1"></a>        df_AutoCost.loc[df_AutoCost[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Gas'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1253"><a href="#cb54-1253" aria-hidden="true" tabindex="-1"></a>        df_AutoCost.loc[df_AutoCost[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Maint+Tires'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb54-1254"><a href="#cb54-1254" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-1255"><a href="#cb54-1255" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb54-1256"><a href="#cb54-1256" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost[<span class="st">'Year'</span>]),</span>
<span id="cb54-1257"><a href="#cb54-1257" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost[<span class="st">'Gas'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1258"><a href="#cb54-1258" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_AutoCost[<span class="st">'Year'</span>]),</span>
<span id="cb54-1259"><a href="#cb54-1259" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_AutoCost[<span class="st">'Maint+Tires'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb54-1260"><a href="#cb54-1260" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-1261"><a href="#cb54-1261" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Gas'</span>, <span class="st">'Maint+Tires'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb54-1262"><a href="#cb54-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1263"><a href="#cb54-1263" aria-hidden="true" tabindex="-1"></a>df_AutoCost_Comparision</span>
<span id="cb54-1264"><a href="#cb54-1264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1265"><a href="#cb54-1265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1266"><a href="#cb54-1266" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vehicle Miles - Trucks</span></span>
<span id="cb54-1267"><a href="#cb54-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1268"><a href="#cb54-1268" aria-hidden="true" tabindex="-1"></a>Average annual vehicle miles traveled (VMT) varies dramatically by truck class. Light trucks (pickups and SUVs used for personal travel) typically drive 10,000-15,000 miles per year. Medium trucks (delivery vehicles) might drive 15,000-25,000 miles. Heavy trucks (long-haul tractor-trailers) often exceed 60,000 miles annually.</span>
<span id="cb54-1269"><a href="#cb54-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1270"><a href="#cb54-1270" aria-hidden="true" tabindex="-1"></a>Understanding these patterns serves two purposes. First, it helps calibrate whether our fuel economy and cost estimates are reasonableâ€”a vehicle class with unusually high or low VMT should have corresponding impacts on total fuel consumption. Second, it informs how we weight different vehicle classes when calculating fleet-average statistics.</span>
<span id="cb54-1271"><a href="#cb54-1271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1272"><a href="#cb54-1272" aria-hidden="true" tabindex="-1"></a>This subsection tracks trends in truck VMT over time. Are trucks driving more miles as the economy grows and freight demand increases? Are efficiency improvements or modal shifts reducing truck VMT? The analysis looks at both the full 1990-2023 period and a 2000-2023 subset to check whether recent trends differ from long-term patterns.</span>
<span id="cb54-1273"><a href="#cb54-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1274"><a href="#cb54-1274" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-1275"><a href="#cb54-1275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1276"><a href="#cb54-1276" aria-hidden="true" tabindex="-1"></a>The dataframe compiles average annual VMT for three truck categories. "Heavy" refers to combination trucksâ€”tractor-trailers used for long-haul freight. "Medium" covers single-unit trucksâ€”delivery vehicles, utility trucks, and other medium-duty applications. "Light" includes pickup trucks and SUVs primarily used for personal transportation or light commercial purposes.</span>
<span id="cb54-1277"><a href="#cb54-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1278"><a href="#cb54-1278" aria-hidden="true" tabindex="-1"></a>The data comes from BTS tables that compile Federal Highway Administration statistics on vehicle registration, fuel consumption, and estimated miles traveled. Dividing total miles by number of vehicles yields average VMT per vehicle. These are fleet-wide averages; individual vehicles may drive considerably more or less depending on their specific usage patterns.</span>
<span id="cb54-1279"><a href="#cb54-1279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1282"><a href="#cb54-1282" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1283"><a href="#cb54-1283" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1284"><a href="#cb54-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1285"><a href="#cb54-1285" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb54-1286"><a href="#cb54-1286" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year should be one more than desired</span></span>
<span id="cb54-1287"><a href="#cb54-1287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1288"><a href="#cb54-1288" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb54-1289"><a href="#cb54-1289" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy.columns <span class="op">=</span> df_FE_Heavy.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1290"><a href="#cb54-1290" aria-hidden="true" tabindex="-1"></a>df_FE_Medium.columns <span class="op">=</span> df_FE_Medium.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1291"><a href="#cb54-1291" aria-hidden="true" tabindex="-1"></a>df_4_11.columns <span class="op">=</span> df_4_11.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1292"><a href="#cb54-1292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1293"><a href="#cb54-1293" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb54-1294"><a href="#cb54-1294" aria-hidden="true" tabindex="-1"></a>df_VehicleMiles_Truck <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1295"><a href="#cb54-1295" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Year"</span>: year_range,</span>
<span id="cb54-1296"><a href="#cb54-1296" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Heavy"</span>: pd.to_numeric(</span>
<span id="cb54-1297"><a href="#cb54-1297" aria-hidden="true" tabindex="-1"></a>    df_FE_Heavy.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1298"><a href="#cb54-1298" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1299"><a href="#cb54-1299" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb54-1300"><a href="#cb54-1300" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Medium"</span>: pd.to_numeric(</span>
<span id="cb54-1301"><a href="#cb54-1301" aria-hidden="true" tabindex="-1"></a>    df_FE_Medium.loc[<span class="dv">3</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1302"><a href="#cb54-1302" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1303"><a href="#cb54-1303" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb54-1304"><a href="#cb54-1304" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Light"</span>: pd.to_numeric(</span>
<span id="cb54-1305"><a href="#cb54-1305" aria-hidden="true" tabindex="-1"></a>    df_4_11.loc[<span class="dv">10</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1306"><a href="#cb54-1306" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1307"><a href="#cb54-1307" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-1308"><a href="#cb54-1308" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-1309"><a href="#cb54-1309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1310"><a href="#cb54-1310" aria-hidden="true" tabindex="-1"></a><span class="co"># View dataframe</span></span>
<span id="cb54-1311"><a href="#cb54-1311" aria-hidden="true" tabindex="-1"></a>df_VehicleMiles_Truck</span>
<span id="cb54-1312"><a href="#cb54-1312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1313"><a href="#cb54-1313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1314"><a href="#cb54-1314" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-1315"><a href="#cb54-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1316"><a href="#cb54-1316" aria-hidden="true" tabindex="-1"></a><span class="fu">##### 1990 - 2023</span></span>
<span id="cb54-1317"><a href="#cb54-1317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1318"><a href="#cb54-1318" aria-hidden="true" tabindex="-1"></a>This chart shows VMT trends for all three truck classes over the full data period. The blue line (Heavy) shows that long-haul trucks average 50,000-70,000 miles per year with a generally flat trendâ€”these vehicles are already used intensively, and there's limited room for further increases. The red line (Medium) shows medium trucks traveling 12,000-16,000 miles annually with moderate growth, reflecting increased delivery activity. The green line (Light) shows light trucks at 11,000-13,000 miles per year, similar to passenger cars.</span>
<span id="cb54-1319"><a href="#cb54-1319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1320"><a href="#cb54-1320" aria-hidden="true" tabindex="-1"></a>Only the heavy truck trend line is shown here (dashed blue) to avoid visual clutter, as it's the most stable series. The relatively flat trend for heavy trucks suggests that regulatory limits on driver hours and the physical constraints of long-haul trucking have kept average VMT stable even as total freight volumes have grown (accommodated by adding more trucks rather than driving each truck further).</span>
<span id="cb54-1321"><a href="#cb54-1321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1324"><a href="#cb54-1324" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1325"><a href="#cb54-1325" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1326"><a href="#cb54-1326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1327"><a href="#cb54-1327" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1328"><a href="#cb54-1328" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1329"><a href="#cb54-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1330"><a href="#cb54-1330" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1331"><a href="#cb54-1331" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy"</span>,</span>
<span id="cb54-1332"><a href="#cb54-1332" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Heavy"</span>)</span>
<span id="cb54-1333"><a href="#cb54-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1334"><a href="#cb54-1334" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1335"><a href="#cb54-1335" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium"</span>,</span>
<span id="cb54-1336"><a href="#cb54-1336" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#BE4B48"</span>, label<span class="op">=</span><span class="st">"Medium"</span>)</span>
<span id="cb54-1337"><a href="#cb54-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1338"><a href="#cb54-1338" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1339"><a href="#cb54-1339" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light"</span>,</span>
<span id="cb54-1340"><a href="#cb54-1340" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#98B954"</span>, label<span class="op">=</span><span class="st">"Light"</span>)</span>
<span id="cb54-1341"><a href="#cb54-1341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1342"><a href="#cb54-1342" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1343"><a href="#cb54-1343" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy'</span>,</span>
<span id="cb54-1344"><a href="#cb54-1344" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1345"><a href="#cb54-1345" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1346"><a href="#cb54-1346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1347"><a href="#cb54-1347" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1348"><a href="#cb54-1348" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Vehicle Miles - Trucks (1990 - 2023)'</span>,</span>
<span id="cb54-1349"><a href="#cb54-1349" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1350"><a href="#cb54-1350" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1351"><a href="#cb54-1351" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1352"><a href="#cb54-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1353"><a href="#cb54-1353" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1354"><a href="#cb54-1354" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_VehicleMiles_Truck[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1355"><a href="#cb54-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1356"><a href="#cb54-1356" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1357"><a href="#cb54-1357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1358"><a href="#cb54-1358" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 80</span></span>
<span id="cb54-1359"><a href="#cb54-1359" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">80</span>)</span>
<span id="cb54-1360"><a href="#cb54-1360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1361"><a href="#cb54-1361" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1362"><a href="#cb54-1362" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1363"><a href="#cb54-1363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1364"><a href="#cb54-1364" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1365"><a href="#cb54-1365" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1366"><a href="#cb54-1366" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1367"><a href="#cb54-1367" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1368"><a href="#cb54-1368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1369"><a href="#cb54-1369" aria-hidden="true" tabindex="-1"></a><span class="fu">##### 2000 - 2023</span></span>
<span id="cb54-1370"><a href="#cb54-1370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1371"><a href="#cb54-1371" aria-hidden="true" tabindex="-1"></a>This chart focuses on the more recent period to check whether trends have changed. All three trend lines are now shown (dashed).</span>
<span id="cb54-1372"><a href="#cb54-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1373"><a href="#cb54-1373" aria-hidden="true" tabindex="-1"></a>Comparing to the 1990-2023 chart reveals that light and medium truck VMT patterns changed around 2000. The 2000+ trends show slight increases for medium trucks (driven by e-commerce growth and more frequent deliveries) and slight decreases for light trucks (possibly reflecting higher fuel prices making owners more selective about trip-making).</span>
<span id="cb54-1374"><a href="#cb54-1374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1375"><a href="#cb54-1375" aria-hidden="true" tabindex="-1"></a>Heavy truck VMT remains remarkably stable across both time periods, confirming that these vehicles are operated at maximum intensity regardless of economic conditions. This stability makes heavy truck operating costs particularly sensitive to fuel price changesâ€”operators cannot significantly reduce miles to offset higher fuel costs.</span>
<span id="cb54-1376"><a href="#cb54-1376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1379"><a href="#cb54-1379" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1380"><a href="#cb54-1380" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1381"><a href="#cb54-1381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1382"><a href="#cb54-1382" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1383"><a href="#cb54-1383" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1384"><a href="#cb54-1384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1385"><a href="#cb54-1385" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1386"><a href="#cb54-1386" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy"</span>,</span>
<span id="cb54-1387"><a href="#cb54-1387" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Heavy"</span>)</span>
<span id="cb54-1388"><a href="#cb54-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1389"><a href="#cb54-1389" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1390"><a href="#cb54-1390" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium"</span>,</span>
<span id="cb54-1391"><a href="#cb54-1391" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#BE4B48"</span>, label<span class="op">=</span><span class="st">"Medium"</span>)</span>
<span id="cb54-1392"><a href="#cb54-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1393"><a href="#cb54-1393" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1394"><a href="#cb54-1394" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light"</span>,</span>
<span id="cb54-1395"><a href="#cb54-1395" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Light"</span>)</span>
<span id="cb54-1396"><a href="#cb54-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1397"><a href="#cb54-1397" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1398"><a href="#cb54-1398" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy'</span>,</span>
<span id="cb54-1399"><a href="#cb54-1399" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1400"><a href="#cb54-1400" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1401"><a href="#cb54-1401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1402"><a href="#cb54-1402" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1403"><a href="#cb54-1403" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Medium'</span>,</span>
<span id="cb54-1404"><a href="#cb54-1404" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1405"><a href="#cb54-1405" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1406"><a href="#cb54-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1407"><a href="#cb54-1407" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1408"><a href="#cb54-1408" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_VehicleMiles_Truck, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Light'</span>,</span>
<span id="cb54-1409"><a href="#cb54-1409" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#00B050'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1410"><a href="#cb54-1410" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1411"><a href="#cb54-1411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1412"><a href="#cb54-1412" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1413"><a href="#cb54-1413" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Vehicle Miles - Trucks (2000 - 2023)'</span>,</span>
<span id="cb54-1414"><a href="#cb54-1414" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1415"><a href="#cb54-1415" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1416"><a href="#cb54-1416" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1417"><a href="#cb54-1417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1418"><a href="#cb54-1418" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1419"><a href="#cb54-1419" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_VehicleMiles_Truck[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1420"><a href="#cb54-1420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1421"><a href="#cb54-1421" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper right'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1422"><a href="#cb54-1422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1423"><a href="#cb54-1423" aria-hidden="true" tabindex="-1"></a><span class="co"># Set x-axis limits to show only 2000-2023</span></span>
<span id="cb54-1424"><a href="#cb54-1424" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">2000</span>, BASE_YEAR)</span>
<span id="cb54-1425"><a href="#cb54-1425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1426"><a href="#cb54-1426" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 80</span></span>
<span id="cb54-1427"><a href="#cb54-1427" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">80</span>)</span>
<span id="cb54-1428"><a href="#cb54-1428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1429"><a href="#cb54-1429" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1430"><a href="#cb54-1430" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1431"><a href="#cb54-1431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1432"><a href="#cb54-1432" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1433"><a href="#cb54-1433" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1434"><a href="#cb54-1434" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1435"><a href="#cb54-1435" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1436"><a href="#cb54-1436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1437"><a href="#cb54-1437" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-1438"><a href="#cb54-1438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1439"><a href="#cb54-1439" aria-hidden="true" tabindex="-1"></a>This comparison table shows 2023 VMT estimates using two different trend periods: 1990-2023 and 2000-2023.</span>
<span id="cb54-1440"><a href="#cb54-1440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1441"><a href="#cb54-1441" aria-hidden="true" tabindex="-1"></a>The first three rows use the full data period. The second three rows use only post-2000 data. Comparing these reveals whether recent trends differ from long-term patterns. If the two trend estimates are similar, it suggests stable, consistent behavior. Large differences indicate a structural break around 2000, making recent trends more relevant for current-year estimates.</span>
<span id="cb54-1442"><a href="#cb54-1442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1443"><a href="#cb54-1443" aria-hidden="true" tabindex="-1"></a>For heavy trucks, both approaches yield similar results, confirming the stability of this market segment. For light and medium trucks, the estimates may differ more, reflecting the changing roles of these vehicles in the economy. Medium truck VMT has likely increased with e-commerce growth, while light truck VMT may have declined as fuel economy concerns limited discretionary driving.</span>
<span id="cb54-1444"><a href="#cb54-1444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1447"><a href="#cb54-1447" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1448"><a href="#cb54-1448" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb54-1449"><a href="#cb54-1449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1450"><a href="#cb54-1450" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-1451"><a href="#cb54-1451" aria-hidden="true" tabindex="-1"></a>df_VMTrucks_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1452"><a href="#cb54-1452" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb54-1453"><a href="#cb54-1453" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb54-1454"><a href="#cb54-1454" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1455"><a href="#cb54-1455" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1456"><a href="#cb54-1456" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1457"><a href="#cb54-1457" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1458"><a href="#cb54-1458" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1459"><a href="#cb54-1459" aria-hidden="true" tabindex="-1"></a>        df_VehicleMiles_Truck.loc[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb54-1460"><a href="#cb54-1460" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-1461"><a href="#cb54-1461" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb54-1462"><a href="#cb54-1462" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb54-1463"><a href="#cb54-1463" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Heavy'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1464"><a href="#cb54-1464" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb54-1465"><a href="#cb54-1465" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Medium'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1466"><a href="#cb54-1466" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Year'</span>]),</span>
<span id="cb54-1467"><a href="#cb54-1467" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_VehicleMiles_Truck[<span class="st">'Light'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1468"><a href="#cb54-1468" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Last 3: Use only data from 2000+</span></span>
<span id="cb54-1469"><a href="#cb54-1469" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb54-1470"><a href="#cb54-1470" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb54-1471"><a href="#cb54-1471" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Heavy'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1472"><a href="#cb54-1472" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb54-1473"><a href="#cb54-1473" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb54-1474"><a href="#cb54-1474" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Medium'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1475"><a href="#cb54-1475" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(</span>
<span id="cb54-1476"><a href="#cb54-1476" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Year'</span>]),</span>
<span id="cb54-1477"><a href="#cb54-1477" aria-hidden="true" tabindex="-1"></a>          pd.to_numeric(df_VehicleMiles_Truck[df_VehicleMiles_Truck[<span class="st">'Year'</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>][<span class="st">'Light'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb54-1478"><a href="#cb54-1478" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-1479"><a href="#cb54-1479" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Heavy Trucks  - 1990+'</span>, <span class="st">'Medium Trucks  - 1990+'</span>, <span class="st">'Light Trucks  - 1990+'</span>,</span>
<span id="cb54-1480"><a href="#cb54-1480" aria-hidden="true" tabindex="-1"></a><span class="st">'Heavy Trucks  - 2000+'</span>, <span class="st">'Medium Trucks  - 2000+'</span>, <span class="st">'Light Trucks  - 2000+'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb54-1481"><a href="#cb54-1481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1482"><a href="#cb54-1482" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: '1980+' should be changed to '1990+'</span></span>
<span id="cb54-1483"><a href="#cb54-1483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1484"><a href="#cb54-1484" aria-hidden="true" tabindex="-1"></a>df_VMTrucks_Comparision</span>
<span id="cb54-1485"><a href="#cb54-1485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1486"><a href="#cb54-1486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1487"><a href="#cb54-1487" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Economy</span></span>
<span id="cb54-1488"><a href="#cb54-1488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1489"><a href="#cb54-1489" aria-hidden="true" tabindex="-1"></a>Fuel economyâ€”miles traveled per gallon of fuel consumedâ€”directly determines fuel costs per mile. A vehicle that achieves 25 miles per gallon at $3.00/gallon costs $0.12 per mile for fuel. One that achieves only 6 miles per gallon costs $0.50 per mileâ€”more than four times as much.</span>
<span id="cb54-1490"><a href="#cb54-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1491"><a href="#cb54-1491" aria-hidden="true" tabindex="-1"></a>Fuel economy has improved substantially over time due to technological advances (better engines, transmissions, aerodynamics) and regulatory pressure (CAFE standards for cars and light trucks, fuel economy standards for heavy trucks). However, improvements vary by vehicle class. Light-duty vehicles have seen dramatic gains, rising from under 20 mpg in the 1980s to over 25 mpg today. Heavy trucks have improved more modestly, from 5.5 to 6.5 mpg, because the physics of moving heavy loads limits efficiency gains.</span>
<span id="cb54-1492"><a href="#cb54-1492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1493"><a href="#cb54-1493" aria-hidden="true" tabindex="-1"></a>This subsection tracks fuel economy trends for three vehicle classes: light-duty (cars and small SUVs), medium-duty (delivery trucks), and heavy-duty (tractor-trailers). By comparing actual 2023 fuel economy against long-term trends, we can assess whether recent values are typical or represent unusual efficiency improvements or setbacks.</span>
<span id="cb54-1494"><a href="#cb54-1494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1495"><a href="#cb54-1495" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-1496"><a href="#cb54-1496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1497"><a href="#cb54-1497" aria-hidden="true" tabindex="-1"></a>The dataframe compiles fuel economy data for three truck/vehicle categories spanning 1980-2023. The year range starts earlier than other series (1980 and 1985 are included) to capture the full arc of fuel economy improvement following the oil crises of the 1970s.</span>
<span id="cb54-1498"><a href="#cb54-1498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1499"><a href="#cb54-1499" aria-hidden="true" tabindex="-1"></a>"Light Duty" comes from BTS Table 4-23, which tracks average fuel economy of the U.S. light-duty vehicle fleetâ€”both cars and light trucks weighted by their share of vehicle miles traveled. This represents actual on-road fuel economy, which is typically 20-25% lower than EPA test ratings due to aggressive driving, air conditioning use, cold starts, and other real-world factors.</span>
<span id="cb54-1500"><a href="#cb54-1500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1501"><a href="#cb54-1501" aria-hidden="true" tabindex="-1"></a>"Medium Duty" and "Heavy Duty" come from BTS tables on single-unit and combination trucks. These are calculated by dividing total miles traveled by total fuel consumed for each truck class. Note that a calculation error in the original analysis has been correctedâ€”the code now properly extracts fuel economy (row 4) rather than fuel consumption (row 5).</span>
<span id="cb54-1502"><a href="#cb54-1502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1505"><a href="#cb54-1505" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1506"><a href="#cb54-1506" aria-hidden="true" tabindex="-1"></a><span class="co"># Define year range</span></span>
<span id="cb54-1507"><a href="#cb54-1507" aria-hidden="true" tabindex="-1"></a>year_range <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">1985</span>] <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1990</span>, BASE_YEAR<span class="op">+</span><span class="dv">1</span>)) <span class="co"># Last year of the range should be one more than desired</span></span>
<span id="cb54-1508"><a href="#cb54-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1509"><a href="#cb54-1509" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure column names are strings in both DataFrames to avoid indexing issues</span></span>
<span id="cb54-1510"><a href="#cb54-1510" aria-hidden="true" tabindex="-1"></a>df_FE_LightDuty.columns <span class="op">=</span> df_FE_LightDuty.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1511"><a href="#cb54-1511" aria-hidden="true" tabindex="-1"></a>df_FE_Medium.columns <span class="op">=</span> df_FE_Medium.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1512"><a href="#cb54-1512" aria-hidden="true" tabindex="-1"></a>df_FE_Heavy.columns <span class="op">=</span> df_FE_Heavy.columns.astype(<span class="bu">str</span>)</span>
<span id="cb54-1513"><a href="#cb54-1513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1514"><a href="#cb54-1514" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb54-1515"><a href="#cb54-1515" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1516"><a href="#cb54-1516" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Year"</span>: year_range,</span>
<span id="cb54-1517"><a href="#cb54-1517" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Light Duty"</span>: pd.to_numeric(</span>
<span id="cb54-1518"><a href="#cb54-1518" aria-hidden="true" tabindex="-1"></a>    df_FE_LightDuty.loc[<span class="dv">0</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values,</span>
<span id="cb54-1519"><a href="#cb54-1519" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1520"><a href="#cb54-1520" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb54-1521"><a href="#cb54-1521" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Medium Duty"</span>: pd.to_numeric(</span>
<span id="cb54-1522"><a href="#cb54-1522" aria-hidden="true" tabindex="-1"></a>    df_FE_Medium.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values, <span class="co"># FIXED: Mistake in original calculation; use this instead</span></span>
<span id="cb54-1523"><a href="#cb54-1523" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1524"><a href="#cb54-1524" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb54-1525"><a href="#cb54-1525" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Heavy Duty"</span>: pd.to_numeric(</span>
<span id="cb54-1526"><a href="#cb54-1526" aria-hidden="true" tabindex="-1"></a>    df_FE_Heavy.loc[<span class="dv">4</span>, <span class="bu">str</span>(year_range[<span class="dv">0</span>]):<span class="bu">str</span>(year_range[<span class="op">-</span><span class="dv">1</span>])].values, <span class="co"># FIXED: Mistake in original calculation; use this instead</span></span>
<span id="cb54-1527"><a href="#cb54-1527" aria-hidden="true" tabindex="-1"></a>    errors<span class="op">=</span><span class="st">"coerce"</span></span>
<span id="cb54-1528"><a href="#cb54-1528" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-1529"><a href="#cb54-1529" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-1530"><a href="#cb54-1530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1531"><a href="#cb54-1531" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb54-1532"><a href="#cb54-1532" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy</span>
<span id="cb54-1533"><a href="#cb54-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1534"><a href="#cb54-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1535"><a href="#cb54-1535" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-1536"><a href="#cb54-1536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1537"><a href="#cb54-1537" aria-hidden="true" tabindex="-1"></a>This chart shows fuel economy trends for all three vehicle classes with trend lines. Several important patterns emerge:</span>
<span id="cb54-1538"><a href="#cb54-1538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1539"><a href="#cb54-1539" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The blue line (Light Duty) shows substantial improvement, rising from about 16 mpg in 1980 to over 24 mpg by 2023. This reflects CAFE standards requiring manufacturers to improve fleet fuel economy, along with technological improvements like direct fuel injection, turbocharging, continuously variable transmissions, and cylinder deactivation. The trend is approximately linear, suggesting consistent progress over time.</span>
<span id="cb54-1540"><a href="#cb54-1540" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The red line (Medium Duty) shows more modest improvement, from about 6.5 to 8 mpg. Medium trucks face conflicting pressures: efficiency improvements versus increasing vehicle size and capability. The trend is flatter than light-duty, indicating slower progress.</span>
<span id="cb54-1541"><a href="#cb54-1541" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The green line (Heavy Duty) is flattest of all, improving from about 5.5 to 6.0 mpg. Heavy truck fuel economy is limited by fundamental physicsâ€”aerodynamic drag and rolling resistance of a 80,000-pound vehicle. Recent regulations requiring aerodynamic improvements (side skirts, trailer tails) and low-rolling-resistance tires have helped, but gains are incremental.</span>
<span id="cb54-1542"><a href="#cb54-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1543"><a href="#cb54-1543" aria-hidden="true" tabindex="-1"></a>The trend lines provide expected 2023 values that smooth out year-to-year variation from weather, economic conditions, and data collection variability.</span>
<span id="cb54-1544"><a href="#cb54-1544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1547"><a href="#cb54-1547" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1548"><a href="#cb54-1548" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1549"><a href="#cb54-1549" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1550"><a href="#cb54-1550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1551"><a href="#cb54-1551" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1552"><a href="#cb54-1552" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Light Duty"</span>,</span>
<span id="cb54-1553"><a href="#cb54-1553" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="st">"Light Duty"</span>)</span>
<span id="cb54-1554"><a href="#cb54-1554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1555"><a href="#cb54-1555" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Variable with a red line</span></span>
<span id="cb54-1556"><a href="#cb54-1556" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Medium Duty"</span>,</span>
<span id="cb54-1557"><a href="#cb54-1557" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>,color<span class="op">=</span><span class="st">"#FF0000"</span>, label<span class="op">=</span><span class="st">"Medium Duty"</span>)</span>
<span id="cb54-1558"><a href="#cb54-1558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1559"><a href="#cb54-1559" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1560"><a href="#cb54-1560" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Heavy Duty"</span>,</span>
<span id="cb54-1561"><a href="#cb54-1561" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#00B050"</span>, label<span class="op">=</span><span class="st">"Heavy Duty"</span>)</span>
<span id="cb54-1562"><a href="#cb54-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1563"><a href="#cb54-1563" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1564"><a href="#cb54-1564" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Light Duty'</span>,</span>
<span id="cb54-1565"><a href="#cb54-1565" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#0070C0'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1566"><a href="#cb54-1566" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1567"><a href="#cb54-1567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1568"><a href="#cb54-1568" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1569"><a href="#cb54-1569" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Medium Duty'</span>,</span>
<span id="cb54-1570"><a href="#cb54-1570" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#FF0000'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1571"><a href="#cb54-1571" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1572"><a href="#cb54-1572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1573"><a href="#cb54-1573" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the linear trend lines with dashed lines</span></span>
<span id="cb54-1574"><a href="#cb54-1574" aria-hidden="true" tabindex="-1"></a>sns.regplot(data<span class="op">=</span>df_FuelEconomy, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Heavy Duty'</span>,</span>
<span id="cb54-1575"><a href="#cb54-1575" aria-hidden="true" tabindex="-1"></a>            scatter<span class="op">=</span><span class="va">False</span>, color<span class="op">=</span><span class="st">'#00B050'</span>, ci<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb54-1576"><a href="#cb54-1576" aria-hidden="true" tabindex="-1"></a>            line_kws<span class="op">=</span>{<span class="st">'linestyle'</span>: <span class="st">'--'</span>, <span class="st">'linewidth'</span>: <span class="dv">2</span>, <span class="st">'alpha'</span>: <span class="fl">0.8</span>})</span>
<span id="cb54-1577"><a href="#cb54-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1578"><a href="#cb54-1578" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1579"><a href="#cb54-1579" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1580"><a href="#cb54-1580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1581"><a href="#cb54-1581" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1582"><a href="#cb54-1582" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Fuel Economy (miles per gallon)'</span>,</span>
<span id="cb54-1583"><a href="#cb54-1583" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1584"><a href="#cb54-1584" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1585"><a href="#cb54-1585" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Miles Travelled per Gallon'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1586"><a href="#cb54-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1587"><a href="#cb54-1587" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1588"><a href="#cb54-1588" aria-hidden="true" tabindex="-1"></a>plt.xticks(df_FuelEconomy[<span class="st">'Year'</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1589"><a href="#cb54-1589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1590"><a href="#cb54-1590" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb54-1591"><a href="#cb54-1591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1592"><a href="#cb54-1592" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 25</span></span>
<span id="cb54-1593"><a href="#cb54-1593" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">25</span>)</span>
<span id="cb54-1594"><a href="#cb54-1594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1595"><a href="#cb54-1595" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1596"><a href="#cb54-1596" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1597"><a href="#cb54-1597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1598"><a href="#cb54-1598" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1599"><a href="#cb54-1599" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1600"><a href="#cb54-1600" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1601"><a href="#cb54-1601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1602"><a href="#cb54-1602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1603"><a href="#cb54-1603" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-1604"><a href="#cb54-1604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1605"><a href="#cb54-1605" aria-hidden="true" tabindex="-1"></a>This table compares actual 2023 fuel economy against trend-based predictions for each vehicle class.</span>
<span id="cb54-1606"><a href="#cb54-1606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1607"><a href="#cb54-1607" aria-hidden="true" tabindex="-1"></a>The "Light Duty" comparison reveals whether recent improvements in passenger vehicle efficiency are ahead of, behind, or on track with the long-term trend. If actual values exceed the trend, it might reflect a particularly good year for fuel economyâ€”perhaps high gas prices encouraged purchasing more efficient vehicles. If actual values fall below the trend, it could indicate a shift toward larger vehicles or more aggressive driving.</span>
<span id="cb54-1608"><a href="#cb54-1608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1609"><a href="#cb54-1609" aria-hidden="true" tabindex="-1"></a>"Medium Duty" and "Heavy Duty" comparisons are similarly revealing. These markets respond less to consumer preferences and more to regulatory requirements and operational economics. Fleet operators maximize efficiency to reduce fuel costs, so deviations from trend likely reflect regulatory changes or technological breakthroughs rather than behavioral shifts.</span>
<span id="cb54-1610"><a href="#cb54-1610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1611"><a href="#cb54-1611" aria-hidden="true" tabindex="-1"></a>For operating cost calculations, using trend values is generally appropriate for fuel economy because these represent long-term technological capability rather than short-term market fluctuations. However, if actual values consistently exceed trends for several years, it may indicate a structural improvement worth incorporating.</span>
<span id="cb54-1612"><a href="#cb54-1612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1615"><a href="#cb54-1615" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1616"><a href="#cb54-1616" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-1617"><a href="#cb54-1617" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy_Comparision <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1618"><a href="#cb54-1618" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Date'</span>: [BASE_YEAR, BASE_YEAR, BASE_YEAR],</span>
<span id="cb54-1619"><a href="#cb54-1619" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Actual'</span>: [</span>
<span id="cb54-1620"><a href="#cb54-1620" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Light Duty'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1621"><a href="#cb54-1621" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Medium Duty'</span>].iloc[<span class="dv">0</span>],</span>
<span id="cb54-1622"><a href="#cb54-1622" aria-hidden="true" tabindex="-1"></a>        df_FuelEconomy.loc[df_FuelEconomy[<span class="st">'Year'</span>] <span class="op">==</span> BASE_YEAR, <span class="st">'Heavy Duty'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb54-1623"><a href="#cb54-1623" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-1624"><a href="#cb54-1624" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Trend'</span>: [</span>
<span id="cb54-1625"><a href="#cb54-1625" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb54-1626"><a href="#cb54-1626" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Light Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1627"><a href="#cb54-1627" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb54-1628"><a href="#cb54-1628" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Medium Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR),</span>
<span id="cb54-1629"><a href="#cb54-1629" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_numeric(df_FuelEconomy[<span class="st">'Year'</span>]),</span>
<span id="cb54-1630"><a href="#cb54-1630" aria-hidden="true" tabindex="-1"></a>                            pd.to_numeric(df_FuelEconomy[<span class="st">'Heavy Duty'</span>]), <span class="dv">1</span>))(BASE_YEAR)</span>
<span id="cb54-1631"><a href="#cb54-1631" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-1632"><a href="#cb54-1632" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="st">'Light Duty'</span>, <span class="st">'Medium Duty'</span>, <span class="st">'Heavy Duty'</span>]).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb54-1633"><a href="#cb54-1633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1634"><a href="#cb54-1634" aria-hidden="true" tabindex="-1"></a>df_FuelEconomy_Comparision</span>
<span id="cb54-1635"><a href="#cb54-1635" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1636"><a href="#cb54-1636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1637"><a href="#cb54-1637" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fuel Costs</span></span>
<span id="cb54-1638"><a href="#cb54-1638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1639"><a href="#cb54-1639" aria-hidden="true" tabindex="-1"></a>Fuel prices are the most volatile component of vehicle operating costs. Unlike fuel economy (which changes gradually with fleet turnover) or maintenance costs (which increase slowly with parts and labor inflation), fuel prices can swing 50% or more in a single year due to crude oil markets, refinery outages, geopolitical events, and seasonal demand patterns.</span>
<span id="cb54-1640"><a href="#cb54-1640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1641"><a href="#cb54-1641" aria-hidden="true" tabindex="-1"></a>Regional variations in fuel prices also matter. The Rocky Mountain region (which includes Utah) typically has prices 5-15% different from the national average due to distance from refineries, pipeline capacity constraints, and regional fuel formulation requirements. Using region-specific prices improves the accuracy of operating cost estimates for our study area.</span>
<span id="cb54-1642"><a href="#cb54-1642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1643"><a href="#cb54-1643" aria-hidden="true" tabindex="-1"></a>This subsection compiles daily fuel price data for both gasoline and diesel in the Rocky Mountain region from 1994 through 2024. We analyze both the full 30-year period and a more recent 20-year window (2005-2024) to assess whether long-term trends differ from recent patterns. This is particularly important given the oil price spike of 2008, the collapse in 2014-2016, and the 2020-2022 pandemic-related volatility.</span>
<span id="cb54-1644"><a href="#cb54-1644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1645"><a href="#cb54-1645" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Create Dataframe</span></span>
<span id="cb54-1646"><a href="#cb54-1646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1647"><a href="#cb54-1647" aria-hidden="true" tabindex="-1"></a>The dataframe merges gasoline and diesel price series into a single time series dataset spanning 1994-2024. The EIA publishes weekly prices, but we match them to a daily date range to enable precise date-based lookups.</span>
<span id="cb54-1648"><a href="#cb54-1648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1649"><a href="#cb54-1649" aria-hidden="true" tabindex="-1"></a>"Gasoline $/gal" contains the retail price for all grades of gasoline in the Rocky Mountain region. This is a volume-weighted average of regular, midgrade, and premium grades reflecting actual consumer purchases. About 85% of gasoline sold is regular grade.</span>
<span id="cb54-1650"><a href="#cb54-1650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1651"><a href="#cb54-1651" aria-hidden="true" tabindex="-1"></a>"Diesel $/gal" contains the retail price for on-highway diesel fuel (No. 2 diesel) in the Rocky Mountain region. This is the fuel type used by medium and heavy trucks. Off-highway diesel (used in agriculture and construction) has lower taxes and is not included.</span>
<span id="cb54-1652"><a href="#cb54-1652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1653"><a href="#cb54-1653" aria-hidden="true" tabindex="-1"></a>Missing values appear as NaN (Not a Number). These typically occur in the first few years when diesel price reporting was less comprehensive. The code handles these properly by dropping NaN values before fitting trend lines.</span>
<span id="cb54-1654"><a href="#cb54-1654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1657"><a href="#cb54-1657" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1658"><a href="#cb54-1658" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the date range between the desired dates</span></span>
<span id="cb54-1659"><a href="#cb54-1659" aria-hidden="true" tabindex="-1"></a>date_range <span class="op">=</span> pd.date_range(<span class="st">"1994-01-03"</span>, <span class="st">"2024-12-31"</span>, freq<span class="op">=</span><span class="st">"D"</span>)</span>
<span id="cb54-1660"><a href="#cb54-1660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1661"><a href="#cb54-1661" aria-hidden="true" tabindex="-1"></a><span class="co"># Compile data from Raw Datasets</span></span>
<span id="cb54-1662"><a href="#cb54-1662" aria-hidden="true" tabindex="-1"></a>df_FuelCosts <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1663"><a href="#cb54-1663" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Date"</span>: df_RetailGasPrices[df_RetailGasPrices[<span class="st">'Date'</span>].isin(date_range)][<span class="st">'Date'</span>].values</span>
<span id="cb54-1664"><a href="#cb54-1664" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-1665"><a href="#cb54-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1666"><a href="#cb54-1666" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge Gasoline and Diesel prices directly</span></span>
<span id="cb54-1667"><a href="#cb54-1667" aria-hidden="true" tabindex="-1"></a>df_FuelCosts <span class="op">=</span> df_FuelCosts.merge(df_RetailGasPrices[[<span class="st">'Date'</span>, <span class="st">'Weekly Rocky Mountain All Grades All Formulations Retail Gasoline Prices  (Dollars per Gallon)'</span>]], on<span class="op">=</span><span class="st">'Date'</span>, how<span class="op">=</span><span class="st">'left'</span>) <span class="op">\</span></span>
<span id="cb54-1668"><a href="#cb54-1668" aria-hidden="true" tabindex="-1"></a>                            .merge(df_RetailDieselPrices[[<span class="st">'Date'</span>, <span class="st">'Weekly Rocky Mountain No 2 Diesel Retail Prices  (Dollars per Gallon)'</span>]], on<span class="op">=</span><span class="st">'Date'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb54-1669"><a href="#cb54-1669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1670"><a href="#cb54-1670" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns</span></span>
<span id="cb54-1671"><a href="#cb54-1671" aria-hidden="true" tabindex="-1"></a>df_FuelCosts.rename(columns<span class="op">=</span>{</span>
<span id="cb54-1672"><a href="#cb54-1672" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Weekly Rocky Mountain All Grades All Formulations Retail Gasoline Prices  (Dollars per Gallon)'</span>: <span class="st">'Gasoline $/gal'</span>,</span>
<span id="cb54-1673"><a href="#cb54-1673" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Weekly Rocky Mountain No 2 Diesel Retail Prices  (Dollars per Gallon)'</span>: <span class="st">'Diesel $/gal'</span></span>
<span id="cb54-1674"><a href="#cb54-1674" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-1675"><a href="#cb54-1675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1676"><a href="#cb54-1676" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb54-1677"><a href="#cb54-1677" aria-hidden="true" tabindex="-1"></a>df_FuelCosts</span>
<span id="cb54-1678"><a href="#cb54-1678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1679"><a href="#cb54-1679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1680"><a href="#cb54-1680" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotting Trends</span></span>
<span id="cb54-1681"><a href="#cb54-1681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1682"><a href="#cb54-1682" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Retail Gasoline Prices - Rocky Mountain (1994 - 2024)</span></span>
<span id="cb54-1683"><a href="#cb54-1683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1684"><a href="#cb54-1684" aria-hidden="true" tabindex="-1"></a>This chart shows three decades of gasoline prices with a linear trend line (red). The price series is highly volatile, reflecting the turbulent nature of oil markets:</span>
<span id="cb54-1685"><a href="#cb54-1685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1686"><a href="#cb54-1686" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>1994-1999: Relatively stable around $1.00-1.50/gallon</span>
<span id="cb54-1687"><a href="#cb54-1687" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2000-2008: Rapid increase to over $4.00/gallon, driven by growing global demand and geopolitical tensions</span>
<span id="cb54-1688"><a href="#cb54-1688" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2008-2009: Sharp collapse during the financial crisis</span>
<span id="cb54-1689"><a href="#cb54-1689" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2010-2014: Sustained high prices around $3.50/gallon</span>
<span id="cb54-1690"><a href="#cb54-1690" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2014-2016: Dramatic decline due to U.S. shale oil production and OPEC supply increases</span>
<span id="cb54-1691"><a href="#cb54-1691" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2017-2019: Moderate recovery</span>
<span id="cb54-1692"><a href="#cb54-1692" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2020: Brief collapse during COVID-19 pandemic lockdowns</span>
<span id="cb54-1693"><a href="#cb54-1693" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>2021-2024: Rapid increase then gradual decline</span>
<span id="cb54-1694"><a href="#cb54-1694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1695"><a href="#cb54-1695" aria-hidden="true" tabindex="-1"></a>The linear trend line (red) shows an upward slope of approximately 3-4 cents per year over the 30-year period, indicating that despite enormous volatility, gasoline prices have risen faster than general inflation. However, the trend line poorly captures the actual price dynamicsâ€”it cuts through the middle of wild swings above and below. This highlights the limitation of using simple linear trends for highly volatile commodities.The y-axis extends to $6.00 per gallon to accommodate historical peaks. The x-axis shows every other year to avoid label crowding. Grid lines aid in reading specific price levels. For 2023 estimates, the question becomes: should we use the actual price from that year, or a smoothed trend value? Given the volatility, using a specific date (like July 1, 2023, representing mid-year conditions) may better reflect what travelers actually experienced than a long-term trend that averages over boom-and-bust cycles.</span>
<span id="cb54-1696"><a href="#cb54-1696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1699"><a href="#cb54-1699" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1700"><a href="#cb54-1700" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1701"><a href="#cb54-1701" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1702"><a href="#cb54-1702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1703"><a href="#cb54-1703" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1704"><a href="#cb54-1704" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Gasoline $/gal"</span>,</span>
<span id="cb54-1705"><a href="#cb54-1705" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb54-1706"><a href="#cb54-1706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1707"><a href="#cb54-1707" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line inline</span></span>
<span id="cb54-1708"><a href="#cb54-1708" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb54-1709"><a href="#cb54-1709" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[<span class="st">'Date'</span>],</span>
<span id="cb54-1710"><a href="#cb54-1710" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb54-1711"><a href="#cb54-1711" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb54-1712"><a href="#cb54-1712" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb54-1713"><a href="#cb54-1713" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb54-1714"><a href="#cb54-1714" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb54-1715"><a href="#cb54-1715" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb54-1716"><a href="#cb54-1716" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[<span class="st">'Date'</span>]),</span>
<span id="cb54-1717"><a href="#cb54-1717" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb54-1718"><a href="#cb54-1718" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-1719"><a href="#cb54-1719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1720"><a href="#cb54-1720" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1721"><a href="#cb54-1721" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1722"><a href="#cb54-1722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1723"><a href="#cb54-1723" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1724"><a href="#cb54-1724" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Gasoline Prices ($ per gallon) - Rocky Mountain (1994 - 2024)'</span>,</span>
<span id="cb54-1725"><a href="#cb54-1725" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1726"><a href="#cb54-1726" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1727"><a href="#cb54-1727" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1728"><a href="#cb54-1728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1729"><a href="#cb54-1729" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1730"><a href="#cb54-1730" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique()[::<span class="dv">2</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1731"><a href="#cb54-1731" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb54-1732"><a href="#cb54-1732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1733"><a href="#cb54-1733" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb54-1734"><a href="#cb54-1734" aria-hidden="true" tabindex="-1"></a>plt.xlim(df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">min</span>(), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb54-1735"><a href="#cb54-1735" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb54-1736"><a href="#cb54-1736" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb54-1737"><a href="#cb54-1737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1738"><a href="#cb54-1738" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb54-1739"><a href="#cb54-1739" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb54-1740"><a href="#cb54-1740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1741"><a href="#cb54-1741" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1742"><a href="#cb54-1742" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1743"><a href="#cb54-1743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1744"><a href="#cb54-1744" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1745"><a href="#cb54-1745" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1746"><a href="#cb54-1746" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1747"><a href="#cb54-1747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1748"><a href="#cb54-1748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1749"><a href="#cb54-1749" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Retail Gasoline Prices - Rocky Mountain (2005 - 2024)</span></span>
<span id="cb54-1750"><a href="#cb54-1750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1751"><a href="#cb54-1751" aria-hidden="true" tabindex="-1"></a>This chart focuses on the most recent 20 years to assess whether recent price behavior differs from the long-term pattern. The same data is shown, but with the trend line (red) fitted only to 2005-2024 data.</span>
<span id="cb54-1752"><a href="#cb54-1752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1753"><a href="#cb54-1753" aria-hidden="true" tabindex="-1"></a>Comparing this trend to the 1994-2024 trend reveals whether gasoline price dynamics have changed. If the 2005+ trend is steeper, recent price increases are outpacing historical patterns, perhaps due to sustained global demand or reduced spare production capacity. If the recent trend is flatter, it suggests a structural changeâ€”perhaps shale oil production has created a price ceiling by bringing new supply online whenever prices rise too high.</span>
<span id="cb54-1754"><a href="#cb54-1754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1755"><a href="#cb54-1755" aria-hidden="true" tabindex="-1"></a>The 2005 starting point deliberately excludes the very low prices of the 1990s, which may no longer be relevant given changes in global oil markets, climate policy, and production costs. For a 2023 base year, a trend fitted to more recent data may provide more relevant context than one that includes conditions from three decades ago.</span>
<span id="cb54-1756"><a href="#cb54-1756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1757"><a href="#cb54-1757" aria-hidden="true" tabindex="-1"></a>All years are shown on the x-axis for this 20-year window, as there are few enough to display without crowding. The chart makes clear that even in this shorter period, volatility remains extremeâ€”the range from low to high still exceeds $2.00 per gallon.</span>
<span id="cb54-1758"><a href="#cb54-1758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1761"><a href="#cb54-1761" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1762"><a href="#cb54-1762" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1763"><a href="#cb54-1763" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1764"><a href="#cb54-1764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1765"><a href="#cb54-1765" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1766"><a href="#cb54-1766" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Gasoline $/gal"</span>,</span>
<span id="cb54-1767"><a href="#cb54-1767" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb54-1768"><a href="#cb54-1768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1769"><a href="#cb54-1769" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line for filtered data inline</span></span>
<span id="cb54-1770"><a href="#cb54-1770" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb54-1771"><a href="#cb54-1771" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>],</span>
<span id="cb54-1772"><a href="#cb54-1772" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb54-1773"><a href="#cb54-1773" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1774"><a href="#cb54-1774" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb54-1775"><a href="#cb54-1775" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb54-1776"><a href="#cb54-1776" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1777"><a href="#cb54-1777" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Gasoline $/gal'</span>]</span>
<span id="cb54-1778"><a href="#cb54-1778" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1779"><a href="#cb54-1779" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb54-1780"><a href="#cb54-1780" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-1781"><a href="#cb54-1781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1782"><a href="#cb54-1782" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1783"><a href="#cb54-1783" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1784"><a href="#cb54-1784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1785"><a href="#cb54-1785" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1786"><a href="#cb54-1786" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Gasoline Prices ($ per gallon) - Rocky Mountain (2005 - 2024)'</span>, fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1787"><a href="#cb54-1787" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1788"><a href="#cb54-1788" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1789"><a href="#cb54-1789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1790"><a href="#cb54-1790" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1791"><a href="#cb54-1791" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique(), rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1792"><a href="#cb54-1792" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb54-1793"><a href="#cb54-1793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1794"><a href="#cb54-1794" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb54-1795"><a href="#cb54-1795" aria-hidden="true" tabindex="-1"></a>plt.xlim(pd.to_datetime(<span class="st">"2005-01-01"</span>), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb54-1796"><a href="#cb54-1796" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb54-1797"><a href="#cb54-1797" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb54-1798"><a href="#cb54-1798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1799"><a href="#cb54-1799" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb54-1800"><a href="#cb54-1800" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb54-1801"><a href="#cb54-1801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1802"><a href="#cb54-1802" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1803"><a href="#cb54-1803" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1804"><a href="#cb54-1804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1805"><a href="#cb54-1805" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1806"><a href="#cb54-1806" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1807"><a href="#cb54-1807" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1808"><a href="#cb54-1808" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1809"><a href="#cb54-1809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1810"><a href="#cb54-1810" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Retail Diesel Prices - Rocky Mountain (1994 - 2024)</span></span>
<span id="cb54-1811"><a href="#cb54-1811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1812"><a href="#cb54-1812" aria-hidden="true" tabindex="-1"></a>This chart parallels the gasoline analysis but for diesel fuel, which powers medium and heavy trucks. Diesel prices follow similar patterns to gasoline but with some distinct characteristics:</span>
<span id="cb54-1813"><a href="#cb54-1813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1814"><a href="#cb54-1814" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Diesel typically costs $0.10-0.50 more per gallon than gasoline due to higher refining costs and federal excise tax differences (24.4 cents/gallon for diesel vs. 18.4 cents/gallon for gasoline)</span>
<span id="cb54-1815"><a href="#cb54-1815" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The diesel-gasoline price spread varies over time based on refinery economics and relative supply-demand conditions</span>
<span id="cb54-1816"><a href="#cb54-1816" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Diesel prices often lead gasoline pricesâ€”when crude oil costs rise, refineries pass through costs to diesel markets first because commercial customers are less price-sensitive than retail gasoline consumers</span>
<span id="cb54-1817"><a href="#cb54-1817" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Cold weather can create diesel price spikes because heating oil (chemically similar to diesel) competes for the same refinery output</span>
<span id="cb54-1818"><a href="#cb54-1818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1819"><a href="#cb54-1819" aria-hidden="true" tabindex="-1"></a>The red trend line shows diesel prices rising at roughly the same rate as gasoline over the full 30-year period. The 1994-2003 period has some data gaps (visible as breaks in the blue line) when regional diesel price reporting was less comprehensive. These gaps are handled by the code through <span class="in">`.dropna()`</span> operations that remove missing values before analysis.</span>
<span id="cb54-1820"><a href="#cb54-1820" aria-hidden="true" tabindex="-1"></a>The chart uses the same y-axis scale ($0-6/gallon) as the gasoline charts to facilitate direct comparison. Diesel prices generally track in the upper portion of this range, consistently above gasoline.</span>
<span id="cb54-1821"><a href="#cb54-1821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1824"><a href="#cb54-1824" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1825"><a href="#cb54-1825" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1826"><a href="#cb54-1826" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1827"><a href="#cb54-1827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1828"><a href="#cb54-1828" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1829"><a href="#cb54-1829" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Diesel $/gal"</span>,</span>
<span id="cb54-1830"><a href="#cb54-1830" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb54-1831"><a href="#cb54-1831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1832"><a href="#cb54-1832" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot regression line inline</span></span>
<span id="cb54-1833"><a href="#cb54-1833" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb54-1834"><a href="#cb54-1834" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>],</span>
<span id="cb54-1835"><a href="#cb54-1835" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb54-1836"><a href="#cb54-1836" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb54-1837"><a href="#cb54-1837" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>]</span>
<span id="cb54-1838"><a href="#cb54-1838" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb54-1839"><a href="#cb54-1839" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb54-1840"><a href="#cb54-1840" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>]</span>
<span id="cb54-1841"><a href="#cb54-1841" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]),</span>
<span id="cb54-1842"><a href="#cb54-1842" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb54-1843"><a href="#cb54-1843" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-1844"><a href="#cb54-1844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1845"><a href="#cb54-1845" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1846"><a href="#cb54-1846" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1847"><a href="#cb54-1847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1848"><a href="#cb54-1848" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1849"><a href="#cb54-1849" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Diesel Prices ($ per gallon) - Rocky Mountain (1994 - 2024)'</span>,</span>
<span id="cb54-1850"><a href="#cb54-1850" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1851"><a href="#cb54-1851" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1852"><a href="#cb54-1852" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1853"><a href="#cb54-1853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1854"><a href="#cb54-1854" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1855"><a href="#cb54-1855" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique()[::<span class="dv">2</span>], rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1856"><a href="#cb54-1856" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb54-1857"><a href="#cb54-1857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1858"><a href="#cb54-1858" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb54-1859"><a href="#cb54-1859" aria-hidden="true" tabindex="-1"></a>plt.xlim(df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">min</span>(), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb54-1860"><a href="#cb54-1860" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 5</span></span>
<span id="cb54-1861"><a href="#cb54-1861" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb54-1862"><a href="#cb54-1862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1863"><a href="#cb54-1863" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb54-1864"><a href="#cb54-1864" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb54-1865"><a href="#cb54-1865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1866"><a href="#cb54-1866" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1867"><a href="#cb54-1867" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1868"><a href="#cb54-1868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1869"><a href="#cb54-1869" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1870"><a href="#cb54-1870" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1871"><a href="#cb54-1871" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1872"><a href="#cb54-1872" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1873"><a href="#cb54-1873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1874"><a href="#cb54-1874" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Retail Diesel Prices - Rocky Mountain (2005 - 2024)</span></span>
<span id="cb54-1875"><a href="#cb54-1875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1876"><a href="#cb54-1876" aria-hidden="true" tabindex="-1"></a>This chart examines recent diesel price trends, fitting the trend line only to 2005-2024 data. The more recent period shows diesel prices becoming particularly volatile in 2021-2022, when supply chain disruptions, reduced refining capacity, and geopolitical factors created unusual price pressures.</span>
<span id="cb54-1877"><a href="#cb54-1877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1878"><a href="#cb54-1878" aria-hidden="true" tabindex="-1"></a>The post-2005 trend may differ from the long-term trend for several reasons:</span>
<span id="cb54-1879"><a href="#cb54-1879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1880"><a href="#cb54-1880" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>U.S. ultra-low sulfur diesel requirements (implemented 2006-2010) changed refining economics</span>
<span id="cb54-1881"><a href="#cb54-1881" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Growing diesel exports to Europe and Latin America tightened domestic supplies</span>
<span id="cb54-1882"><a href="#cb54-1882" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Hurricane damage to Gulf Coast refineries reduced diesel production capacity</span>
<span id="cb54-1883"><a href="#cb54-1883" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Renewable diesel production (using vegetable oils and waste fats) began competing for market share</span>
<span id="cb54-1884"><a href="#cb54-1884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1885"><a href="#cb54-1885" aria-hidden="true" tabindex="-1"></a>For truck operating costs, diesel price trends are critical because fuel represents 20-40% of total heavy truck operating expenses. Even a 10-cent-per-gallon change in diesel prices can significantly impact freight costs and trucking company profitability. The difference between using a 1994-2024 trend versus a 2005-2024 trend could change operating cost estimates by several cents per mileâ€”enough to matter for policy analysis.</span>
<span id="cb54-1886"><a href="#cb54-1886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1887"><a href="#cb54-1887" aria-hidden="true" tabindex="-1"></a>All x-axis labels are shown for the 20-year window. The filtering of data to 2005+ is visible in the chart limits. The code properly handles the filtering by applying it both to the displayed data and to the trend line calculation, ensuring consistency.</span>
<span id="cb54-1888"><a href="#cb54-1888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1891"><a href="#cb54-1891" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1892"><a href="#cb54-1892" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data using Seaborn and Matplotlib</span></span>
<span id="cb54-1893"><a href="#cb54-1893" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb54-1894"><a href="#cb54-1894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1895"><a href="#cb54-1895" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Fixed with a green line</span></span>
<span id="cb54-1896"><a href="#cb54-1896" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df_FuelCosts, x<span class="op">=</span><span class="st">"Date"</span>, y<span class="op">=</span><span class="st">"Diesel $/gal"</span>,</span>
<span id="cb54-1897"><a href="#cb54-1897" aria-hidden="true" tabindex="-1"></a>linewidth<span class="op">=</span><span class="fl">2.5</span>, color<span class="op">=</span><span class="st">"#0070C0"</span>, label<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb54-1898"><a href="#cb54-1898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1899"><a href="#cb54-1899" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot regression line for dates from 2005 onwards</span></span>
<span id="cb54-1900"><a href="#cb54-1900" aria-hidden="true" tabindex="-1"></a>plt.plot(</span>
<span id="cb54-1901"><a href="#cb54-1901" aria-hidden="true" tabindex="-1"></a>    df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>],</span>
<span id="cb54-1902"><a href="#cb54-1902" aria-hidden="true" tabindex="-1"></a>    stats.linregress(</span>
<span id="cb54-1903"><a href="#cb54-1903" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1904"><a href="#cb54-1904" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Diesel $/gal'</span>].dropna()</span>
<span id="cb54-1905"><a href="#cb54-1905" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>] <span class="op">+</span> stats.linregress(</span>
<span id="cb54-1906"><a href="#cb54-1906" aria-hidden="true" tabindex="-1"></a>        pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1907"><a href="#cb54-1907" aria-hidden="true" tabindex="-1"></a>        df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Diesel $/gal'</span>].dropna()</span>
<span id="cb54-1908"><a href="#cb54-1908" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">0</span>] <span class="op">*</span> pd.to_numeric(df_FuelCosts[df_FuelCosts[<span class="st">'Date'</span>] <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)][<span class="st">'Date'</span>]),</span>
<span id="cb54-1909"><a href="#cb54-1909" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#FF0000'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb54-1910"><a href="#cb54-1910" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-1911"><a href="#cb54-1911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1912"><a href="#cb54-1912" aria-hidden="true" tabindex="-1"></a><span class="co"># Format y-axis as currency with comma separation using anonymous function</span></span>
<span id="cb54-1913"><a href="#cb54-1913" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(FuncFormatter(<span class="kw">lambda</span> x, p: <span class="ss">f'$</span><span class="sc">{</span>x<span class="sc">:,.2f}</span><span class="ss">'</span>))</span>
<span id="cb54-1914"><a href="#cb54-1914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1915"><a href="#cb54-1915" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the plot</span></span>
<span id="cb54-1916"><a href="#cb54-1916" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Retail Diesel Prices ($ per gallon) - Rocky Mountain (2005 - 2024)'</span>,</span>
<span id="cb54-1917"><a href="#cb54-1917" aria-hidden="true" tabindex="-1"></a>          fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, pad<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb54-1918"><a href="#cb54-1918" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1919"><a href="#cb54-1919" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'USD'</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb54-1920"><a href="#cb54-1920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1921"><a href="#cb54-1921" aria-hidden="true" tabindex="-1"></a><span class="co"># Show all x-axis labels with 90-degree rotation</span></span>
<span id="cb54-1922"><a href="#cb54-1922" aria-hidden="true" tabindex="-1"></a>plt.xticks(pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]).dt.to_period(<span class="st">'Y'</span>).unique(), rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb54-1923"><a href="#cb54-1923" aria-hidden="true" tabindex="-1"></a>plt.yticks(np.arange(<span class="dv">0</span>, <span class="fl">6.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb54-1924"><a href="#cb54-1924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1925"><a href="#cb54-1925" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the x-axis limits to be between the min and max of the Date column</span></span>
<span id="cb54-1926"><a href="#cb54-1926" aria-hidden="true" tabindex="-1"></a>plt.xlim(pd.to_datetime(<span class="st">"2005-01-01"</span>), df_FuelCosts[<span class="st">'Date'</span>].<span class="bu">max</span>())</span>
<span id="cb54-1927"><a href="#cb54-1927" aria-hidden="true" tabindex="-1"></a><span class="co"># Set y-axis limits to extend to 6</span></span>
<span id="cb54-1928"><a href="#cb54-1928" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">6</span>)</span>
<span id="cb54-1929"><a href="#cb54-1929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1930"><a href="#cb54-1930" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the x-axis to display dates properly</span></span>
<span id="cb54-1931"><a href="#cb54-1931" aria-hidden="true" tabindex="-1"></a>plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y'</span>))</span>
<span id="cb54-1932"><a href="#cb54-1932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1933"><a href="#cb54-1933" aria-hidden="true" tabindex="-1"></a><span class="co"># Add major and minor grid lines for better readability</span></span>
<span id="cb54-1934"><a href="#cb54-1934" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, which<span class="op">=</span><span class="st">'major'</span>)</span>
<span id="cb54-1935"><a href="#cb54-1935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1936"><a href="#cb54-1936" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve layout</span></span>
<span id="cb54-1937"><a href="#cb54-1937" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb54-1938"><a href="#cb54-1938" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb54-1939"><a href="#cb54-1939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1940"><a href="#cb54-1940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1941"><a href="#cb54-1941" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Actual vs Trend Comparision</span></span>
<span id="cb54-1942"><a href="#cb54-1942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1943"><a href="#cb54-1943" aria-hidden="true" tabindex="-1"></a><span class="fu">##### 1994 - 2024</span></span>
<span id="cb54-1944"><a href="#cb54-1944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1945"><a href="#cb54-1945" aria-hidden="true" tabindex="-1"></a>This table shows trend-based price estimates for three specific dates using the full 30-year trend:</span>
<span id="cb54-1946"><a href="#cb54-1946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1947"><a href="#cb54-1947" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>January 1, 2019: A pre-pandemic baseline for comparison</span>
<span id="cb54-1948"><a href="#cb54-1948" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>December 31, 2023: Year-end conditions for the base year</span>
<span id="cb54-1949"><a href="#cb54-1949" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>July 1, 2023: Mid-year conditions, often used as an annual average proxy</span>
<span id="cb54-1950"><a href="#cb54-1950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1951"><a href="#cb54-1951" aria-hidden="true" tabindex="-1"></a>The three dates reveal how much prices varied within 2023 and between 2019 and 2023. If July 2023 prices are close to the trend line, using trend-based estimates is justified. If actual prices deviate significantly, it may indicate an unusual year requiring direct use of actual prices rather than smoothed trends.</span>
<span id="cb54-1952"><a href="#cb54-1952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1953"><a href="#cb54-1953" aria-hidden="true" tabindex="-1"></a>The table presents values to three decimal places (e.g., $3.245/gallon) to enable precise calculations. When fuel economy is 20+ mpg, even small price differences of a few cents per gallon translate to measurable differences in cost per mile.</span>
<span id="cb54-1954"><a href="#cb54-1954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1955"><a href="#cb54-1955" aria-hidden="true" tabindex="-1"></a>Comparing gasoline and diesel trends shows whether the historical price spread is widening or narrowing. If diesel trends are rising faster than gasoline trends, it suggests structural factors are making diesel relatively more expensive over time.</span>
<span id="cb54-1956"><a href="#cb54-1956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1959"><a href="#cb54-1959" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-1960"><a href="#cb54-1960" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-1961"><a href="#cb54-1961" aria-hidden="true" tabindex="-1"></a>comparison_dates <span class="op">=</span> [pd.to_datetime(<span class="st">"2019-01-01"</span>), pd.to_datetime(<span class="st">"2023-12-31"</span>), pd.to_datetime(<span class="st">"2023-07-01"</span>)]</span>
<span id="cb54-1962"><a href="#cb54-1962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1963"><a href="#cb54-1963" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_1 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-1964"><a href="#cb54-1964" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gasoline Trend'</span>: [</span>
<span id="cb54-1965"><a href="#cb54-1965" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb54-1966"><a href="#cb54-1966" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Gasoline $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb54-1967"><a href="#cb54-1967" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb54-1968"><a href="#cb54-1968" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-1969"><a href="#cb54-1969" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Diesel Trend'</span>: [</span>
<span id="cb54-1970"><a href="#cb54-1970" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb54-1971"><a href="#cb54-1971" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts.dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb54-1972"><a href="#cb54-1972" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb54-1973"><a href="#cb54-1973" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-1974"><a href="#cb54-1974" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>comparison_dates).<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb54-1975"><a href="#cb54-1975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1976"><a href="#cb54-1976" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_1</span>
<span id="cb54-1977"><a href="#cb54-1977" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-1978"><a href="#cb54-1978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1979"><a href="#cb54-1979" aria-hidden="true" tabindex="-1"></a><span class="fu">##### 2005 - 2024</span></span>
<span id="cb54-1980"><a href="#cb54-1980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1981"><a href="#cb54-1981" aria-hidden="true" tabindex="-1"></a>This table repeats the analysis using only post-2005 data to fit the trends. Comparing this table to the 1994-2024 results reveals whether recent trends differ from long-term patterns.</span>
<span id="cb54-1982"><a href="#cb54-1982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1983"><a href="#cb54-1983" aria-hidden="true" tabindex="-1"></a>If the 2005-2024 trend estimates are higher than the 1994-2024 estimates for the same dates, it indicates prices have been rising faster in recent years than the long-term average would suggest. This could reflect:</span>
<span id="cb54-1984"><a href="#cb54-1984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1985"><a href="#cb54-1985" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Depletion of low-cost oil resources requiring more expensive production</span>
<span id="cb54-1986"><a href="#cb54-1986" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Growth in global demand outpacing supply growth</span>
<span id="cb54-1987"><a href="#cb54-1987" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Climate policies or carbon pricing adding to fuel costs</span>
<span id="cb54-1988"><a href="#cb54-1988" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Reduced refining capacity as older refineries close without replacement</span>
<span id="cb54-1989"><a href="#cb54-1989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1990"><a href="#cb54-1990" aria-hidden="true" tabindex="-1"></a>Conversely, if 2005-2024 trends are lower, it might reflect:</span>
<span id="cb54-1991"><a href="#cb54-1991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1992"><a href="#cb54-1992" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Shale oil production creating downward price pressure</span>
<span id="cb54-1993"><a href="#cb54-1993" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Improved vehicle efficiency reducing demand</span>
<span id="cb54-1994"><a href="#cb54-1994" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Economic shifts away from fuel-intensive activities</span>
<span id="cb54-1995"><a href="#cb54-1995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1996"><a href="#cb54-1996" aria-hidden="true" tabindex="-1"></a>For operating cost calculations, the choice between long-term and recent trends can significantly impact results. If recent trends are more representative of current market conditions, using them produces more accurate estimates. If recent years represent a temporary deviation from long-term patterns, the full-period trend may be more appropriate.</span>
<span id="cb54-1997"><a href="#cb54-1997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-1998"><a href="#cb54-1998" aria-hidden="true" tabindex="-1"></a>The three-decimal-place precision enables analysts to see small but meaningful differences between the two trend periods. Differences of even $0.10/gallon translate to 0.4-0.5 cents per mile for light-duty vehicles and 1.5-2.0 cents per mile for heavy trucks.</span>
<span id="cb54-1999"><a href="#cb54-1999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2002"><a href="#cb54-2002" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-2003"><a href="#cb54-2003" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the comparison DataFrame</span></span>
<span id="cb54-2004"><a href="#cb54-2004" aria-hidden="true" tabindex="-1"></a>comparison_dates <span class="op">=</span> [pd.to_datetime(<span class="st">"2019-01-01"</span>), pd.to_datetime(<span class="st">"2023-12-31"</span>), pd.to_datetime(<span class="st">"2023-07-01"</span>)]</span>
<span id="cb54-2005"><a href="#cb54-2005" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2006"><a href="#cb54-2006" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for dates &gt;= 2005-01-01 and fit trends</span></span>
<span id="cb54-2007"><a href="#cb54-2007" aria-hidden="true" tabindex="-1"></a>date_filter <span class="op">=</span> pd.to_datetime(df_FuelCosts[<span class="st">'Date'</span>]) <span class="op">&gt;=</span> pd.to_datetime(<span class="st">"2005-01-01"</span>)</span>
<span id="cb54-2008"><a href="#cb54-2008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2009"><a href="#cb54-2009" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_2 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-2010"><a href="#cb54-2010" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gasoline Trend'</span>: [</span>
<span id="cb54-2011"><a href="#cb54-2011" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb54-2012"><a href="#cb54-2012" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Gasoline $/gal'</span>])[<span class="st">'Gasoline $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb54-2013"><a href="#cb54-2013" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb54-2014"><a href="#cb54-2014" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb54-2015"><a href="#cb54-2015" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Diesel Trend'</span>: [</span>
<span id="cb54-2016"><a href="#cb54-2016" aria-hidden="true" tabindex="-1"></a>        np.poly1d(np.polyfit(pd.to_datetime(df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Date'</span>]).astype(<span class="st">'int64'</span>),</span>
<span id="cb54-2017"><a href="#cb54-2017" aria-hidden="true" tabindex="-1"></a>                           df_FuelCosts[date_filter].dropna(subset<span class="op">=</span>[<span class="st">'Date'</span>, <span class="st">'Diesel $/gal'</span>])[<span class="st">'Diesel $/gal'</span>].astype(<span class="bu">float</span>), <span class="dv">1</span>))(pd.to_datetime(date).value)</span>
<span id="cb54-2018"><a href="#cb54-2018" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> date <span class="kw">in</span> comparison_dates</span>
<span id="cb54-2019"><a href="#cb54-2019" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-2020"><a href="#cb54-2020" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>comparison_dates).<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb54-2021"><a href="#cb54-2021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2022"><a href="#cb54-2022" aria-hidden="true" tabindex="-1"></a>df_FuelCost_Comparison_2</span>
<span id="cb54-2023"><a href="#cb54-2023" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-2024"><a href="#cb54-2024" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2025"><a href="#cb54-2025" aria-hidden="true" tabindex="-1"></a><span class="fu">## Auto Operating Costs</span></span>
<span id="cb54-2026"><a href="#cb54-2026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2027"><a href="#cb54-2027" aria-hidden="true" tabindex="-1"></a>All the preceding analysisâ€”fuel prices, fuel economy, maintenance costs, and trend evaluationsâ€”now comes together to calculate the bottom-line metric: operating cost in cents per mile for each vehicle class. This is the number that enters travel demand models and informs policy analysis.</span>
<span id="cb54-2028"><a href="#cb54-2028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2029"><a href="#cb54-2029" aria-hidden="true" tabindex="-1"></a>The calculation follows a simple formula for each vehicle class:</span>
<span id="cb54-2030"><a href="#cb54-2030" aria-hidden="true" tabindex="-1"></a><span class="in">`Operating Cost (cents/mile) = [Fuel Price ($/gallon) Ã· Fuel Economy (miles/gallon) Ã— 100] + Maintenance Cost (cents/mile)`</span></span>
<span id="cb54-2031"><a href="#cb54-2031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2032"><a href="#cb54-2032" aria-hidden="true" tabindex="-1"></a>The first term converts fuel price and economy into fuel cost per mile. Dividing dollars per gallon by miles per gallon yields dollars per mile; multiplying by 100 converts to cents per mile. The second term adds non-fuel variable costs (maintenance and tires).</span>
<span id="cb54-2033"><a href="#cb54-2033" aria-hidden="true" tabindex="-1"></a>Four vehicle classes receive separate calculations:</span>
<span id="cb54-2034"><a href="#cb54-2034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2035"><a href="#cb54-2035" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>AOC_Auto: Passenger cars and car-based SUVs</span>
<span id="cb54-2036"><a href="#cb54-2036" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>AOC_LT: Light-duty trucks (pickups, SUVs, vans)</span>
<span id="cb54-2037"><a href="#cb54-2037" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>AOC_MD: Medium-duty trucks (single-unit delivery and commercial trucks)</span>
<span id="cb54-2038"><a href="#cb54-2038" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>AOC_HV: Heavy-duty trucks (combination tractor-trailers)</span>
<span id="cb54-2039"><a href="#cb54-2039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2040"><a href="#cb54-2040" aria-hidden="true" tabindex="-1"></a>Each class uses fuel type (gasoline vs. diesel), fuel economy, and maintenance costs appropriate to that vehicle category. The calculations explicitly show each component to maintain transparency and enable validation.</span>
<span id="cb54-2041"><a href="#cb54-2041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2044"><a href="#cb54-2044" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-2045"><a href="#cb54-2045" aria-hidden="true" tabindex="-1"></a><span class="co"># Autos</span></span>
<span id="cb54-2046"><a href="#cb54-2046" aria-hidden="true" tabindex="-1"></a>AOC_Auto <span class="op">=</span> (</span>
<span id="cb54-2047"><a href="#cb54-2047" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get gasoline price per gallon for July 2023</span></span>
<span id="cb54-2048"><a href="#cb54-2048" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Gasoline Trend'</span>] <span class="op">/</span></span>
<span id="cb54-2049"><a href="#cb54-2049" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Divide by fuel economy (miles per gallon) to get gallons per mile</span></span>
<span id="cb54-2050"><a href="#cb54-2050" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Light Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span>  <span class="co"># Convert to cents</span></span>
<span id="cb54-2051"><a href="#cb54-2051" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add maintenance and tire costs per mile (already in cents)</span></span>
<span id="cb54-2052"><a href="#cb54-2052" aria-hidden="true" tabindex="-1"></a>    df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>]</span>
<span id="cb54-2053"><a href="#cb54-2053" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-2054"><a href="#cb54-2054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2055"><a href="#cb54-2055" aria-hidden="true" tabindex="-1"></a><span class="co"># Light Duty Trucks</span></span>
<span id="cb54-2056"><a href="#cb54-2056" aria-hidden="true" tabindex="-1"></a>AOC_LT <span class="op">=</span> (</span>
<span id="cb54-2057"><a href="#cb54-2057" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: (price per gallon / mpg) * 100 cents per dollar</span></span>
<span id="cb54-2058"><a href="#cb54-2058" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Gasoline Trend'</span>] <span class="op">/</span></span>
<span id="cb54-2059"><a href="#cb54-2059" aria-hidden="true" tabindex="-1"></a>    df_FE_SizeClass_1[df_FE_SizeClass_1[<span class="st">'Manufacturer</span><span class="ch">\'</span><span class="st">s gross vehicle weight class'</span>] <span class="op">==</span> <span class="st">'Light truck subtotal (1â€“2)'</span>][<span class="st">'2002 VIUS'</span>].iloc[<span class="dv">0</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb54-2060"><a href="#cb54-2060" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost</span></span>
<span id="cb54-2061"><a href="#cb54-2061" aria-hidden="true" tabindex="-1"></a>    df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>]</span>
<span id="cb54-2062"><a href="#cb54-2062" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-2063"><a href="#cb54-2063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2064"><a href="#cb54-2064" aria-hidden="true" tabindex="-1"></a><span class="co"># Medium Duty Trucks</span></span>
<span id="cb54-2065"><a href="#cb54-2065" aria-hidden="true" tabindex="-1"></a>AOC_MD <span class="op">=</span> (</span>
<span id="cb54-2066"><a href="#cb54-2066" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: diesel price / medium duty mpg * 100</span></span>
<span id="cb54-2067"><a href="#cb54-2067" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Diesel Trend'</span>] <span class="op">/</span></span>
<span id="cb54-2068"><a href="#cb54-2068" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Medium Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb54-2069"><a href="#cb54-2069" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost: approximation as average of light and heavy</span></span>
<span id="cb54-2070"><a href="#cb54-2070" aria-hidden="true" tabindex="-1"></a>    (df_AutoCost_Comparision.loc[<span class="st">'Maint+Tires'</span>, <span class="st">'Trend'</span>] <span class="op">+</span> (df_RepairMaintenanceCost_Heavy[<span class="st">'CostMile'</span>].mean() <span class="op">*</span> <span class="dv">100</span>)) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb54-2071"><a href="#cb54-2071" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-2072"><a href="#cb54-2072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2073"><a href="#cb54-2073" aria-hidden="true" tabindex="-1"></a><span class="co"># Heavy Duty Trucks</span></span>
<span id="cb54-2074"><a href="#cb54-2074" aria-hidden="true" tabindex="-1"></a>AOC_HV <span class="op">=</span> (</span>
<span id="cb54-2075"><a href="#cb54-2075" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fuel cost: diesel price / heavy duty mpg * 100</span></span>
<span id="cb54-2076"><a href="#cb54-2076" aria-hidden="true" tabindex="-1"></a>    df_FuelCost_Comparison_1.loc[pd.to_datetime(<span class="st">"2023-07-01"</span>), <span class="st">'Diesel Trend'</span>] <span class="op">/</span></span>
<span id="cb54-2077"><a href="#cb54-2077" aria-hidden="true" tabindex="-1"></a>    df_FuelEconomy_Comparision.loc[<span class="st">'Heavy Duty'</span>, <span class="st">'Trend'</span>] <span class="op">*</span> <span class="dv">100</span> <span class="op">+</span></span>
<span id="cb54-2078"><a href="#cb54-2078" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Maintenance cost</span></span>
<span id="cb54-2079"><a href="#cb54-2079" aria-hidden="true" tabindex="-1"></a>    (df_RepairMaintenanceCost_Heavy[<span class="st">'CostMile'</span>].mean() <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb54-2080"><a href="#cb54-2080" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-2081"><a href="#cb54-2081" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-2082"><a href="#cb54-2082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2083"><a href="#cb54-2083" aria-hidden="true" tabindex="-1"></a>Let's examine each calculation in detail:</span>
<span id="cb54-2084"><a href="#cb54-2084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2085"><a href="#cb54-2085" aria-hidden="true" tabindex="-1"></a>**AOC_Auto (Automobiles):**</span>
<span id="cb54-2086"><a href="#cb54-2086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2087"><a href="#cb54-2087" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Uses July 1, 2023 gasoline price from the 1994-2024 trend (df_FuelCost_Comparison_1)</span>
<span id="cb54-2088"><a href="#cb54-2088" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Divides by light-duty fuel economy trend value for 2023 (df_FuelEconomy_Comparision)</span>
<span id="cb54-2089"><a href="#cb54-2089" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Multiplies by 100 to convert dollars per mile to cents per mile</span>
<span id="cb54-2090"><a href="#cb54-2090" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Adds maintenance and tires cost trend value for 2023 (df_AutoCost_Comparision)</span>
<span id="cb54-2091"><a href="#cb54-2091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2092"><a href="#cb54-2092" aria-hidden="true" tabindex="-1"></a>This represents the cost per mile for a typical passenger car under mid-year 2023 conditions. The use of trend values smooths out year-to-year volatility to produce a stable estimate.</span>
<span id="cb54-2093"><a href="#cb54-2093" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2094"><a href="#cb54-2094" aria-hidden="true" tabindex="-1"></a>**AOC_LT (Light Trucks):**</span>
<span id="cb54-2095"><a href="#cb54-2095" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2096"><a href="#cb54-2096" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Uses the same July 1, 2023 gasoline price (light trucks use gasoline, not diesel)</span>
<span id="cb54-2097"><a href="#cb54-2097" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Divides by the fuel economy for light truck subtotal from the 2002 VIUS survey (df_FE_SizeClass_1)</span>
<span id="cb54-2098"><a href="#cb54-2098" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>This 2002 value (16.2 mpg) is older than ideal but represents the most recent detailed survey of light truck fuel economy by weight class</span>
<span id="cb54-2099"><a href="#cb54-2099" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Adds the same maintenance cost as automobiles, as light trucks have similar service requirements</span>
<span id="cb54-2100"><a href="#cb54-2100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2101"><a href="#cb54-2101" aria-hidden="true" tabindex="-1"></a>The light truck calculation uses somewhat older fuel economy data because more recent surveys were discontinued. The 2002 value likely understates current light truck efficiency, as fuel economy has improved since then, meaning this calculation may slightly overestimate light truck operating costs.</span>
<span id="cb54-2102"><a href="#cb54-2102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2103"><a href="#cb54-2103" aria-hidden="true" tabindex="-1"></a>**AOC_MD (Medium Duty Trucks):**</span>
<span id="cb54-2104"><a href="#cb54-2104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2105"><a href="#cb54-2105" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Uses July 1, 2023 diesel price (medium trucks predominantly use diesel engines)</span>
<span id="cb54-2106"><a href="#cb54-2106" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Divides by medium-duty fuel economy trend for 2023</span>
<span id="cb54-2107"><a href="#cb54-2107" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Adds maintenance costs estimated as the average of light-duty maintenance (from AAA data) and heavy-duty maintenance (from trucking industry surveys)</span>
<span id="cb54-2108"><a href="#cb54-2108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2109"><a href="#cb54-2109" aria-hidden="true" tabindex="-1"></a>The maintenance cost approximation acknowledges that medium trucks fall between passenger vehicles and heavy trucks in terms of service intensity and costs. They require more frequent maintenance than cars but less than tractor-trailers.</span>
<span id="cb54-2110"><a href="#cb54-2110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2111"><a href="#cb54-2111" aria-hidden="true" tabindex="-1"></a>**AOC_HV (Heavy Duty Trucks):**</span>
<span id="cb54-2112"><a href="#cb54-2112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2113"><a href="#cb54-2113" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Uses July 1, 2023 diesel price</span>
<span id="cb54-2114"><a href="#cb54-2114" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Divides by heavy-duty fuel economy trend for 2023 (typically around 6 mpg)</span>
<span id="cb54-2115"><a href="#cb54-2115" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Adds heavy truck maintenance costs from American Transportation Research Institute data (converted from dollars per mile to cents per mile by multiplying by 100)</span>
<span id="cb54-2116"><a href="#cb54-2116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2117"><a href="#cb54-2117" aria-hidden="true" tabindex="-1"></a>Heavy trucks have the highest operating costs due to poor fuel economy (large engines moving heavy loads) and intensive maintenance requirements (high annual mileage and severe duty cycles requiring frequent service).</span>
<span id="cb54-2118"><a href="#cb54-2118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2119"><a href="#cb54-2119" aria-hidden="true" tabindex="-1"></a>The calculations use a mix of actual 2023 data and trend-based estimates depending on data availability and volatility. Fuel prices use mid-year 2023 values to represent typical conditions. Fuel economy and maintenance use trend values to smooth short-term fluctuations.</span>
<span id="cb54-2120"><a href="#cb54-2120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2121"><a href="#cb54-2121" aria-hidden="true" tabindex="-1"></a><span class="fu">## Export</span></span>
<span id="cb54-2122"><a href="#cb54-2122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2123"><a href="#cb54-2123" aria-hidden="true" tabindex="-1"></a>The final output table presents the culmination of this analysis: operating costs for the base year 2023 compared to the previous calculation from 2019. This comparison reveals how operating costs have changed and whether the changes are consistent with underlying trends in fuel prices, fuel economy, and maintenance costs.</span>
<span id="cb54-2124"><a href="#cb54-2124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2125"><a href="#cb54-2125" aria-hidden="true" tabindex="-1"></a>The four vehicle classes represent the essential categories for travel demand modeling:</span>
<span id="cb54-2126"><a href="#cb54-2126" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Personal vehicles (autos and light trucks) used for household travel</span>
<span id="cb54-2127"><a href="#cb54-2127" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Commercial vehicles (medium and heavy trucks) used for freight movement</span>
<span id="cb54-2128"><a href="#cb54-2128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2129"><a href="#cb54-2129" aria-hidden="true" tabindex="-1"></a>Each class has distinct cost structures reflecting their different technologies, usage patterns, and operational requirements. Monitoring how these costs evolve over time helps transportation planners understand changing incentives for travel mode choice, vehicle type choice, and trip-making decisions.</span>
<span id="cb54-2130"><a href="#cb54-2130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2133"><a href="#cb54-2133" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb54-2134"><a href="#cb54-2134" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataframe compiling data</span></span>
<span id="cb54-2135"><a href="#cb54-2135" aria-hidden="true" tabindex="-1"></a>df_AOC_export <span class="op">=</span> pd.DataFrame({</span>
<span id="cb54-2136"><a href="#cb54-2136" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Auto Operating Costs'</span>: [<span class="st">'AOC_Auto'</span>, <span class="st">'AOC_LT'</span>, <span class="st">'AOC_MD'</span>, <span class="st">'AOC_HV'</span>],</span>
<span id="cb54-2137"><a href="#cb54-2137" aria-hidden="true" tabindex="-1"></a>  <span class="st">'2019 Cost (cent/mile)'</span>: [<span class="fl">21.7</span>, <span class="fl">27.3</span>, <span class="fl">55.5</span>, <span class="fl">74.3</span>], <span class="co"># From 2019 Excel Calculations</span></span>
<span id="cb54-2138"><a href="#cb54-2138" aria-hidden="true" tabindex="-1"></a>  <span class="st">'2023 Cost (cent/mile)'</span>: [</span>
<span id="cb54-2139"><a href="#cb54-2139" aria-hidden="true" tabindex="-1"></a>      AOC_Auto.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb54-2140"><a href="#cb54-2140" aria-hidden="true" tabindex="-1"></a>      AOC_LT.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb54-2141"><a href="#cb54-2141" aria-hidden="true" tabindex="-1"></a>      AOC_MD.<span class="bu">round</span>(<span class="dv">1</span>),</span>
<span id="cb54-2142"><a href="#cb54-2142" aria-hidden="true" tabindex="-1"></a>      AOC_HV.<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb54-2143"><a href="#cb54-2143" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb54-2144"><a href="#cb54-2144" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb54-2145"><a href="#cb54-2145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2146"><a href="#cb54-2146" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataset</span></span>
<span id="cb54-2147"><a href="#cb54-2147" aria-hidden="true" tabindex="-1"></a>df_AOC_export</span>
<span id="cb54-2148"><a href="#cb54-2148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb54-2149"><a href="#cb54-2149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2150"><a href="#cb54-2150" aria-hidden="true" tabindex="-1"></a>The comparison table shows operating costs for both 2019 and 2023, revealing several important trends:</span>
<span id="cb54-2151"><a href="#cb54-2151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2152"><a href="#cb54-2152" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**Automobiles (AOC_Auto):** The increase from 21.7 to <span class="in">`python AOC_Auto.round(1)`</span> cents per mile reflects changes in gasoline prices and offsetting improvements in fuel economy. If the increse is modest (a few cents), it suggests that fuel economy gains have partially offset fuel price increases. A larger increase indicates that fuel prices rose faster than efficiency improved.</span>
<span id="cb54-2153"><a href="#cb54-2153" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**Light Trucks (AOC_LT):** The increase from 27.3 to <span class="in">`python AOC_LT.round(1)`</span> cents per mile shows how pickup trucks and SUVs, which have lower fuel economy than cars, experience larger operating cost increases when fuel prices rise. The percentage increase for light trucks typically exceeds that for automobiles unless light truck fuel economy improved unusually fast.</span>
<span id="cb54-2154"><a href="#cb54-2154" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**Medium Duty Trucks (AOC_MD):** The increase from 55.5 to <span class="in">`python AOC_MD.round(1)`</span> cents per mile reflects diesel price changes and medium truck efficiency trends. Medium trucks have roughly double the operating costs of light-duty vehicles due to much lower fuel economy (7-8 mpg vs. 16-24 mpg). These costs directly impact local freight delivery economics and potentially goods prices.</span>
<span id="cb54-2155"><a href="#cb54-2155" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**Heavy Duty Trucks (AOC_HV):** The increase from 74.3 to <span class="in">`python AOC_HV.round(1)`</span> cents per mile shows how tractor-trailers, with the lowest fuel economy (5-6 mpg), face the highest operating costs. Even modest diesel price increases create substantial cost pressures for trucking companies. These costs ultimately influence freight rates and the competitiveness of truck transport versus rail or other modes.</span>
<span id="cb54-2156"><a href="#cb54-2156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2157"><a href="#cb54-2157" aria-hidden="true" tabindex="-1"></a>The table provides transparency by showing both the historical baseline (2019) and current estimates (2023). Users can assess whether cost changes are reasonable given fuel price movements between these years. The values can be directly imported into travel demand models as updated per-mile cost parameters.</span>
<span id="cb54-2158"><a href="#cb54-2158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2159"><a href="#cb54-2159" aria-hidden="true" tabindex="-1"></a>These operating cost estimates exclude fixed costs (insurance, depreciation, registration) because travel demand models respond to marginal costsâ€”the cost of each additional mile driven. Fixed costs, already paid regardless of usage, don't influence short-term travel decisions. However, they do affect vehicle ownership decisions and long-term travel patterns.</span>
<span id="cb54-2160"><a href="#cb54-2160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2161"><a href="#cb54-2161" aria-hidden="true" tabindex="-1"></a>The final values should be validated by comparing to other sources: trucking industry surveys, fleet operator cost data, or independent fuel cost calculators. If the estimates align with these external benchmarks, it provides confidence in the methodology. Significant discrepancies warrant investigation to identify potential data errors or methodological improvements.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>